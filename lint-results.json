[{"filePath":"D:\\NextJSProjects\\hrm-saas\\check-db.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(auth)\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(auth)\\forgot-password\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(auth)\\forgot-password\\page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":64,"column":56,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2490,2612],"text":"\r\n                        Enter your email address and we&apos;ll send you a link to reset your password.\r\n                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2490,2612],"text":"\r\n                        Enter your email address and we&lsquo;ll send you a link to reset your password.\r\n                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2490,2612],"text":"\r\n                        Enter your email address and we&#39;ll send you a link to reset your password.\r\n                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2490,2612],"text":"\r\n                        Enter your email address and we&rsquo;ll send you a link to reset your password.\r\n                    "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { toast } from 'sonner'\r\nimport { Loader2, ArrowLeft } from 'lucide-react'\r\nimport Link from 'next/link'\r\nimport { forgotPasswordAction } from './actions'\r\n\r\nexport default function ForgotPasswordPage() {\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [isSubmitted, setIsSubmitted] = useState(false)\r\n\r\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault()\r\n        setIsLoading(true)\r\n\r\n        const formData = new FormData(e.currentTarget)\r\n        const result = await forgotPasswordAction(formData)\r\n\r\n        setIsLoading(false)\r\n\r\n        if (result.success) {\r\n            setIsSubmitted(true)\r\n            toast.success('Check your email for the reset link')\r\n        } else {\r\n            toast.error(result.error || 'Failed to send reset email')\r\n        }\r\n    }\r\n\r\n    if (isSubmitted) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n                <div className=\"max-w-md w-full space-y-8 text-center\">\r\n                    <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">\r\n                        Check your email\r\n                    </h2>\r\n                    <p className=\"mt-2 text-sm text-gray-600\">\r\n                        We have sent a password reset link to your email address.\r\n                    </p>\r\n                    <div className=\"mt-6\">\r\n                        <Link href=\"/login\">\r\n                            <Button variant=\"outline\" className=\"w-full\">\r\n                                <ArrowLeft className=\"mr-2 h-4 w-4\" />\r\n                                Back to Login\r\n                            </Button>\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"max-w-md w-full space-y-8\">\r\n                <div>\r\n                    <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\r\n                        Reset your password\r\n                    </h2>\r\n                    <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n                        Enter your email address and we'll send you a link to reset your password.\r\n                    </p>\r\n                </div>\r\n                <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\r\n                    <div className=\"rounded-md shadow-sm space-y-4\">\r\n                        <div>\r\n                            <Label htmlFor=\"email\">Email address</Label>\r\n                            <Input\r\n                                id=\"email\"\r\n                                name=\"email\"\r\n                                type=\"email\"\r\n                                autoComplete=\"email\"\r\n                                required\r\n                                placeholder=\"name@company.com\"\r\n                                className=\"mt-1\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            className=\"w-full\"\r\n                            disabled={isLoading}\r\n                        >\r\n                            {isLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                            {isLoading ? 'Sending link...' : 'Send reset link'}\r\n                        </Button>\r\n                    </div>\r\n\r\n                    <div className=\"text-center\">\r\n                        <Link href=\"/login\" className=\"font-medium text-sm text-primary hover:text-primary/80 flex items-center justify-center\">\r\n                            <ArrowLeft className=\"mr-2 h-4 w-4\" />\r\n                            Back to Login\r\n                        </Link>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(auth)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(auth)\\login\\page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":125,"column":28,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5104,5152],"text":"\r\n                        Don&apos;t have an account?"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5104,5152],"text":"\r\n                        Don&lsquo;t have an account?"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5104,5152],"text":"\r\n                        Don&#39;t have an account?"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5104,5152],"text":"\r\n                        Don&rsquo;t have an account?"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { toast } from 'sonner'\r\nimport { Loader2 } from 'lucide-react'\r\n\r\nexport default function LoginPage() {\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const router = useRouter()\r\n\r\n    const handleLogin = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setIsLoading(true)\r\n\r\n        try {\r\n            const supabase = createClient()\r\n\r\n            const { data, error } = await supabase.auth.signInWithPassword({\r\n                email,\r\n                password,\r\n            })\r\n\r\n            if (error) {\r\n                toast.error(error.message)\r\n                return\r\n            }\r\n\r\n            if (data.user) {\r\n                toast.success('Login successful!')\r\n                router.push('/dashboard')\r\n                router.refresh()\r\n            }\r\n        } catch (error) {\r\n            console.error('Login error:', error)\r\n            toast.error('An unexpected error occurred')\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"max-w-md w-full space-y-8\">\r\n                <div>\r\n                    <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\r\n                        Sign in to your account\r\n                    </h2>\r\n                    <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n                        HRM SaaS - Employee Management System\r\n                    </p>\r\n                </div>\r\n                <form className=\"mt-8 space-y-6\" onSubmit={handleLogin}>\r\n                    <div className=\"rounded-md shadow-sm space-y-4\">\r\n                        <div>\r\n                            <Label htmlFor=\"email\">Email address</Label>\r\n                            <Input\r\n                                id=\"email\"\r\n                                name=\"email\"\r\n                                type=\"email\"\r\n                                autoComplete=\"email\"\r\n                                required\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                                placeholder=\"admin@testcompany.com\"\r\n                                className=\"mt-1\"\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <Label htmlFor=\"password\">Password</Label>\r\n                            <Input\r\n                                id=\"password\"\r\n                                name=\"password\"\r\n                                type=\"password\"\r\n                                autoComplete=\"current-password\"\r\n                                required\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                placeholder=\"••••••••\"\r\n                                className=\"mt-1\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center\">\r\n                            <input\r\n                                id=\"remember-me\"\r\n                                name=\"remember-me\"\r\n                                type=\"checkbox\"\r\n                                className=\"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded\"\r\n                            />\r\n                            <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-900\">\r\n                                Remember me\r\n                            </label>\r\n                        </div>\r\n\r\n                        <div className=\"text-sm\">\r\n                            <a href=\"/forgot-password\" className=\"font-medium text-primary hover:text-primary/80\">\r\n                                Forgot your password?\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            className=\"w-full\"\r\n                            disabled={isLoading}\r\n                        >\r\n                            {isLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                            {isLoading ? 'Signing in...' : 'Sign in'}\r\n                        </Button>\r\n                    </div>\r\n                </form>\r\n\r\n                <div className=\"mt-6 text-center text-sm\">\r\n                    <p className=\"text-gray-600\">\r\n                        Don't have an account?{' '}\r\n                        <a href=\"/register\" className=\"font-medium text-primary hover:text-primary/80\">\r\n                            Sign up\r\n                        </a>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(auth)\\register\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(auth)\\update-password\\actions.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'redirect' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":18,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"redirect"},"fix":{"range":[70,112],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server'\r\n\r\nimport { createClient } from '@/lib/supabase/server'\r\nimport { redirect } from 'next/navigation'\r\n\r\nexport async function updatePasswordAction(formData: FormData) {\r\n    const password = formData.get('password') as string\r\n    const confirmPassword = formData.get('confirmPassword') as string\r\n\r\n    if (!password || !confirmPassword) {\r\n        return { success: false, error: 'Password is required' }\r\n    }\r\n\r\n    if (password !== confirmPassword) {\r\n        return { success: false, error: 'Passwords do not match' }\r\n    }\r\n\r\n    const supabase = await createClient()\r\n    const { error } = await supabase.auth.updateUser({\r\n        password: password\r\n    })\r\n\r\n    if (error) {\r\n        return { success: false, error: error.message }\r\n    }\r\n\r\n    return { success: true }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(auth)\\update-password\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\attendance\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\attendance\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\departments\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\departments\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\designations\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\designations\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\employees\\[id]\\edit\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\employees\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1133,1136],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1133,1136],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1714,1717],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1714,1717],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":270,"column":109,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":270,"endColumn":112,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12759,12762],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12759,12762],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":288,"column":109,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":288,"endColumn":112,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13838,13841],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13838,13841],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":305,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":305,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14589,14592],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14589,14592],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { redirect } from 'next/navigation'\r\nimport { createClient } from '@/lib/supabase/server'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { ArrowLeft, Mail, Phone, Calendar, MapPin, Users, Briefcase, Edit, Trash2 } from 'lucide-react'\r\nimport Link from 'next/link'\r\nimport Image from 'next/image'\r\n\r\ninterface EmployeeDetailPageProps {\r\n    params: Promise<{\r\n        id: string\r\n    }>\r\n}\r\n\r\nexport default async function EmployeeDetailPage(props: EmployeeDetailPageProps) {\r\n    const params = await props.params\r\n    const supabase = await createClient()\r\n\r\n    // Check authentication\r\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\r\n\r\n    if (authError || !user) {\r\n        redirect('/login')\r\n    }\r\n\r\n    // Get user's organization\r\n    const { data: userData } = await supabase\r\n        .from('users')\r\n        .select('organization_id, role')\r\n        .eq('id', user.id)\r\n        .single() as any\r\n\r\n    if (!userData) {\r\n        redirect('/login')\r\n    }\r\n\r\n    const organizationId = userData.organization_id\r\n\r\n    // Fetch employee with all related data\r\n    const { data: employee, error: employeeError } = await supabase\r\n        .from('employees')\r\n        .select(`\r\n            *,\r\n            department:department_id(id, name),\r\n            designation:designation_id(id, name),\r\n            manager:manager_id(id, first_name, last_name, employee_id)\r\n        `)\r\n        .eq('id', params.id)\r\n        .eq('organization_id', organizationId)\r\n        .single() as any\r\n\r\n    if (employeeError || !employee) {\r\n        redirect('/employees')\r\n    }\r\n\r\n    // Check if user can edit/delete\r\n    const canEdit = ['SUPER_ADMIN', 'HR_ADMIN'].includes(userData.role)\r\n    const canDelete = userData.role === 'SUPER_ADMIN'\r\n\r\n    // Format date helper\r\n    const formatDate = (date: string | null) => {\r\n        if (!date) return 'N/A'\r\n        return new Date(date).toLocaleDateString('en-US', {\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric'\r\n        })\r\n    }\r\n\r\n    // Status badge color\r\n    const getStatusColor = (status: string) => {\r\n        switch (status) {\r\n            case 'ACTIVE': return 'bg-green-100 text-green-800'\r\n            case 'INACTIVE': return 'bg-gray-100 text-gray-800'\r\n            case 'ON_LEAVE': return 'bg-yellow-100 text-yellow-800'\r\n            case 'RESIGNED': return 'bg-red-100 text-red-800'\r\n            default: return 'bg-gray-100 text-gray-800'\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"container mx-auto py-8 px-4\">\r\n            {/* Header */}\r\n            <div className=\"mb-6\">\r\n                <Link href=\"/employees\">\r\n                    <Button variant=\"ghost\" size=\"sm\" className=\"mb-4\">\r\n                        <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n                        Back to Employees\r\n                    </Button>\r\n                </Link>\r\n\r\n                <div className=\"flex items-start justify-between\">\r\n                    <div className=\"flex items-center gap-6\">\r\n                        {/* Profile Image */}\r\n                        <div className=\"relative h-24 w-24 rounded-full overflow-hidden bg-muted\">\r\n                            {employee.profile_image_url ? (\r\n                                <Image\r\n                                    src={employee.profile_image_url}\r\n                                    alt={`${employee.first_name} ${employee.last_name}`}\r\n                                    fill\r\n                                    className=\"object-cover\"\r\n                                />\r\n                            ) : (\r\n                                <div className=\"h-full w-full flex items-center justify-center bg-primary/10 text-primary text-2xl font-semibold\">\r\n                                    {employee.first_name[0]}{employee.last_name[0]}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Basic Info */}\r\n                        <div>\r\n                            <h1 className=\"text-3xl font-bold mb-2\">\r\n                                {employee.first_name} {employee.last_name}\r\n                            </h1>\r\n                            <div className=\"flex items-center gap-3 text-muted-foreground\">\r\n                                <span>{employee.employee_id}</span>\r\n                                <span>•</span>\r\n                                <span>{employee.designation?.name}</span>\r\n                                <span>•</span>\r\n                                <Badge className={getStatusColor(employee.status)}>\r\n                                    {employee.status}\r\n                                </Badge>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Action Buttons */}\r\n                    <div className=\"flex gap-2\">\r\n                        {canEdit && (\r\n                            <Link href={`/employees/${employee.id}/edit`}>\r\n                                <Button>\r\n                                    <Edit className=\"h-4 w-4 mr-2\" />\r\n                                    Edit\r\n                                </Button>\r\n                            </Link>\r\n                        )}\r\n                        {canDelete && (\r\n                            <Button variant=\"destructive\">\r\n                                <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                                Delete\r\n                            </Button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                {/* Left Column - Main Information */}\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    {/* Personal Information */}\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Personal Information</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">Email</p>\r\n                                <div className=\"flex items-center gap-2 mt-1\">\r\n                                    <Mail className=\"h-4 w-4 text-muted-foreground\" />\r\n                                    <p className=\"font-medium\">{employee.email}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">Phone</p>\r\n                                <div className=\"flex items-center gap-2 mt-1\">\r\n                                    <Phone className=\"h-4 w-4 text-muted-foreground\" />\r\n                                    <p className=\"font-medium\">{employee.phone}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">Date of Birth</p>\r\n                                <div className=\"flex items-center gap-2 mt-1\">\r\n                                    <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n                                    <p className=\"font-medium\">{formatDate(employee.date_of_birth)}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">Gender</p>\r\n                                <p className=\"font-medium mt-1\">{employee.gender}</p>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">Blood Group</p>\r\n                                <p className=\"font-medium mt-1\">{employee.blood_group || 'N/A'}</p>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">Marital Status</p>\r\n                                <p className=\"font-medium mt-1\">{employee.marital_status}</p>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Employment Information */}\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Employment Information</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">Department</p>\r\n                                <div className=\"flex items-center gap-2 mt-1\">\r\n                                    <Briefcase className=\"h-4 w-4 text-muted-foreground\" />\r\n                                    <p className=\"font-medium\">{employee.department?.name}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">Designation</p>\r\n                                <p className=\"font-medium mt-1\">{employee.designation?.name}</p>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">Employment Type</p>\r\n                                <p className=\"font-medium mt-1\">{employee.employment_type}</p>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">Reporting Manager</p>\r\n                                <div className=\"flex items-center gap-2 mt-1\">\r\n                                    <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n                                    <p className=\"font-medium\">\r\n                                        {employee.manager\r\n                                            ? `${employee.manager.first_name} ${employee.manager.last_name}`\r\n                                            : 'N/A'\r\n                                        }\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">Joining Date</p>\r\n                                <p className=\"font-medium mt-1\">{formatDate(employee.joining_date)}</p>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">Confirmation Date</p>\r\n                                <p className=\"font-medium mt-1\">{formatDate(employee.confirmation_date)}</p>\r\n                            </div>\r\n\r\n                            {employee.resignation_date && (\r\n                                <div>\r\n                                    <p className=\"text-sm text-muted-foreground\">Resignation Date</p>\r\n                                    <p className=\"font-medium mt-1\">{formatDate(employee.resignation_date)}</p>\r\n                                </div>\r\n                            )}\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Address Information */}\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Address Information</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-4\">\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground mb-2\">Current Address</p>\r\n                                <div className=\"flex items-start gap-2\">\r\n                                    <MapPin className=\"h-4 w-4 text-muted-foreground mt-1\" />\r\n                                    <p className=\"font-medium\">\r\n                                        {(() => {\r\n                                            const addr = employee.current_address\r\n                                            if (!addr) return 'Not provided'\r\n                                            if (typeof addr === 'string') return addr\r\n                                            if (typeof addr === 'object' && 'full' in addr) return (addr as any).full\r\n                                            return JSON.stringify(addr)\r\n                                        })()}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <Separator />\r\n\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground mb-2\">Permanent Address</p>\r\n                                <div className=\"flex items-start gap-2\">\r\n                                    <MapPin className=\"h-4 w-4 text-muted-foreground mt-1\" />\r\n                                    <p className=\"font-medium\">\r\n                                        {(() => {\r\n                                            const addr = employee.permanent_address\r\n                                            if (!addr) return 'Not provided'\r\n                                            if (typeof addr === 'string') return addr\r\n                                            if (typeof addr === 'object' && 'full' in addr) return (addr as any).full\r\n                                            return JSON.stringify(addr)\r\n                                        })()}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Emergency Contacts */}\r\n                    {employee.emergency_contacts && (\r\n                        <Card>\r\n                            <CardHeader>\r\n                                <CardTitle>Emergency Contacts</CardTitle>\r\n                            </CardHeader>\r\n                            <CardContent>\r\n                                {(() => {\r\n                                    let contacts: any[] = []\r\n                                    if (Array.isArray(employee.emergency_contacts)) {\r\n                                        contacts = employee.emergency_contacts\r\n                                    } else if (typeof employee.emergency_contacts === 'string') {\r\n                                        try { contacts = JSON.parse(employee.emergency_contacts) } catch { }\r\n                                    }\r\n\r\n                                    if (contacts.length === 0) return <p className=\"text-muted-foreground\">No emergency contacts</p>\r\n\r\n                                    return (\r\n                                        <div className=\"space-y-4\">\r\n                                            {contacts.map((contact, i) => (\r\n                                                <div key={i} className=\"grid gap-1 border-b last:border-0 pb-3 last:pb-0\">\r\n                                                    <p className=\"font-medium\">{contact.name} <span className=\"text-muted-foreground text-sm\">({contact.relationship})</span></p>\r\n                                                    <p className=\"text-sm text-muted-foreground flex items-center gap-2\">\r\n                                                        <Phone className=\"h-3 w-3\" />\r\n                                                        {contact.phone}\r\n                                                    </p>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    )\r\n                                })()}\r\n                            </CardContent>\r\n                        </Card>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Right Column - Stats & Quick Info */}\r\n                <div className=\"space-y-6\">\r\n                    {/* Quick Stats */}\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Quick Stats</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-4\">\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">Status</p>\r\n                                <Badge className={`${getStatusColor(employee.status)} mt-1`}>\r\n                                    {employee.status}\r\n                                </Badge>\r\n                            </div>\r\n\r\n                            <Separator />\r\n\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">Tenure</p>\r\n                                <p className=\"font-medium mt-1\">\r\n                                    {Math.floor(\r\n                                        (new Date().getTime() - new Date(employee.joining_date).getTime())\r\n                                        / (1000 * 60 * 60 * 24 * 365)\r\n                                    )} years\r\n                                </p>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Leave Balance - Placeholder */}\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Leave Balance</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <p className=\"text-sm text-muted-foreground\">\r\n                                Leave balance information will be displayed here\r\n                            </p>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Recent Activity - Placeholder */}\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Recent Activity</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <p className=\"text-sm text-muted-foreground\">\r\n                                No recent activity\r\n                            </p>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\employees\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\employees\\new\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\employees\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'employeesError' is assigned a value but never used.","line":100,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":100,"endColumn":56},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":110,"column":49,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3682,3766],"text":"\r\n                        Manage your organization&apos;s employees\r\n                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3682,3766],"text":"\r\n                        Manage your organization&lsquo;s employees\r\n                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3682,3766],"text":"\r\n                        Manage your organization&#39;s employees\r\n                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3682,3766],"text":"\r\n                        Manage your organization&rsquo;s employees\r\n                    "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { redirect } from 'next/navigation'\r\nimport Link from 'next/link'\r\nimport { createClient } from '@/lib/supabase/server'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Plus } from 'lucide-react'\r\nimport { EmployeeFilters } from '@/components/employees/employee-filters'\r\nimport { EmployeeListActions } from '@/components/employees/employee-list-actions'\r\n\r\ninterface EmployeesPageProps {\r\n    searchParams: Promise<{\r\n        search?: string\r\n        department?: string\r\n        designation?: string\r\n        status?: string\r\n        type?: string\r\n    }>\r\n}\r\n\r\nexport default async function EmployeesPage(props: EmployeesPageProps) {\r\n    const searchParams = await props.searchParams\r\n    const supabase = await createClient()\r\n\r\n    // Check authentication\r\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\r\n\r\n    if (authError || !user) {\r\n        redirect('/login')\r\n    }\r\n\r\n    // Get user's organization\r\n    const { data: userData } = await supabase\r\n        .from('users')\r\n        .select('organization_id, role')\r\n        .eq('id', user.id)\r\n        .single()\r\n\r\n    if (!userData) {\r\n        redirect('/login')\r\n    }\r\n\r\n    const organizationId = userData.organization_id\r\n\r\n    // Fetch departments and designations for filters\r\n    const { data: departments = [] } = await supabase\r\n        .from('departments')\r\n        .select('id, name')\r\n        .eq('organization_id', organizationId)\r\n        .order('name')\r\n\r\n    const { data: designations = [] } = await supabase\r\n        .from('designations')\r\n        .select('id, name')\r\n        .eq('organization_id', organizationId)\r\n        .order('name')\r\n\r\n    // Build query for employees\r\n    let query = supabase\r\n        .from('employees')\r\n        .select(`\r\n            id,\r\n            employee_id,\r\n            first_name,\r\n            last_name,\r\n            email,\r\n            phone,\r\n            status,\r\n            employment_type,\r\n            joining_date,\r\n            department:department_id(name),\r\n            designation:designation_id(name),\r\n            manager:manager_id(first_name, last_name)\r\n        `)\r\n        .eq('organization_id', organizationId)\r\n        .order('created_at', { ascending: false })\r\n\r\n    // Apply filters\r\n    if (searchParams.search) {\r\n        const searchTerm = searchParams.search\r\n        // Simple search on name, email, or employee_id\r\n        // Note: Supabase 'or' syntax can be tricky with foreign tables, so we stick to local columns\r\n        query = query.or(`first_name.ilike.%${searchTerm}%,last_name.ilike.%${searchTerm}%,email.ilike.%${searchTerm}%,employee_id.ilike.%${searchTerm}%`)\r\n    }\r\n\r\n    if (searchParams.department && searchParams.department !== 'all') {\r\n        query = query.eq('department_id', searchParams.department)\r\n    }\r\n\r\n    if (searchParams.designation && searchParams.designation !== 'all') {\r\n        query = query.eq('designation_id', searchParams.designation)\r\n    }\r\n\r\n    if (searchParams.status && searchParams.status !== 'all') {\r\n        query = query.eq('status', searchParams.status)\r\n    }\r\n\r\n    if (searchParams.type && searchParams.type !== 'all') {\r\n        query = query.eq('employment_type', searchParams.type)\r\n    }\r\n\r\n    const { data: employees = [], error: employeesError } = await query\r\n\r\n    const canCreateEmployee = ['SUPER_ADMIN', 'HR_ADMIN'].includes(userData.role)\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between mb-8\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold\">Employees</h1>\r\n                    <p className=\"text-muted-foreground mt-2\">\r\n                        Manage your organization's employees\r\n                    </p>\r\n                </div>\r\n                {canCreateEmployee && (\r\n                    <Link href=\"/employees/new\">\r\n                        <Button>\r\n                            <Plus className=\"h-4 w-4 mr-2\" />\r\n                            Add Employee\r\n                        </Button>\r\n                    </Link>\r\n                )}\r\n            </div>\r\n\r\n            <EmployeeFilters\r\n                departments={departments || []}\r\n                designations={designations || []}\r\n                employeesData={employees || []}\r\n            />\r\n\r\n            {!employees || employees.length === 0 ? (\r\n                <div className=\"bg-card rounded-lg border p-12 text-center\">\r\n                    <h3 className=\"text-lg font-semibold mb-2\">No employees found</h3>\r\n                    <p className=\"text-muted-foreground mb-6\">\r\n                        {Object.keys(searchParams).length > 0\r\n                            ? \"Try adjusting your search or filters\"\r\n                            : \"Get started by adding your first employee\"}\r\n                    </p>\r\n                    {canCreateEmployee && !Object.keys(searchParams).length && (\r\n                        <Link href=\"/employees/new\">\r\n                            <Button>\r\n                                <Plus className=\"h-4 w-4 mr-2\" />\r\n                                Add Employee\r\n                            </Button>\r\n                        </Link>\r\n                    )}\r\n                </div>\r\n            ) : (\r\n                <div className=\"bg-card rounded-lg border overflow-hidden\">\r\n                    <table className=\"w-full\">\r\n                        <thead className=\"bg-muted/50 border-b\">\r\n                            <tr>\r\n                                <th className=\"px-6 py-3 text-left text-sm font-semibold\">Employee ID</th>\r\n                                <th className=\"px-6 py-3 text-left text-sm font-semibold\">Name</th>\r\n                                <th className=\"px-6 py-3 text-left text-sm font-semibold\">Email</th>\r\n                                <th className=\"px-6 py-3 text-left text-sm font-semibold\">Department</th>\r\n                                <th className=\"px-6 py-3 text-left text-sm font-semibold\">Designation</th>\r\n                                <th className=\"px-6 py-3 text-left text-sm font-semibold\">Status</th>\r\n                                <th className=\"px-6 py-3 text-right text-sm font-semibold\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y\">\r\n                            {employees.map((employee) => (\r\n                                <tr key={employee.id} className=\"hover:bg-muted/30 transition-colors\">\r\n                                    <td className=\"px-6 py-4 text-sm font-medium\">{employee.employee_id}</td>\r\n                                    <td className=\"px-6 py-4 text-sm\">\r\n                                        <Link\r\n                                            href={`/employees/${employee.id}`}\r\n                                            className=\"hover:underline hover:text-primary font-medium\"\r\n                                        >\r\n                                            {employee.first_name} {employee.last_name}\r\n                                        </Link>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-sm text-muted-foreground\">{employee.email}</td>\r\n                                    <td className=\"px-6 py-4 text-sm\">\r\n                                        {employee.department?.name || 'N/A'}\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-sm\">\r\n                                        {employee.designation?.name || 'N/A'}\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-sm\">\r\n                                        <span\r\n                                            className={`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold ${employee.status === 'ACTIVE'\r\n                                                ? 'bg-green-100 text-green-800'\r\n                                                : employee.status === 'INACTIVE'\r\n                                                    ? 'bg-gray-100 text-gray-800'\r\n                                                    : employee.status === 'ON_LEAVE'\r\n                                                        ? 'bg-yellow-100 text-yellow-800'\r\n                                                        : 'bg-red-100 text-red-800'\r\n                                                }`}\r\n                                        >\r\n                                            {employee.status}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-sm text-right\">\r\n                                        <EmployeeListActions\r\n                                            employeeId={employee.id}\r\n                                            userRole={userData.role}\r\n                                        />\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\leaves\\actions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[599,602],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[599,602],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1072,1075],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1072,1075],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1084,1087],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1084,1087],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1708,1711],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1708,1711],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2276,2279],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2276,2279],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":104,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3536,3539],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3536,3539],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'employee' is assigned a value but never used.","line":111,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":111,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":115,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3941,3944],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3941,3944],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":115,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3953,3956],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3953,3956],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":126,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4508,4511],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4508,4511],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":126,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4520,4523],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4520,4523],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":147,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5168,5171],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5168,5171],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":165,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5803,5806],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5803,5806],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'comment' is defined but never used.","line":251,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":251,"endColumn":68},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'comment' is defined but never used.","line":331,"column":60,"nodeType":"Identifier","messageId":"unusedVar","endLine":331,"endColumn":67}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server'\r\n\r\nimport { createClient } from '@/lib/supabase/server'\r\nimport { revalidatePath } from 'next/cache'\r\nimport { z } from 'zod'\r\n\r\nconst leaveSchema = z.object({\r\n    leaveTypeId: z.string().uuid(),\r\n    startDate: z.string().transform(str => new Date(str)),\r\n    endDate: z.string().transform(str => new Date(str)),\r\n    reason: z.string().min(5),\r\n    isHalfDay: z.boolean().default(false)\r\n}).refine(data => data.endDate >= data.startDate, {\r\n    message: \"End date must be after or equal to start date\",\r\n    path: [\"endDate\"]\r\n})\r\n\r\nexport async function applyLeaveAction(prevState: any, formData: FormData) {\r\n    const supabase = await createClient()\r\n\r\n    // Get current user and employee record\r\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\r\n    if (authError || !user) {\r\n        return { success: false, error: 'Unauthorized' }\r\n    }\r\n\r\n    const { data: employee } = await supabase\r\n        .from('employees')\r\n        .select('id, organization_id')\r\n        .eq('user_id', user.id)\r\n        .single() as { data: any, error: any }\r\n\r\n    if (!employee) {\r\n        return { success: false, error: 'Employee record not found' }\r\n    }\r\n\r\n    const rawData = {\r\n        leaveTypeId: formData.get('leaveTypeId'),\r\n        startDate: formData.get('startDate'),\r\n        endDate: formData.get('endDate'),\r\n        reason: formData.get('reason'),\r\n        isHalfDay: formData.get('isHalfDay') === 'on'\r\n    }\r\n\r\n    const validated = leaveSchema.safeParse(rawData)\r\n\r\n    if (!validated.success) {\r\n        const formatted = validated.error.format()\r\n        const errorMessage = formatted._errors?.[0] ||\r\n            Object.values(formatted).flatMap((e: any) => e?._errors || [])[0] ||\r\n            'Invalid form data'\r\n\r\n        return {\r\n            success: false,\r\n            error: errorMessage\r\n        }\r\n    }\r\n\r\n    const { startDate, endDate, isHalfDay } = validated.data\r\n\r\n    // Calculate days\r\n    const diffTime = Math.abs(endDate.getTime() - startDate.getTime())\r\n    let distinctDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1\r\n\r\n    if (isHalfDay) {\r\n        distinctDays = 0.5\r\n    }\r\n\r\n    // Insert leave request\r\n    const { error: insertError } = await (supabase\r\n        .from('leaves') as any)\r\n        .insert({\r\n            organization_id: employee.organization_id,\r\n            employee_id: employee.id,\r\n            leave_type_id: validated.data.leaveTypeId,\r\n            start_date: validated.data.startDate.toISOString().split('T')[0],\r\n            end_date: validated.data.endDate.toISOString().split('T')[0],\r\n            days: distinctDays,\r\n            is_half_day: isHalfDay,\r\n            reason: validated.data.reason,\r\n            status: 'PENDING'\r\n        })\r\n\r\n    if (insertError) {\r\n        console.error('Leave application error:', insertError)\r\n        return { success: false, error: 'Failed to apply for leave' }\r\n    }\r\n\r\n    revalidatePath('/leaves')\r\n    return { success: true, message: 'Leave application submitted successfully' }\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n// HOLIDAY ACTIONS\r\n// ----------------------------------------------------------------------\r\n\r\nconst holidaySchema = z.object({\r\n    name: z.string().min(2, \"Name must be at least 2 characters\"),\r\n    date: z.string().transform(str => new Date(str)),\r\n    type: z.enum(['PUBLIC', 'COMPANY', 'RESTRICTED']),\r\n    description: z.string().optional()\r\n})\r\n\r\nexport async function createHolidayAction(prevState: any, formData: FormData) {\r\n    const supabase = await createClient()\r\n\r\n    // 1. Auth & Perms Check\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n    if (!user) return { success: false, error: 'Unauthorized' }\r\n\r\n    const { data: employee } = await supabase\r\n        .from('employees')\r\n        .select('organization_id')\r\n        .eq('user_id', user.id)\r\n        .single() as { data: any, error: any }\r\n\r\n    // Only HR_ADMIN or SUPER_ADMIN (checked via role enum usually, but for now strict check)\r\n    // Assuming 'role' in employees table mirrors users role or we check users table. \r\n    // Let's check the users table for role as per previous patterns if employee doesnt have role.\r\n    // Actually, in LeavesPage we fetch role from 'users'. Let's do that here for safety.\r\n\r\n    const { data: userData } = await supabase\r\n        .from('users')\r\n        .select('role, organization_id')\r\n        .eq('id', user.id)\r\n        .single() as { data: any, error: any }\r\n\r\n    if (!userData || !['HR_ADMIN', 'SUPER_ADMIN'].includes(userData.role)) {\r\n        return { success: false, error: 'Permission denied. Admins only.' }\r\n    }\r\n\r\n    // 2. Validation\r\n    const rawData = {\r\n        name: formData.get('name'),\r\n        date: formData.get('date'),\r\n        type: formData.get('type'),\r\n        description: formData.get('description'),\r\n    }\r\n\r\n    const validated = holidaySchema.safeParse(rawData)\r\n    if (!validated.success) {\r\n        return { success: false, error: validated.error.issues[0].message }\r\n    }\r\n\r\n    // 3. Insert\r\n    const { error } = await (supabase\r\n        .from('holidays') as any)\r\n        .insert({\r\n            organization_id: userData.organization_id,\r\n            name: validated.data.name,\r\n            date: validated.data.date.toISOString().split('T')[0],\r\n            type: validated.data.type,\r\n            description: validated.data.description || null\r\n        })\r\n\r\n    if (error) {\r\n        console.error('Create holiday error:', error)\r\n        return { success: false, error: 'Failed to create holiday' }\r\n    }\r\n\r\n    revalidatePath('/leaves')\r\n    return { success: true, message: 'Holiday created successfully' }\r\n}\r\n\r\nexport async function updateHolidayAction(holidayId: string, prevState: any, formData: FormData) {\r\n    const supabase = await createClient()\r\n\r\n    // 1. Auth & Perms\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n    if (!user) return { success: false, error: 'Unauthorized' }\r\n\r\n    const { data: userData } = await supabase\r\n        .from('users')\r\n        .select('role')\r\n        .eq('id', user.id)\r\n        .single()\r\n\r\n    if (!userData || !['HR_ADMIN', 'SUPER_ADMIN'].includes(userData.role)) {\r\n        return { success: false, error: 'Permission denied' }\r\n    }\r\n\r\n    // 2. Validation\r\n    const rawData = {\r\n        name: formData.get('name'),\r\n        date: formData.get('date'),\r\n        type: formData.get('type'),\r\n        description: formData.get('description'),\r\n    }\r\n\r\n    const validated = holidaySchema.safeParse(rawData)\r\n    if (!validated.success) {\r\n        return { success: false, error: validated.error.issues[0].message }\r\n    }\r\n\r\n    // 3. Update\r\n    const { error } = await supabase\r\n        .from('holidays')\r\n        .update({\r\n            name: validated.data.name,\r\n            date: validated.data.date.toISOString().split('T')[0],\r\n            type: validated.data.type,\r\n            description: validated.data.description || null\r\n        })\r\n        .eq('id', holidayId)\r\n\r\n    if (error) {\r\n        console.error('Update holiday error:', error)\r\n        return { success: false, error: 'Failed to update holiday' }\r\n    }\r\n\r\n    revalidatePath('/leaves')\r\n    return { success: true, message: 'Holiday updated successfully' }\r\n}\r\n\r\nexport async function deleteHolidayAction(holidayId: string) {\r\n    const supabase = await createClient()\r\n\r\n    // 1. Auth & Perms\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n    if (!user) return { success: false, error: 'Unauthorized' }\r\n\r\n    const { data: userData } = await supabase\r\n        .from('users')\r\n        .select('role')\r\n        .eq('id', user.id)\r\n        .single()\r\n\r\n    if (!userData || !['HR_ADMIN', 'SUPER_ADMIN'].includes(userData.role)) {\r\n        return { success: false, error: 'Permission denied' }\r\n    }\r\n\r\n    // 2. Delete\r\n    const { error } = await supabase\r\n        .from('holidays')\r\n        .delete()\r\n        .eq('id', holidayId)\r\n\r\n    if (error) {\r\n        console.error('Delete holiday error:', error)\r\n        return { success: false, error: 'Failed to delete holiday' }\r\n    }\r\n\r\n    revalidatePath('/leaves')\r\n    return { success: true, message: 'Holiday deleted successfully' }\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n// LEAVE APPROVAL ACTIONS\r\n// ----------------------------------------------------------------------\r\n\r\nexport async function approveLeaveAction(requestId: string, comment?: string) {\r\n    const supabase = await createClient()\r\n\r\n    // 1. Auth & Perms\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n    if (!user) return { success: false, error: 'Unauthorized' }\r\n\r\n    const { data: userData } = await supabase\r\n        .from('users')\r\n        .select('role')\r\n        .eq('id', user.id)\r\n        .single()\r\n\r\n    if (!userData || !['HR_ADMIN', 'SUPER_ADMIN'].includes(userData.role)) {\r\n        return { success: false, error: 'Permission denied' }\r\n    }\r\n\r\n    // 2. Fetch Request Details\r\n    const { data: request, error: fetchError } = await supabase\r\n        .from('leaves')\r\n        .select('*')\r\n        .eq('id', requestId)\r\n        .single()\r\n\r\n    if (fetchError || !request) {\r\n        return { success: false, error: 'Request not found' }\r\n    }\r\n\r\n    if (request.status !== 'PENDING') {\r\n        return { success: false, error: 'Request is not pending' }\r\n    }\r\n\r\n    // 3. Update Status\r\n    // NOTE: Balances table tracks 'used'. We need to update that.\r\n    // Assuming 'pending' in balance is auto-calculated or managed. \r\n    // Actually, based on previous artifacts, balance table has 'used'. \r\n    // We should increment 'used'. \r\n\r\n    // First, update leave status\r\n    const { error: updateError } = await supabase\r\n        .from('leaves')\r\n        .update({\r\n            status: 'APPROVED',\r\n            // approved_by: user.id, // If column exists\r\n            // approval_comment: comment // If column exists\r\n        })\r\n        .eq('id', requestId)\r\n\r\n    if (updateError) {\r\n        console.error('Approve error:', updateError)\r\n        return { success: false, error: 'Failed to approve leave' }\r\n    }\r\n\r\n    // 4. Update Balance (Increment Used)\r\n    if (request.status === 'PENDING') {\r\n        // Fetch current balance\r\n        const { data: balance } = await supabase\r\n            .from('leave_balances')\r\n            .select('*')\r\n            .eq('employee_id', request.employee_id)\r\n            .eq('leave_type_id', request.leave_type_id)\r\n            .eq('year', new Date(request.start_date).getFullYear()) // Assuming year match\r\n            .single()\r\n\r\n        if (balance) {\r\n            const { error: balanceError } = await supabase\r\n                .from('leave_balances')\r\n                .update({\r\n                    used: balance.used + request.days\r\n                })\r\n                .eq('id', balance.id)\r\n\r\n            if (balanceError) console.error('Failed to update balance stats', balanceError)\r\n        }\r\n    }\r\n\r\n    revalidatePath('/leaves')\r\n    return { success: true, message: 'Leave approved successfully' }\r\n}\r\n\r\nexport async function rejectLeaveAction(requestId: string, comment?: string) {\r\n    const supabase = await createClient()\r\n\r\n    // 1. Auth & Perms\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n    if (!user) return { success: false, error: 'Unauthorized' }\r\n\r\n    const { data: userData } = await supabase\r\n        .from('users')\r\n        .select('role')\r\n        .eq('id', user.id)\r\n        .single()\r\n\r\n    if (!userData || !['HR_ADMIN', 'SUPER_ADMIN'].includes(userData.role)) {\r\n        return { success: false, error: 'Permission denied' }\r\n    }\r\n\r\n    // 2. Update Status\r\n    const { error: updateError } = await supabase\r\n        .from('leaves')\r\n        .update({\r\n            status: 'REJECTED'\r\n        })\r\n        .eq('id', requestId)\r\n\r\n    if (updateError) {\r\n        console.error('Reject error:', updateError)\r\n        return { success: false, error: 'Failed to reject leave' }\r\n    }\r\n\r\n    revalidatePath('/leaves')\r\n    return { success: true, message: 'Leave rejected' }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\leaves\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":95,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3214,3217],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3214,3217],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createClient } from '@/lib/supabase/server'\r\nimport { redirect } from 'next/navigation'\r\nimport { LeavesDashboard } from '@/components/leaves/leaves-dashboard'\r\n\r\nexport default async function LeavesPage() {\r\n    const supabase = await createClient()\r\n\r\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\r\n    if (authError || !user) redirect('/login')\r\n\r\n    const { data: userData } = await supabase\r\n        .from('users')\r\n        .select('organization_id, role')\r\n        .eq('id', user.id)\r\n        .single()\r\n\r\n    if (!userData) redirect('/login')\r\n\r\n    // Get current employee record\r\n    const { data: employee } = await supabase\r\n        .from('employees')\r\n        .select('id')\r\n        .eq('user_id', user.id)\r\n        .single()\r\n\r\n    if (!employee) {\r\n        // If user is admin but not an employee (unlikely but possible), handles gracefully?\r\n        // Or maybe redirect to setup? For now let's assume they are an employee or handle edge case.\r\n        return <div>Employee record not found. Please contact support.</div>\r\n    }\r\n\r\n    const year = new Date().getFullYear()\r\n\r\n    // Parallel data fetching\r\n    const [\r\n        { data: balances },\r\n        { data: requests },\r\n        { data: leaveTypes },\r\n        { data: holidays },\r\n        { data: adminRequests }\r\n    ] = (await Promise.all([\r\n        // 1. Fetch Leave Balances\r\n        supabase\r\n            .from('leave_balances')\r\n            .select(`\r\n                *,\r\n                leave_type:leave_types(name, code, is_paid)\r\n            `)\r\n            .eq('employee_id', employee.id)\r\n            .eq('year', year),\r\n\r\n        // 2. Fetch Recent Leave Requests\r\n        supabase\r\n            .from('leaves')\r\n            .select(`\r\n                *,\r\n                leave_type:leave_types(name, code)\r\n            `)\r\n            .eq('employee_id', employee.id)\r\n            .order('created_at', { ascending: false }),\r\n\r\n        // 3. Fetch Active Leave Types (for applying)\r\n        supabase\r\n            .from('leave_types')\r\n            .select('*')\r\n            .eq('organization_id', userData.organization_id)\r\n            .eq('is_active', true),\r\n\r\n        // 4. Fetch Holidays\r\n        supabase\r\n            .from('holidays')\r\n            .select('*')\r\n            .eq('organization_id', userData.organization_id)\r\n            .gte('date', `${year}-01-01`)\r\n            .lte('date', `${year}-12-31`)\r\n            .order('date'),\r\n\r\n        // 5. Fetch Pending Requests (Admin Only)\r\n        ['HR_ADMIN', 'SUPER_ADMIN'].includes(userData.role)\r\n            ? supabase\r\n                .from('leaves')\r\n                .select(`\r\n                    *,\r\n                    leave_type:leave_types(name, code),\r\n                    employee:employees!leaves_employee_id_fkey(\r\n                        first_name, \r\n                        last_name, \r\n                        designation:designation_id(name)\r\n                    )\r\n                `)\r\n                .eq('organization_id', userData.organization_id)\r\n                .eq('status', 'PENDING')\r\n                .order('created_at', { ascending: true })\r\n            : Promise.resolve({ data: [] })\r\n    ])) as any[]\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-2xl font-bold tracking-tight\">Leaves & Holidays</h2>\r\n                <p className=\"text-muted-foreground\">\r\n                    View your leave balance, apply for leaves, and check holidays.\r\n                </p>\r\n            </div>\r\n\r\n            <LeavesDashboard\r\n                balances={balances || []}\r\n                requests={requests || []}\r\n                leaveTypes={leaveTypes || []}\r\n                holidays={holidays || []}\r\n                adminRequests={adminRequests || []}\r\n                employeeId={employee.id}\r\n                role={userData.role}\r\n            />\r\n\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\organization\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\organization\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\payroll\\employees\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\payroll\\employees\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Employee' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":18,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Employee"},"fix":{"range":[178,227],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1227,1230],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1227,1230],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1248,1251],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1248,1251],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":89,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":92,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2073,2076],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2073,2076],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":56,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2312,2315],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2312,2315],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2588,2591],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2588,2591],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":94,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":97,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2609,2612],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2609,2612],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createClient } from '@/lib/supabase/server'\r\nimport { redirect } from 'next/navigation'\r\nimport { EmployeeSalaryList } from '@/components/payroll/employee-salary-list'\r\nimport { Employee } from '@/types/database.types'\r\n\r\nexport default async function EmployeePayrollPage() {\r\n    const supabase = await createClient()\r\n\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n    if (!user) redirect('/login')\r\n\r\n    const { data: userData } = await supabase\r\n        .from('users')\r\n        .select('organization_id, role')\r\n        .eq('id', user.id)\r\n        .single() as { data: { organization_id: string, role: string } | null }\r\n\r\n    if (!userData || !['HR_ADMIN', 'SUPER_ADMIN'].includes(userData.role)) {\r\n        return <div>Access Denied</div>\r\n    }\r\n\r\n    console.log('PAYROLL DEBUG - Fetching for Org ID:', userData.organization_id)\r\n\r\n    // Fetch employees with explicit columns similar to employees/page.tsx\r\n    const { data: employees, error: employeesError } = await supabase\r\n        .from('employees')\r\n        .select('id, employee_id, first_name, last_name, status, organization_id')\r\n        .eq('organization_id', userData.organization_id)\r\n        .eq('status', 'ACTIVE') as { data: any[] | null, error: any }\r\n\r\n    if (employeesError) {\r\n        console.error('PAYROLL ERROR - Employees Fetch:', JSON.stringify(employeesError, null, 2))\r\n    }\r\n\r\n    console.log('PAYROLL DEBUG - Raw Employees Count:', employees?.length || 0)\r\n    if (employees && employees.length > 0) {\r\n        console.log('PAYROLL DEBUG - First Employee Sample:', {\r\n            id: employees[0].id,\r\n            name: `${employees[0].first_name} ${employees[0].last_name}`,\r\n            orgId: employees[0].organization_id\r\n        })\r\n    }\r\n\r\n    // Fetch structures\r\n    const { data: structures, error: structuresError } = await supabase\r\n        .from('salary_structures')\r\n        .select('id, name')\r\n        .eq('organization_id', userData.organization_id)\r\n        .eq('is_active', true) as { data: { id: string, name: string }[] | null, error: any }\r\n\r\n    if (structuresError) {\r\n        console.error('PAYROLL ERROR - Structures Fetch:', JSON.stringify(structuresError, null, 2))\r\n    }\r\n\r\n    // Fetch salary settings separately if employees exist\r\n    let employeesWithSettings: any[] = []\r\n    if (employees && employees.length > 0) {\r\n        const { data: settings, error: settingsError } = await supabase\r\n            .from('employee_salary_settings')\r\n            .select('*')\r\n            .eq('organization_id', userData.organization_id) as { data: any[] | null, error: any }\r\n\r\n        if (settingsError) {\r\n            console.error('PAYROLL ERROR - Settings Fetch:', JSON.stringify(settingsError, null, 2))\r\n        }\r\n\r\n        console.log('PAYROLL DEBUG - Settings Found:', settings?.length || 0)\r\n\r\n        // Merge settings back into employees\r\n        employeesWithSettings = employees.map(emp => ({\r\n            ...emp,\r\n            salary_settings: settings?.filter(s => s.employee_id === emp.id) || []\r\n        }))\r\n    }\r\n\r\n    console.log('PAYROLL DEBUG - Final Employees to List:', employeesWithSettings.length)\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-2xl font-bold tracking-tight\">Employee Salary Details</h2>\r\n                <p className=\"text-muted-foreground\">\r\n                    Assign and manage salary structures for your active employees.\r\n                </p>\r\n            </div>\r\n\r\n            <EmployeeSalaryList\r\n                employees={employeesWithSettings}\r\n                structures={structures || []}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\payroll\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[748,751],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[748,751],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[760,763],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[760,763],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":83,"column":49,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2837,2937],"text":"\r\n                        Manage your organization&apos;s compensation and payouts.\r\n                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2837,2937],"text":"\r\n                        Manage your organization&lsquo;s compensation and payouts.\r\n                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2837,2937],"text":"\r\n                        Manage your organization&#39;s compensation and payouts.\r\n                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2837,2937],"text":"\r\n                        Manage your organization&rsquo;s compensation and payouts.\r\n                    "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":147,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6260,6263],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6260,6263],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createClient } from '@/lib/supabase/server'\r\nimport { redirect } from 'next/navigation'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Users, Banknote, History, CheckCircle2 } from 'lucide-react'\r\nimport Link from 'next/link'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Badge } from '@/components/ui/badge'\r\n\r\nexport default async function PayrollDashboardPage() {\r\n    const supabase = await createClient()\r\n\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n    if (!user) redirect('/login')\r\n\r\n    const { data: userData } = await supabase\r\n        .from('users')\r\n        .select('organization_id, role')\r\n        .eq('id', user.id)\r\n        .single() as { data: any, error: any }\r\n\r\n    if (!userData || !['HR_ADMIN', 'SUPER_ADMIN'].includes(userData.role)) {\r\n        return <div>Access Denied</div>\r\n    }\r\n\r\n    // Fetch stats\r\n    const [\r\n        { count: totalEmployees },\r\n        { count: assignedSalaries },\r\n        { data: recentSalaries }\r\n    ] = await Promise.all([\r\n        supabase\r\n            .from('employees')\r\n            .select('*', { count: 'exact', head: true })\r\n            .eq('organization_id', userData.organization_id)\r\n            .eq('status', 'ACTIVE'),\r\n        supabase\r\n            .from('employee_salary_settings')\r\n            .select('*', { count: 'exact', head: true })\r\n            .eq('organization_id', userData.organization_id),\r\n        supabase\r\n            .from('salaries')\r\n            .select(`\r\n                id,\r\n                month,\r\n                year,\r\n                net_salary,\r\n                status,\r\n                employee:employees(first_name, last_name)\r\n            `)\r\n            .eq('organization_id', userData.organization_id)\r\n            .order('created_at', { ascending: false })\r\n            .limit(5)\r\n    ])\r\n\r\n    const stats = [\r\n        {\r\n            title: 'Active Employees',\r\n            value: totalEmployees || 0,\r\n            icon: Users,\r\n            description: 'Employees eligible for payroll'\r\n        },\r\n        {\r\n            title: 'Salaries Assigned',\r\n            value: assignedSalaries || 0,\r\n            icon: Banknote,\r\n            description: 'Employees with pay structures'\r\n        },\r\n        {\r\n            title: 'Pending Assignment',\r\n            value: (totalEmployees || 0) - (assignedSalaries || 0),\r\n            icon: History,\r\n            description: 'Need salary configuration',\r\n            color: 'text-yellow-600'\r\n        }\r\n    ]\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h2 className=\"text-3xl font-bold tracking-tight\">Payroll Overview</h2>\r\n                    <p className=\"text-muted-foreground\">\r\n                        Manage your organization's compensation and payouts.\r\n                    </p>\r\n                </div>\r\n                <div className=\"flex gap-3\">\r\n                    <Link href=\"/payroll/run\">\r\n                        <Button>Run Payroll</Button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid gap-4 md:grid-cols-3\">\r\n                {stats.map((stat) => {\r\n                    const Icon = stat.icon\r\n                    return (\r\n                        <Card key={stat.title}>\r\n                            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                                <CardTitle className=\"text-sm font-medium\">\r\n                                    {stat.title}\r\n                                </CardTitle>\r\n                                <Icon className={`h-4 w-4 ${stat.color || 'text-muted-foreground'}`} />\r\n                            </CardHeader>\r\n                            <CardContent>\r\n                                <div className=\"text-2xl font-bold\">{stat.value}</div>\r\n                                <p className=\"text-xs text-muted-foreground\">\r\n                                    {stat.description}\r\n                                </p>\r\n                            </CardContent>\r\n                        </Card>\r\n                    )\r\n                })}\r\n            </div>\r\n\r\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-7\">\r\n                <Card className=\"col-span-4\">\r\n                    <CardHeader>\r\n                        <CardTitle>Quick Actions</CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent className=\"grid gap-4 md:grid-cols-2\">\r\n                        <Link href=\"/payroll/employees\" className=\"block\">\r\n                            <Button variant=\"outline\" className=\"w-full justify-start h-16 text-left font-normal\">\r\n                                <div className=\"flex flex-col\">\r\n                                    <span className=\"font-semibold\">Salary Assignments</span>\r\n                                    <span className=\"text-xs text-muted-foreground\">Assign pay structures to employees</span>\r\n                                </div>\r\n                            </Button>\r\n                        </Link>\r\n                        <Link href=\"/payroll/structures\" className=\"block\">\r\n                            <Button variant=\"outline\" className=\"w-full justify-start h-16 text-left font-normal\">\r\n                                <div className=\"flex flex-col\">\r\n                                    <span className=\"font-semibold\">Manage Structures</span>\r\n                                    <span className=\"text-xs text-muted-foreground\">Define earnings and deductions</span>\r\n                                </div>\r\n                            </Button>\r\n                        </Link>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card className=\"col-span-3\">\r\n                    <CardHeader>\r\n                        <CardTitle>Recent Activity</CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"space-y-4\">\r\n                            {recentSalaries && recentSalaries.length > 0 ? (\r\n                                recentSalaries.map((salary: any) => (\r\n                                    <div key={salary.id} className=\"flex items-center gap-4\">\r\n                                        <div className=\"rounded-full bg-green-100 p-2\">\r\n                                            <CheckCircle2 className=\"h-4 w-4 text-green-600\" />\r\n                                        </div>\r\n                                        <div className=\"flex-1 space-y-1\">\r\n                                            <p className=\"text-sm font-medium leading-none\">\r\n                                                Payroll Generated: {new Date(0, salary.month - 1).toLocaleString('default', { month: 'long' })} {salary.year}\r\n                                            </p>\r\n                                            <p className=\"text-xs text-muted-foreground\">\r\n                                                {salary.employee?.first_name} {salary.employee?.last_name} - ${parseFloat(salary.net_salary).toLocaleString()}\r\n                                            </p>\r\n                                        </div>\r\n                                        <Badge variant={salary.status === 'APPROVED' ? 'default' : 'secondary'}>\r\n                                            {salary.status}\r\n                                        </Badge>\r\n                                    </div>\r\n                                ))\r\n                            ) : (\r\n                                <p className=\"text-sm text-muted-foreground text-center py-4\">\r\n                                    No recent payroll activity.\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\payroll\\run\\actions.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'revalidatePath' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":24,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"revalidatePath"},"fix":{"range":[70,113],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1206,1209],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1206,1209],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1296,1299],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1296,1299],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1710,1713],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1710,1713],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1793,1796],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1793,1796],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2125,2128],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2125,2128],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2210,2213],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2210,2213],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":146,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":146,"endColumn":19}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server'\r\n\r\nimport { createClient } from '@/lib/supabase/server'\r\nimport { revalidatePath } from 'next/cache'\r\n\r\nexport async function processPayrollAction(month: number, year: number) {\r\n    const supabase = await createClient()\r\n\r\n    try {\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n        if (!user) return { success: false, error: 'Unauthorized' }\r\n\r\n        const { data: userData } = await supabase\r\n            .from('users')\r\n            .select('organization_id')\r\n            .eq('id', user.id)\r\n            .single()\r\n\r\n        if (!userData) return { success: false, error: 'User data not found' }\r\n\r\n        // 1. Fetch all employees with salary settings\r\n        const { data: settings } = await supabase\r\n            .from('employee_salary_settings')\r\n            .select(`\r\n                employee_id,\r\n                base_salary,\r\n                structure:salary_structures(components)\r\n            `)\r\n            .eq('organization_id', userData.organization_id)\r\n\r\n        if (!settings || settings.length === 0) {\r\n            return { success: false, error: 'No employees have salary settings assigned.' }\r\n        }\r\n\r\n        const salariesToInsert: any[] = []\r\n        const skippedEmployees: string[] = []\r\n\r\n        settings.forEach((s: any) => {\r\n            const structure = s.structure\r\n\r\n            if (!structure) {\r\n                skippedEmployees.push(s.employee_id)\r\n                return\r\n            }\r\n\r\n            const baseSalary = parseFloat(s.base_salary)\r\n            const earningsRaw = structure.components?.earnings || []\r\n            const deductionsRaw = structure.components?.deductions || []\r\n\r\n            const earnings: any = {}\r\n            let totalEarnings = 0\r\n\r\n            earningsRaw.forEach((e: any) => {\r\n                const amount = e.amount_type === 'percentage'\r\n                    ? (baseSalary * (e.value / 100))\r\n                    : e.value\r\n                earnings[e.name] = { amount, type: e.amount_type, value: e.value }\r\n                totalEarnings += amount\r\n            })\r\n\r\n            const deductions: any = {}\r\n            let totalDeductions = 0\r\n            deductionsRaw.forEach((d: any) => {\r\n                const amount = d.amount_type === 'percentage'\r\n                    ? (baseSalary * (d.value / 100))\r\n                    : d.value\r\n                deductions[d.name] = { amount, type: d.amount_type, value: d.value }\r\n                totalDeductions += amount\r\n            })\r\n\r\n            const netSalary = totalEarnings - totalDeductions\r\n\r\n            salariesToInsert.push({\r\n                organization_id: userData.organization_id,\r\n                employee_id: s.employee_id,\r\n                month,\r\n                year,\r\n                basic_salary: baseSalary,\r\n                earnings,\r\n                deductions,\r\n                gross_salary: totalEarnings,\r\n                net_salary: netSalary,\r\n                status: 'DRAFT'\r\n            })\r\n        })\r\n\r\n        if (salariesToInsert.length === 0) {\r\n            return {\r\n                success: false,\r\n                error: 'Values calculation failed. Check if employees have valid salary structures assigned.',\r\n                skippedEmployees\r\n            }\r\n        }\r\n\r\n        // 2. Upsert salaries for the selected month/year\r\n        const { data, error } = await supabase\r\n            .from('salaries')\r\n            .upsert(salariesToInsert, {\r\n                onConflict: 'organization_id, employee_id, month, year'\r\n            })\r\n            .select(`\r\n                *,\r\n                employee:employees(first_name, last_name, employee_id)\r\n            `)\r\n\r\n        if (error) {\r\n            console.error('Database Error:', error)\r\n            return { success: false, error: 'Failed to generate payroll' }\r\n        }\r\n\r\n        return { success: true, data, skippedEmployees }\r\n\r\n    } catch (error) {\r\n        console.error('Server Action Error:', error)\r\n        return { success: false, error: 'Internal Server Error' }\r\n    }\r\n}\r\n\r\nexport async function finalizePayrollAction(month: number, year: number) {\r\n    const supabase = await createClient()\r\n\r\n    try {\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n        if (!user) return { success: false, error: 'Unauthorized' }\r\n\r\n        const { data: userData } = await supabase\r\n            .from('users')\r\n            .select('organization_id')\r\n            .eq('id', user.id)\r\n            .single()\r\n\r\n        const { count, error } = await supabase\r\n            .from('salaries')\r\n            .update({ status: 'APPROVED' }, { count: 'exact' })\r\n            .eq('organization_id', userData.organization_id)\r\n            .eq('month', month)\r\n            .eq('year', year)\r\n            .eq('status', 'DRAFT')\r\n\r\n        if (error) {\r\n            console.error('Database Error:', error)\r\n            return { success: false, error: 'Failed to finalize payroll' }\r\n        }\r\n\r\n        return { success: true, count }\r\n    } catch (error) {\r\n        return { success: false, error: 'Internal Server Error' }\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\payroll\\run\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\payroll\\structures\\[id]\\edit\\edit-form.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[880,883],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[880,883],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1247,1250],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1247,1250],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nD:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\payroll\\structures\\[id]\\edit\\edit-form.tsx:31:76\n  29 |     // Add temp IDs to existing components for UI state management\n  30 |     const [earnings, setEarnings] = useState<SalaryComponent[]>(\n> 31 |         (structure.components.earnings || []).map((c: any) => ({ ...c, id: Math.random().toString(36).substr(2, 9) }))\n     |                                                                            ^^^^^^^^^^^^^ Cannot call impure function\n  32 |     )\n  33 |     const [deductions, setDeductions] = useState<SalaryComponent[]>(\n  34 |         (structure.components.deductions || []).map((c: any) => ({ ...c, id: Math.random().toString(36).substr(2, 9) }))","line":31,"column":76,"nodeType":null,"endLine":31,"endColumn":89},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1446,1449],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1446,1449],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nD:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\payroll\\structures\\[id]\\edit\\edit-form.tsx:34:78\n  32 |     )\n  33 |     const [deductions, setDeductions] = useState<SalaryComponent[]>(\n> 34 |         (structure.components.deductions || []).map((c: any) => ({ ...c, id: Math.random().toString(36).substr(2, 9) }))\n     |                                                                              ^^^^^^^^^^^^^ Cannot call impure function\n  35 |     )\n  36 |\n  37 |     const addComponent = (type: 'earning' | 'deduction') => {","line":34,"column":78,"nodeType":null,"endLine":34,"endColumn":91},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":108,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":111,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2313,2316],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2313,2316],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is defined but never used.","line":68,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is defined but never used.","line":69,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":49}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\r\nimport { Plus, Trash2, Save } from 'lucide-react'\r\nimport { updateSalaryStructureAction } from '../../actions'\r\nimport { useRouter } from 'next/navigation'\r\nimport { toast } from 'sonner'\r\n\r\ninterface SalaryComponent {\r\n    id: string\r\n    name: string\r\n    type: 'earning' | 'deduction'\r\n    amount_type: 'fixed' | 'percentage'\r\n    value: number\r\n    is_taxable: boolean\r\n}\r\n\r\nexport default function EditStructureForm({ structure }: { structure: any }) {\r\n    const router = useRouter()\r\n    const [name, setName] = useState(structure.name)\r\n    const [description, setDescription] = useState(structure.description || '')\r\n\r\n    // Add temp IDs to existing components for UI state management\r\n    const [earnings, setEarnings] = useState<SalaryComponent[]>(\r\n        (structure.components.earnings || []).map((c: any) => ({ ...c, id: Math.random().toString(36).substr(2, 9) }))\r\n    )\r\n    const [deductions, setDeductions] = useState<SalaryComponent[]>(\r\n        (structure.components.deductions || []).map((c: any) => ({ ...c, id: Math.random().toString(36).substr(2, 9) }))\r\n    )\r\n\r\n    const addComponent = (type: 'earning' | 'deduction') => {\r\n        const newComponent: SalaryComponent = {\r\n            id: Math.random().toString(36).substr(2, 9),\r\n            name: '',\r\n            type,\r\n            amount_type: 'fixed',\r\n            value: 0,\r\n            is_taxable: true\r\n        }\r\n        if (type === 'earning') setEarnings([...earnings, newComponent])\r\n        else setDeductions([...deductions, newComponent])\r\n    }\r\n\r\n    const removeComponent = (type: 'earning' | 'deduction', id: string) => {\r\n        if (type === 'earning') setEarnings(earnings.filter(c => c.id !== id))\r\n        else setDeductions(deductions.filter(c => c.id !== id))\r\n    }\r\n\r\n    const updateComponent = (type: 'earning' | 'deduction', id: string, field: keyof SalaryComponent, val: any) => {\r\n        const updater = (prev: SalaryComponent[]) => prev.map(c => c.id === id ? { ...c, [field]: val } : c)\r\n        if (type === 'earning') setEarnings(updater(earnings))\r\n        else setDeductions(updater(deductions))\r\n    }\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n\r\n        const payload = {\r\n            name,\r\n            description,\r\n            components: {\r\n                earnings: earnings.map(({ id, ...rest }) => rest),\r\n                deductions: deductions.map(({ id, ...rest }) => rest)\r\n            }\r\n        }\r\n\r\n        const formData = new FormData()\r\n        formData.append('data', JSON.stringify(payload))\r\n\r\n        const result = await updateSalaryStructureAction(structure.id, null, formData)\r\n\r\n        if (result.success) {\r\n            toast.success('Salary structure updated')\r\n            router.push('/payroll/structures')\r\n        } else {\r\n            toast.error(result.error || 'Failed to update')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-2xl font-bold tracking-tight\">Edit Salary Structure</h2>\r\n                <p className=\"text-muted-foreground\">Modify the salary template components.</p>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>Basic Details</CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"name\">Structure Name</Label>\r\n                            <Input\r\n                                id=\"name\"\r\n                                value={name}\r\n                                onChange={e => setName(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"desc\">Description</Label>\r\n                            <Textarea\r\n                                id=\"desc\"\r\n                                value={description}\r\n                                onChange={e => setDescription(e.target.value)}\r\n                            />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <div className=\"grid gap-6 md:grid-cols-2\">\r\n                    <Card>\r\n                        <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n                            <CardTitle className=\"text-base\">Earnings</CardTitle>\r\n                            <Button type=\"button\" size=\"sm\" variant=\"outline\" onClick={() => addComponent('earning')}>\r\n                                <Plus className=\"h-4 w-4 mr-2\" /> Add\r\n                            </Button>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-4\">\r\n                            {earnings.map((c) => (\r\n                                <div key={c.id} className=\"rounded-lg border p-3 space-y-3 bg-muted/30\">\r\n                                    <div className=\"flex justify-between items-start gap-2\">\r\n                                        <div className=\"flex-1 space-y-2\">\r\n                                            <Input\r\n                                                placeholder=\"Name\"\r\n                                                value={c.name}\r\n                                                onChange={e => updateComponent('earning', c.id, 'name', e.target.value)}\r\n                                                className=\"h-8\"\r\n                                                required\r\n                                            />\r\n                                            <div className=\"flex gap-2\">\r\n                                                <Select\r\n                                                    value={c.amount_type}\r\n                                                    onValueChange={v => updateComponent('earning', c.id, 'amount_type', v)}\r\n                                                >\r\n                                                    <SelectTrigger className=\"h-8 w-[110px]\">\r\n                                                        <SelectValue />\r\n                                                    </SelectTrigger>\r\n                                                    <SelectContent>\r\n                                                        <SelectItem value=\"percentage\">% of Base</SelectItem>\r\n                                                        <SelectItem value=\"fixed\">Fixed</SelectItem>\r\n                                                    </SelectContent>\r\n                                                </Select>\r\n                                                <Input\r\n                                                    type=\"number\"\r\n                                                    value={c.value}\r\n                                                    onChange={e => updateComponent('earning', c.id, 'value', parseFloat(e.target.value))}\r\n                                                    className=\"h-8 flex-1\"\r\n                                                    required\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                        <Button\r\n                                            type=\"button\"\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 text-destructive\"\r\n                                            onClick={() => removeComponent('earning', c.id)}\r\n                                        >\r\n                                            <Trash2 className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                        <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n                            <CardTitle className=\"text-base\">Deductions</CardTitle>\r\n                            <Button type=\"button\" size=\"sm\" variant=\"outline\" onClick={() => addComponent('deduction')}>\r\n                                <Plus className=\"h-4 w-4 mr-2\" /> Add\r\n                            </Button>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-4\">\r\n                            {deductions.map((c) => (\r\n                                <div key={c.id} className=\"rounded-lg border p-3 space-y-3 bg-muted/30\">\r\n                                    <div className=\"flex justify-between items-start gap-2\">\r\n                                        <div className=\"flex-1 space-y-2\">\r\n                                            <Input\r\n                                                placeholder=\"Name\"\r\n                                                value={c.name}\r\n                                                onChange={e => updateComponent('deduction', c.id, 'name', e.target.value)}\r\n                                                className=\"h-8\"\r\n                                                required\r\n                                            />\r\n                                            <div className=\"flex gap-2\">\r\n                                                <Select\r\n                                                    value={c.amount_type}\r\n                                                    onValueChange={v => updateComponent('deduction', c.id, 'amount_type', v)}\r\n                                                >\r\n                                                    <SelectTrigger className=\"h-8 w-[110px]\">\r\n                                                        <SelectValue />\r\n                                                    </SelectTrigger>\r\n                                                    <SelectContent>\r\n                                                        <SelectItem value=\"percentage\">% of Base</SelectItem>\r\n                                                        <SelectItem value=\"fixed\">Fixed</SelectItem>\r\n                                                    </SelectContent>\r\n                                                </Select>\r\n                                                <Input\r\n                                                    type=\"number\"\r\n                                                    value={c.value}\r\n                                                    onChange={e => updateComponent('deduction', c.id, 'value', parseFloat(e.target.value))}\r\n                                                    className=\"h-8 flex-1\"\r\n                                                    required\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                        <Button\r\n                                            type=\"button\"\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 text-destructive\"\r\n                                            onClick={() => removeComponent('deduction', c.id)}\r\n                                        >\r\n                                            <Trash2 className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n\r\n                <div className=\"flex justify-end gap-2\">\r\n                    <Button type=\"button\" variant=\"outline\" onClick={() => router.back()}>Cancel</Button>\r\n                    <Button type=\"submit\">\r\n                        <Save className=\"mr-2 h-4 w-4\" />\r\n                        Update Structure\r\n                    </Button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\payroll\\structures\\[id]\\edit\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\payroll\\structures\\actions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[769,772],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[769,772],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2636,2639],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2636,2639],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server'\r\n\r\nimport { createClient } from '@/lib/supabase/server'\r\nimport { revalidatePath } from 'next/cache'\r\nimport { z } from 'zod'\r\n\r\nconst componentSchema = z.object({\r\n    name: z.string().min(1, 'Name is required'),\r\n    type: z.enum(['earning', 'deduction']),\r\n    amount_type: z.enum(['fixed', 'percentage']),\r\n    value: z.number().min(0, 'Value must be positive'),\r\n    is_taxable: z.boolean().default(true)\r\n})\r\n\r\nconst structureSchema = z.object({\r\n    name: z.string().min(2, 'Name must be at least 2 characters'),\r\n    description: z.string().optional(),\r\n    components: z.object({\r\n        earnings: z.array(componentSchema),\r\n        deductions: z.array(componentSchema)\r\n    })\r\n})\r\n\r\nexport async function createSalaryStructureAction(prevState: any, formData: FormData) {\r\n    const supabase = await createClient()\r\n\r\n    try {\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n        if (!user) return { success: false, error: 'Unauthorized' }\r\n\r\n        const { data: userData } = await supabase\r\n            .from('users')\r\n            .select('organization_id')\r\n            .eq('id', user.id)\r\n            .single()\r\n\r\n        if (!userData) return { success: false, error: 'User data not found' }\r\n\r\n        // Parse JSON components from hidden input or construct from form data\r\n        // For complex nested forms, it's often easier to parse a JSON string sent from client\r\n        const rawJson = formData.get('data') as string\r\n        const rawData = JSON.parse(rawJson)\r\n\r\n        const validated = structureSchema.safeParse(rawData)\r\n\r\n        if (!validated.success) {\r\n            return {\r\n                success: false,\r\n                error: validated.error.errors[0]?.message || 'Invalid data'\r\n            }\r\n        }\r\n\r\n        const { error } = await supabase\r\n            .from('salary_structures')\r\n            .insert({\r\n                organization_id: userData.organization_id,\r\n                name: validated.data.name,\r\n                description: validated.data.description,\r\n                components: validated.data.components,\r\n                is_active: true\r\n            })\r\n\r\n        if (error) {\r\n            console.error('Database Error:', error)\r\n            return { success: false, error: 'Failed to create structure' }\r\n        }\r\n\r\n        revalidatePath('/payroll/structures')\r\n        return { success: true }\r\n\r\n    } catch (error) {\r\n        console.error('Server Action Error:', error)\r\n        return { success: false, error: 'Internal Server Error' }\r\n    }\r\n}\r\n\r\nexport async function updateSalaryStructureAction(id: string, prevState: any, formData: FormData) {\r\n    const supabase = await createClient()\r\n\r\n    try {\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n        if (!user) return { success: false, error: 'Unauthorized' }\r\n\r\n        const { data: userData } = await supabase\r\n            .from('users')\r\n            .select('organization_id')\r\n            .eq('id', user.id)\r\n            .single()\r\n\r\n        if (!userData) return { success: false, error: 'User data not found' }\r\n\r\n        const rawJson = formData.get('data') as string\r\n        const rawData = JSON.parse(rawJson)\r\n\r\n        const validated = structureSchema.safeParse(rawData)\r\n\r\n        if (!validated.success) {\r\n            return {\r\n                success: false,\r\n                error: validated.error.errors[0]?.message || 'Invalid data'\r\n            }\r\n        }\r\n\r\n        const { error } = await supabase\r\n            .from('salary_structures')\r\n            .update({\r\n                name: validated.data.name,\r\n                description: validated.data.description,\r\n                components: validated.data.components,\r\n            })\r\n            .eq('id', id)\r\n            .eq('organization_id', userData.organization_id)\r\n\r\n        if (error) {\r\n            console.error('Database Error:', error)\r\n            return { success: false, error: 'Failed to update structure' }\r\n        }\r\n\r\n        revalidatePath('/payroll/structures')\r\n        return { success: true }\r\n\r\n    } catch (error) {\r\n        console.error('Server Action Error:', error)\r\n        return { success: false, error: 'Internal Server Error' }\r\n    }\r\n}\r\n\r\nexport async function deleteSalaryStructureAction(id: string) {\r\n    const supabase = await createClient()\r\n\r\n    try {\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n        if (!user) return { success: false, error: 'Unauthorized' }\r\n\r\n        const { data: userData } = await supabase\r\n            .from('users')\r\n            .select('organization_id, role')\r\n            .eq('id', user.id)\r\n            .single()\r\n\r\n        if (!userData || !['HR_ADMIN', 'SUPER_ADMIN'].includes(userData.role)) {\r\n            return { success: false, error: 'Permission denied' }\r\n        }\r\n\r\n        // Check if structure is in use\r\n        const { count } = await supabase\r\n            .from('employee_salary_settings')\r\n            .select('*', { count: 'exact', head: true })\r\n            .eq('salary_structure_id', id)\r\n\r\n        if (count && count > 0) {\r\n            return { success: false, error: 'Cannot delete structure as it is assigned to employees' }\r\n        }\r\n\r\n        const { error } = await supabase\r\n            .from('salary_structures')\r\n            .delete()\r\n            .eq('id', id)\r\n            .eq('organization_id', userData.organization_id)\r\n\r\n        if (error) {\r\n            console.error('Database Error:', error)\r\n            return { success: false, error: 'Failed to delete structure' }\r\n        }\r\n\r\n        revalidatePath('/payroll/structures')\r\n        return { success: true }\r\n\r\n    } catch (error) {\r\n        console.error('Server Action Error:', error)\r\n        return { success: false, error: 'Internal Server Error' }\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\payroll\\structures\\new\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useActionState' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":24,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useActionState"},"fix":{"range":[25,40],"text":""},"desc":"Remove unused variable \"useActionState\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used.","line":4,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":67,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardDescription"},"fix":{"range":[115,132],"text":""},"desc":"Remove unused variable \"CardDescription\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":98,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":101,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2273,2276],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2273,2276],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is defined but never used.","line":70,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is defined but never used.","line":71,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":71,"endColumn":49}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useActionState, useState } from 'react'\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\r\nimport { Plus, Trash2, Save } from 'lucide-react'\r\nimport { createSalaryStructureAction } from '../actions'\r\nimport { useRouter } from 'next/navigation'\r\nimport { toast } from 'sonner'\r\n\r\ntype ComponentType = 'earning' | 'deduction'\r\ntype AmountType = 'fixed' | 'percentage'\r\n\r\ninterface SalaryComponent {\r\n    id: string\r\n    name: string\r\n    type: ComponentType\r\n    amount_type: AmountType\r\n    value: number\r\n    is_taxable: boolean\r\n}\r\n\r\nconst DEFAULT_EARNINGS: SalaryComponent[] = [\r\n    { id: '1', name: 'Basic Salary', type: 'earning', amount_type: 'percentage', value: 40, is_taxable: true },\r\n    { id: '2', name: 'HRA', type: 'earning', amount_type: 'percentage', value: 20, is_taxable: true },\r\n]\r\n\r\nexport default function NewStructurePage() {\r\n    const router = useRouter()\r\n    const [name, setName] = useState('')\r\n    const [description, setDescription] = useState('')\r\n    const [earnings, setEarnings] = useState<SalaryComponent[]>(DEFAULT_EARNINGS)\r\n    const [deductions, setDeductions] = useState<SalaryComponent[]>([])\r\n\r\n    const addComponent = (type: ComponentType) => {\r\n        const newComponent: SalaryComponent = {\r\n            id: Math.random().toString(36).substr(2, 9),\r\n            name: '',\r\n            type,\r\n            amount_type: 'fixed',\r\n            value: 0,\r\n            is_taxable: true\r\n        }\r\n        if (type === 'earning') setEarnings([...earnings, newComponent])\r\n        else setDeductions([...deductions, newComponent])\r\n    }\r\n\r\n    const removeComponent = (type: ComponentType, id: string) => {\r\n        if (type === 'earning') setEarnings(earnings.filter(c => c.id !== id))\r\n        else setDeductions(deductions.filter(c => c.id !== id))\r\n    }\r\n\r\n    const updateComponent = (type: ComponentType, id: string, field: keyof SalaryComponent, val: any) => {\r\n        const updater = (prev: SalaryComponent[]) => prev.map(c => c.id === id ? { ...c, [field]: val } : c)\r\n        if (type === 'earning') setEarnings(updater(earnings))\r\n        else setDeductions(updater(deductions))\r\n    }\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n\r\n        const payload = {\r\n            name,\r\n            description,\r\n            components: {\r\n                earnings: earnings.map(({ id, ...rest }) => rest), // Remove temp ID\r\n                deductions: deductions.map(({ id, ...rest }) => rest)\r\n            }\r\n        }\r\n\r\n        const formData = new FormData()\r\n        formData.append('data', JSON.stringify(payload))\r\n\r\n        const result = await createSalaryStructureAction(null, formData)\r\n\r\n        if (result.success) {\r\n            toast.success('Salary structure created')\r\n            router.push('/payroll/structures')\r\n        } else {\r\n            toast.error(result.error || 'Failed to create')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-2xl font-bold tracking-tight\">Create Salary Structure</h2>\r\n                <p className=\"text-muted-foreground\">Define a new salary template.</p>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>Basic Details</CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"name\">Structure Name</Label>\r\n                            <Input\r\n                                id=\"name\"\r\n                                placeholder=\"e.g. Standard Full-Time\"\r\n                                value={name}\r\n                                onChange={e => setName(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"desc\">Description</Label>\r\n                            <Textarea\r\n                                id=\"desc\"\r\n                                placeholder=\"Brief description...\"\r\n                                value={description}\r\n                                onChange={e => setDescription(e.target.value)}\r\n                            />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <div className=\"grid gap-6 md:grid-cols-2\">\r\n                    {/* Earnings */}\r\n                    <Card>\r\n                        <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n                            <CardTitle className=\"text-base\">Earnings</CardTitle>\r\n                            <Button type=\"button\" size=\"sm\" variant=\"outline\" onClick={() => addComponent('earning')}>\r\n                                <Plus className=\"h-4 w-4 mr-2\" /> Add\r\n                            </Button>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-4\">\r\n                            {earnings.map((c) => (\r\n                                <div key={c.id} className=\"rounded-lg border p-3 space-y-3 bg-muted/30\">\r\n                                    <div className=\"flex justify-between items-start gap-2\">\r\n                                        <div className=\"flex-1 space-y-2\">\r\n                                            <Input\r\n                                                placeholder=\"Name (e.g. Basic)\"\r\n                                                value={c.name}\r\n                                                onChange={e => updateComponent('earning', c.id, 'name', e.target.value)}\r\n                                                className=\"h-8\"\r\n                                                required\r\n                                            />\r\n                                            <div className=\"flex gap-2\">\r\n                                                <Select\r\n                                                    value={c.amount_type}\r\n                                                    onValueChange={v => updateComponent('earning', c.id, 'amount_type', v)}\r\n                                                >\r\n                                                    <SelectTrigger className=\"h-8 w-[110px]\">\r\n                                                        <SelectValue />\r\n                                                    </SelectTrigger>\r\n                                                    <SelectContent>\r\n                                                        <SelectItem value=\"percentage\">% of Base</SelectItem>\r\n                                                        <SelectItem value=\"fixed\">Fixed</SelectItem>\r\n                                                    </SelectContent>\r\n                                                </Select>\r\n                                                <Input\r\n                                                    type=\"number\"\r\n                                                    placeholder=\"Val\"\r\n                                                    value={c.value}\r\n                                                    onChange={e => updateComponent('earning', c.id, 'value', parseFloat(e.target.value))}\r\n                                                    className=\"h-8 flex-1\"\r\n                                                    min={0}\r\n                                                    required\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                        <Button\r\n                                            type=\"button\"\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 text-destructive\"\r\n                                            onClick={() => removeComponent('earning', c.id)}\r\n                                        >\r\n                                            <Trash2 className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                            {earnings.length === 0 && <p className=\"text-sm text-muted-foreground text-center py-4\">No earnings defined</p>}\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Deductions */}\r\n                    <Card>\r\n                        <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n                            <CardTitle className=\"text-base\">Deductions</CardTitle>\r\n                            <Button type=\"button\" size=\"sm\" variant=\"outline\" onClick={() => addComponent('deduction')}>\r\n                                <Plus className=\"h-4 w-4 mr-2\" /> Add\r\n                            </Button>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-4\">\r\n                            {deductions.map((c) => (\r\n                                <div key={c.id} className=\"rounded-lg border p-3 space-y-3 bg-muted/30\">\r\n                                    <div className=\"flex justify-between items-start gap-2\">\r\n                                        <div className=\"flex-1 space-y-2\">\r\n                                            <Input\r\n                                                placeholder=\"Name (e.g. Tax)\"\r\n                                                value={c.name}\r\n                                                onChange={e => updateComponent('deduction', c.id, 'name', e.target.value)}\r\n                                                className=\"h-8\"\r\n                                                required\r\n                                            />\r\n                                            <div className=\"flex gap-2\">\r\n                                                <Select\r\n                                                    value={c.amount_type}\r\n                                                    onValueChange={v => updateComponent('deduction', c.id, 'amount_type', v)}\r\n                                                >\r\n                                                    <SelectTrigger className=\"h-8 w-[110px]\">\r\n                                                        <SelectValue />\r\n                                                    </SelectTrigger>\r\n                                                    <SelectContent>\r\n                                                        <SelectItem value=\"percentage\">% of Base</SelectItem>\r\n                                                        <SelectItem value=\"fixed\">Fixed</SelectItem>\r\n                                                    </SelectContent>\r\n                                                </Select>\r\n                                                <Input\r\n                                                    type=\"number\"\r\n                                                    placeholder=\"Val\"\r\n                                                    value={c.value}\r\n                                                    onChange={e => updateComponent('deduction', c.id, 'value', parseFloat(e.target.value))}\r\n                                                    className=\"h-8 flex-1\"\r\n                                                    min={0}\r\n                                                    required\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                        <Button\r\n                                            type=\"button\"\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 text-destructive\"\r\n                                            onClick={() => removeComponent('deduction', c.id)}\r\n                                        >\r\n                                            <Trash2 className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                            {deductions.length === 0 && <p className=\"text-sm text-muted-foreground text-center py-4\">No deductions defined</p>}\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n\r\n                <div className=\"flex justify-end gap-2\">\r\n                    <Button type=\"button\" variant=\"outline\" onClick={() => router.back()}>Cancel</Button>\r\n                    <Button type=\"submit\">\r\n                        <Save className=\"mr-2 h-4 w-4\" />\r\n                        Save Structure\r\n                    </Button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\payroll\\structures\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\profile\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\profile\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'redirect' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":18,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"redirect"},"fix":{"range":[135,177],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":14,"column":105,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[586,721],"text":"\r\n                        Could not find user data. This usually happens if the account setup trigger didn&apos;t run.\r\n                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[586,721],"text":"\r\n                        Could not find user data. This usually happens if the account setup trigger didn&lsquo;t run.\r\n                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[586,721],"text":"\r\n                        Could not find user data. This usually happens if the account setup trigger didn&#39;t run.\r\n                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[586,721],"text":"\r\n                        Could not find user data. This usually happens if the account setup trigger didn&rsquo;t run.\r\n                    "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getProfileAction } from '@/app/(dashboard)/profile/actions'\r\nimport { ProfileForm } from '@/components/profile/profile-form'\r\nimport { redirect } from 'next/navigation'\r\n\r\nexport default async function ProfilePage() {\r\n    const employee = await getProfileAction()\r\n\r\n    if (!employee) {\r\n        return (\r\n            <div className=\"p-6\">\r\n                <div className=\"rounded-lg border border-destructive/50 bg-destructive/10 p-4 text-destructive\">\r\n                    <h3 className=\"mb-2 font-medium\">Profile Not Found</h3>\r\n                    <p className=\"text-sm\">\r\n                        Could not find user data. This usually happens if the account setup trigger didn't run.\r\n                    </p>\r\n                    <div className=\"mt-4 text-sm text-muted-foreground\">\r\n                        <p className=\"font-medium text-foreground\">Troubleshooting steps:</p>\r\n                        <ol className=\"list-decimal pl-5 mt-2 space-y-1\">\r\n                            <li>Ensure you have run <code className=\"bg-muted px-1 rounded\">database/migrations/setup_auth_trigger.sql</code> in your Supabase SQL Editor.</li>\r\n                            <li>Try signing up with a <strong>new account</strong> after running the migration.</li>\r\n                        </ol>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h3 className=\"text-lg font-medium\">My Profile</h3>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                    Manage your personal information and view your employment details.\r\n                </p>\r\n            </div>\r\n            <div className=\"p-6 border rounded-lg bg-card bg-white shadow-sm\">\r\n                <ProfileForm initialData={employee} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\settings\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\settings\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\(dashboard)\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\auth\\callback\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\attendance\\attendance-action-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'toast' is defined but never used.","line":15,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":15,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"toast"},"fix":{"range":[390,420],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`getLocation` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nD:\\NextJSProjects\\hrm-saas\\src\\components\\attendance\\attendance-action-dialog.tsx:51:13\n  49 |             setLocation(undefined)\n  50 |             setLocationError('')\n> 51 |             getLocation()\n     |             ^^^^^^^^^^^ `getLocation` accessed before it is declared\n  52 |         }\n  53 |     }, [isOpen])\n  54 |\n\nD:\\NextJSProjects\\hrm-saas\\src\\components\\attendance\\attendance-action-dialog.tsx:55:5\n  53 |     }, [isOpen])\n  54 |\n> 55 |     const getLocation = () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 56 |         if (!navigator.geolocation) {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 57 |             setLocationError('Geolocation is not supported by your browser')\n     …\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 92 |         )\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 93 |     }\n     | ^^^^^^ `getLocation` is declared here\n  94 |\n  95 |     const handleSubmit = () => {\n  96 |         onConfirm(notes, location)","line":51,"column":13,"nodeType":null,"endLine":51,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogFooter,\r\n} from '@/components/ui/dialog'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { Label } from '@/components/ui/label'\r\nimport { MapPin, Loader2 } from 'lucide-react'\r\nimport { toast } from 'sonner'\r\n\r\ninterface LocationData {\r\n    latitude: number\r\n    longitude: number\r\n    accuracy?: number\r\n}\r\n\r\ninterface AttendanceActionDialogProps {\r\n    isOpen: boolean\r\n    onOpenChange: (open: boolean) => void\r\n    title: string\r\n    onConfirm: (notes: string, location: LocationData | undefined) => Promise<void>\r\n    isPending: boolean\r\n    actionType: 'in' | 'out'\r\n}\r\n\r\nexport function AttendanceActionDialog({\r\n    isOpen,\r\n    onOpenChange,\r\n    title,\r\n    onConfirm,\r\n    isPending,\r\n    actionType\r\n}: AttendanceActionDialogProps) {\r\n    const [notes, setNotes] = useState('')\r\n    const [location, setLocation] = useState<LocationData | undefined>(undefined)\r\n    const [locationError, setLocationError] = useState('')\r\n    const [loadingLocation, setLoadingLocation] = useState(false)\r\n\r\n    // Reset state when dialog opens\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            setNotes('')\r\n            setLocation(undefined)\r\n            setLocationError('')\r\n            getLocation()\r\n        }\r\n    }, [isOpen])\r\n\r\n    const getLocation = () => {\r\n        if (!navigator.geolocation) {\r\n            setLocationError('Geolocation is not supported by your browser')\r\n            return\r\n        }\r\n\r\n        setLocation(undefined)\r\n        setLoadingLocation(true)\r\n        setLocationError('')\r\n\r\n        navigator.geolocation.getCurrentPosition(\r\n            (position) => {\r\n                setLocation({\r\n                    latitude: position.coords.latitude,\r\n                    longitude: position.coords.longitude,\r\n                    accuracy: position.coords.accuracy\r\n                })\r\n                setLoadingLocation(false)\r\n            },\r\n            (error) => {\r\n                console.error('Location error:', error)\r\n                let errorMessage = 'Unable to retrieve your location'\r\n                if (error.code === error.PERMISSION_DENIED) {\r\n                    errorMessage = 'Location permission denied'\r\n                } else if (error.code === error.POSITION_UNAVAILABLE) {\r\n                    errorMessage = 'Location information is unavailable'\r\n                } else if (error.code === error.TIMEOUT) {\r\n                    errorMessage = 'The request to get user location timed out'\r\n                }\r\n                setLocationError(errorMessage)\r\n                setLoadingLocation(false)\r\n            },\r\n            {\r\n                enableHighAccuracy: true,\r\n                timeout: 10000,\r\n                maximumAge: 0\r\n            }\r\n        )\r\n    }\r\n\r\n    const handleSubmit = () => {\r\n        onConfirm(notes, location)\r\n    }\r\n\r\n    return (\r\n        <Dialog open={isOpen} onOpenChange={onOpenChange}>\r\n            <DialogContent>\r\n                <DialogHeader>\r\n                    <DialogTitle>{title}</DialogTitle>\r\n                </DialogHeader>\r\n\r\n                <div className=\"space-y-4 py-4\">\r\n                    <div className=\"space-y-2\">\r\n                        <Label>Location</Label>\r\n                        <div className=\"flex items-center space-x-2 text-sm\">\r\n                            {loadingLocation ? (\r\n                                <>\r\n                                    <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                                    <span className=\"text-muted-foreground\">Fetching location...</span>\r\n                                </>\r\n                            ) : location ? (\r\n                                <div className=\"text-green-600 flex items-center gap-2\">\r\n                                    <MapPin className=\"h-4 w-4\" />\r\n                                    <span>\r\n                                        Captured: {location.latitude.toFixed(6)}, {location.longitude.toFixed(6)}\r\n                                    </span>\r\n                                    <Button\r\n                                        variant=\"link\"\r\n                                        size=\"sm\"\r\n                                        onClick={getLocation}\r\n                                        className=\"h-auto p-0 ml-2 text-muted-foreground hover:text-primary\"\r\n                                    >\r\n                                        Refresh\r\n                                    </Button>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"text-destructive flex items-center gap-2\">\r\n                                    <MapPin className=\"h-4 w-4\" />\r\n                                    <span>{locationError || 'Location not captured'}</span>\r\n                                    <Button variant=\"link\" size=\"sm\" onClick={getLocation} className=\"h-auto p-0\">Retry</Button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"notes\">Notes (Optional)</Label>\r\n                        <Textarea\r\n                            id=\"notes\"\r\n                            placeholder={actionType === 'in' ? \"Late arrival due to traffic...\" : \"Leaving early for appointment...\"}\r\n                            value={notes}\r\n                            onChange={(e) => setNotes(e.target.value)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <DialogFooter>\r\n                    <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isPending}>\r\n                        Cancel\r\n                    </Button>\r\n                    <Button\r\n                        onClick={handleSubmit}\r\n                        disabled={isPending}\r\n                        className={actionType === 'in' ? \"bg-green-600 hover:bg-green-700\" : \"bg-red-600 hover:bg-red-700\"}\r\n                    >\r\n                        {isPending ? (\r\n                            <>\r\n                                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                                Confirming...\r\n                            </>\r\n                        ) : (\r\n                            'Confirm'\r\n                        )}\r\n                    </Button>\r\n                </DialogFooter>\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\attendance\\attendance-dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[215,221],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[728,731],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[728,731],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[751,754],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[751,754],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\NextJSProjects\\hrm-saas\\src\\components\\attendance\\attendance-dashboard.tsx:41:9\n  39 |\n  40 |     useEffect(() => {\n> 41 |         setCurrentTime(new Date())\n     |         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  42 |         const timer = setInterval(() => setCurrentTime(new Date()), 1000)\n  43 |         return () => clearInterval(timer)\n  44 |     }, [])","line":41,"column":9,"nodeType":null,"endLine":41,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1458,1461],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1458,1461],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":56,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2030,2033],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2030,2033],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":72,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":72,"endColumn":27}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useEffect, useTransition } from 'react'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Clock, LogIn, LogOut, MapPin } from 'lucide-react'\r\nimport { format } from 'date-fns'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from \"@/components/ui/table\"\r\nimport { checkInAction, checkOutAction } from '@/app/(dashboard)/attendance/actions'\r\nimport { toast } from 'sonner'\r\n\r\nimport { AttendanceActionDialog } from './attendance-action-dialog'\r\n\r\ninterface AttendanceDashboardProps {\r\n    todayLogs: any[]\r\n    recentLogs: any[]\r\n    employeeId: string\r\n}\r\n\r\nexport function AttendanceDashboard({\r\n    todayLogs,\r\n    recentLogs,\r\n    employeeId\r\n}: AttendanceDashboardProps) {\r\n    const [currentTime, setCurrentTime] = useState<Date | null>(null)\r\n    const [isPending, startTransition] = useTransition()\r\n\r\n    // Dialog states\r\n    const [showCheckInDialog, setShowCheckInDialog] = useState(false)\r\n    const [showCheckOutDialog, setShowCheckOutDialog] = useState(false)\r\n\r\n    useEffect(() => {\r\n        setCurrentTime(new Date())\r\n        const timer = setInterval(() => setCurrentTime(new Date()), 1000)\r\n        return () => clearInterval(timer)\r\n    }, [])\r\n\r\n    const onConfirmCheckIn = async (notes: string, location: any) => {\r\n        startTransition(async () => {\r\n            try {\r\n                const result = await checkInAction(employeeId, notes, location)\r\n                if (result.success) {\r\n                    toast.success('Checked in successfully')\r\n                    setShowCheckInDialog(false)\r\n                } else {\r\n                    toast.error(result.error)\r\n                }\r\n            } catch (error) {\r\n                toast.error('Failed to check in')\r\n            }\r\n        })\r\n    }\r\n\r\n    const onConfirmCheckOut = async (notes: string, location: any) => {\r\n        startTransition(async () => {\r\n            try {\r\n                const result = await checkOutAction(employeeId, notes, location)\r\n                if (result.success) {\r\n                    toast.success('Checked out successfully')\r\n                    setShowCheckOutDialog(false)\r\n                } else {\r\n                    toast.error(result.error)\r\n                }\r\n            } catch (error) {\r\n                toast.error('Failed to check out')\r\n            }\r\n        })\r\n    }\r\n\r\n    // New logic for multiple check-ins\r\n    const lastLog = todayLogs.length > 0 ? todayLogs[todayLogs.length - 1] : null\r\n    const isCheckedIn = lastLog && !lastLog.check_out\r\n\r\n    const canCheckIn = !isCheckedIn\r\n    const canCheckOut = isCheckedIn\r\n\r\n    // Calculate total working hours\r\n    const totalWorkingHours = todayLogs.reduce((acc, log) => {\r\n        return acc + (Number(log.working_hours) || 0)\r\n    }, 0).toFixed(2)\r\n\r\n    return (\r\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-7\">\r\n            {/* Action Card */}\r\n            <Card className=\"lg:col-span-3\">\r\n                <CardHeader>\r\n                    <CardTitle>Daily Attendance</CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"flex flex-col items-center justify-center space-y-6 py-6\">\r\n                    <div className=\"text-4xl font-mono font-bold\">\r\n                        {currentTime ? format(currentTime, 'HH:mm:ss') : '--:--:--'}\r\n                    </div>\r\n                    <div className=\"text-muted-foreground\">\r\n                        {currentTime ? format(currentTime, 'EEEE, MMMM d, yyyy') : 'Loading...'}\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-4 w-full justify-center\">\r\n                        <Button\r\n                            size=\"lg\"\r\n                            className=\"w-32 bg-green-600 hover:bg-green-700\"\r\n                            disabled={isPending || !canCheckIn}\r\n                            onClick={() => setShowCheckInDialog(true)}\r\n                        >\r\n                            <LogIn className=\"mr-2 h-5 w-5\" />\r\n                            Check In\r\n                        </Button>\r\n                        <Button\r\n                            size=\"lg\"\r\n                            className=\"w-32 bg-red-600 hover:bg-red-700\"\r\n                            variant=\"destructive\"\r\n                            disabled={isPending || !canCheckOut}\r\n                            onClick={() => setShowCheckOutDialog(true)}\r\n                        >\r\n                            <LogOut className=\"mr-2 h-5 w-5\" />\r\n                            Check Out\r\n                        </Button>\r\n                    </div>\r\n\r\n                    <div className=\"w-full space-y-2 mt-4\">\r\n                        <div className=\"flex justify-between text-sm\">\r\n                            <span className=\"text-muted-foreground\">Last Check In</span>\r\n                            <span className=\"font-medium\">\r\n                                {lastLog?.check_in ? format(new Date(lastLog.check_in), 'hh:mm a') : '--:--'}\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"flex justify-between text-sm\">\r\n                            <span className=\"text-muted-foreground\">Last Check Out</span>\r\n                            <span className=\"font-medium\">\r\n                                {lastLog?.check_out ? format(new Date(lastLog.check_out), 'hh:mm a') : '--:--'}\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"flex justify-between text-sm pt-2 border-t\">\r\n                            <span className=\"text-muted-foreground font-semibold\">Total Hours Today</span>\r\n                            <span className=\"font-bold\">\r\n                                {totalWorkingHours} hrs\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Recent Logs Table */}\r\n            <Card className=\"lg:col-span-4\">\r\n                <CardHeader>\r\n                    <CardTitle>Recent Activity</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <Table>\r\n                        <TableHeader>\r\n                            <TableRow>\r\n                                <TableHead>Date</TableHead>\r\n                                <TableHead>In</TableHead>\r\n                                <TableHead>Out</TableHead>\r\n                                <TableHead>Location</TableHead>\r\n                                <TableHead>Notes</TableHead>\r\n                                <TableHead>Hours</TableHead>\r\n                                <TableHead>Status</TableHead>\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                            {/* Show today's logs first if any */}\r\n                            {todayLogs.length > 0 && todayLogs.map(log => (\r\n                                <TableRow key={log.id} className=\"bg-muted/30\">\r\n                                    <TableCell className=\"font-medium\">\r\n                                        Today\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        {log.check_in ? format(new Date(log.check_in), 'hh:mm a') : '-'}\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        {log.check_out ? format(new Date(log.check_out), 'hh:mm a') : '-'}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-xs text-muted-foreground w-[150px]\">\r\n                                        {log.check_in_location ? (\r\n                                            <a\r\n                                                href={`https://www.google.com/maps?q=${log.check_in_location.latitude},${log.check_in_location.longitude}`}\r\n                                                target=\"_blank\"\r\n                                                rel=\"noopener noreferrer\"\r\n                                                className=\"flex items-center gap-1 hover:text-primary transition-colors\"\r\n                                            >\r\n                                                <MapPin className=\"h-3 w-3\" />\r\n                                                In: View Map\r\n                                            </a>\r\n                                        ) : '-'}\r\n                                        {log.check_out_location && (\r\n                                            <a\r\n                                                href={`https://www.google.com/maps?q=${log.check_out_location.latitude},${log.check_out_location.longitude}`}\r\n                                                target=\"_blank\"\r\n                                                rel=\"noopener noreferrer\"\r\n                                                className=\"flex items-center gap-1 mt-1 hover:text-primary transition-colors\"\r\n                                            >\r\n                                                <MapPin className=\"h-3 w-3\" />\r\n                                                Out: View Map\r\n                                            </a>\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"max-w-[200px] truncate text-xs\" title={log.notes}>\r\n                                        {log.notes || '-'}\r\n                                    </TableCell>\r\n                                    <TableCell>{log.working_hours || '-'}</TableCell>\r\n                                    <TableCell>\r\n                                        <Badge variant=\"outline\">\r\n                                            {log.status}\r\n                                        </Badge>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n\r\n                            {recentLogs.map((log) => (\r\n                                <TableRow key={log.id}>\r\n                                    <TableCell className=\"font-medium\">\r\n                                        {format(new Date(log.date), 'MMM d')}\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        {log.check_in ? format(new Date(log.check_in), 'hh:mm a') : '-'}\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        {log.check_out ? format(new Date(log.check_out), 'hh:mm a') : '-'}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-xs text-muted-foreground w-[150px]\">\r\n                                        {log.check_in_location ? (\r\n                                            <div className=\"flex items-center gap-1\">\r\n                                                <MapPin className=\"h-3 w-3\" />\r\n                                                In: {JSON.stringify(log.check_in_location).slice(0, 10)}...\r\n                                            </div>\r\n                                        ) : '-'}\r\n                                        {log.check_out_location && (\r\n                                            <div className=\"flex items-center gap-1 mt-1\">\r\n                                                <MapPin className=\"h-3 w-3\" />\r\n                                                Out: {JSON.stringify(log.check_out_location).slice(0, 10)}...\r\n                                            </div>\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"max-w-[200px] truncate text-xs\" title={log.notes}>\r\n                                        {log.notes || '-'}\r\n                                    </TableCell>\r\n                                    <TableCell>{log.working_hours || '-'}</TableCell>\r\n                                    <TableCell>\r\n                                        <Badge variant={log.status === 'Tardy' ? 'destructive' : 'outline'}>\r\n                                            {log.status}\r\n                                        </Badge>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableBody>\r\n                    </Table>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            <AttendanceActionDialog\r\n                isOpen={showCheckInDialog}\r\n                onOpenChange={setShowCheckInDialog}\r\n                title=\"Confirm Check In\"\r\n                onConfirm={onConfirmCheckIn}\r\n                isPending={isPending}\r\n                actionType=\"in\"\r\n            />\r\n\r\n            <AttendanceActionDialog\r\n                isOpen={showCheckOutDialog}\r\n                onOpenChange={setShowCheckOutDialog}\r\n                title=\"Confirm Check Out\"\r\n                onConfirm={onConfirmCheckOut}\r\n                isPending={isPending}\r\n                actionType=\"out\"\r\n            />\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\employees\\employee-filters.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useCallback' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":21,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useCallback"},"fix":{"range":[100,112],"text":""},"desc":"Remove unused variable \"useCallback\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":14,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":27,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Filter"},"fix":{"range":[394,402],"text":""},"desc":"Remove unused variable \"Filter\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[703,706],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[703,706],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'searchParams'. Either include it or remove the dependency array.","line":56,"column":8,"nodeType":"ArrayExpression","endLine":56,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [search, router, pathname, searchParams]","fix":{"range":[2118,2144],"text":"[search, router, pathname, searchParams]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useRouter, usePathname, useSearchParams } from 'next/navigation'\r\nimport { useCallback, useState, useEffect } from 'react'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select'\r\nimport { Search, X, Filter, Download } from 'lucide-react'\r\nimport { Department, Designation } from '@/types/database.types'\r\nimport { exportToCSV } from '@/lib/utils/export'\r\nimport { toast } from 'sonner'\r\n\r\ninterface EmployeeFiltersProps {\r\n    departments: Department[]\r\n    designations: Designation[]\r\n    employeesData: any[] // For export\r\n}\r\n\r\nexport function EmployeeFilters({ departments, designations, employeesData }: EmployeeFiltersProps) {\r\n    const router = useRouter()\r\n    const pathname = usePathname()\r\n    const searchParams = useSearchParams()\r\n\r\n    // Local state for search to handle debounce or simple enter key\r\n    const [search, setSearch] = useState(searchParams.get('search') || '')\r\n    const [department, setDepartment] = useState(searchParams.get('department') || 'all')\r\n    const [designation, setDesignation] = useState(searchParams.get('designation') || 'all')\r\n    const [status, setStatus] = useState(searchParams.get('status') || 'all')\r\n    const [employmentType, setEmploymentType] = useState(searchParams.get('type') || 'all')\r\n\r\n    // Effect to debounce search\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            const params = new URLSearchParams(window.location.search)\r\n            if (search) {\r\n                params.set('search', search)\r\n            } else {\r\n                params.delete('search')\r\n            }\r\n            const newQuery = params.toString()\r\n            const currentQuery = searchParams.toString()\r\n\r\n            // Only push if query actually changed\r\n            if (newQuery !== currentQuery) {\r\n                router.push(`${pathname}?${newQuery}`)\r\n            }\r\n        }, 500)\r\n\r\n        return () => clearTimeout(timer)\r\n    }, [search, router, pathname]) // Removed searchParams to prevent loop\r\n\r\n    // Handle search input change\r\n    const handleSearch = (term: string) => {\r\n        setSearch(term)\r\n    }\r\n\r\n    // Apply filters directly\r\n    const applyFilter = (name: string, value: string) => {\r\n        const params = new URLSearchParams(window.location.search)\r\n        if (value && value !== 'all') {\r\n            params.set(name, value)\r\n        } else {\r\n            params.delete(name)\r\n        }\r\n        // When filtering, we might want to preserve search or not. \r\n        // Current implementation is relying on URL state + local state sync.\r\n        // It's safer to read current URL params.\r\n\r\n        router.push(`${pathname}?${params.toString()}`)\r\n    }\r\n\r\n    // Clear all filters\r\n    const clearFilters = () => {\r\n        setSearch('')\r\n        setDepartment('all')\r\n        setDesignation('all')\r\n        setStatus('all')\r\n        setEmploymentType('all')\r\n        router.push(pathname)\r\n    }\r\n\r\n    // Handle Export\r\n    const handleExport = () => {\r\n        try {\r\n            // Prepare data for export\r\n            const exportData = employeesData.map(emp => ({\r\n                EmployeeID: emp.employee_id,\r\n                FirstName: emp.first_name,\r\n                LastName: emp.last_name,\r\n                Email: emp.email,\r\n                Phone: emp.phone,\r\n                Department: emp.department?.name || 'N/A',\r\n                Designation: emp.designation?.name || 'N/A',\r\n                Status: emp.status,\r\n                EmploymentType: emp.employment_type,\r\n                JoiningDate: emp.joining_date,\r\n                Manager: emp.manager ? `${emp.manager.first_name} ${emp.manager.last_name}` : 'N/A'\r\n            }))\r\n\r\n            exportToCSV(exportData, `employees_export_${new Date().toISOString().split('T')[0]}`)\r\n            toast.success('Employees exported successfully')\r\n        } catch (error) {\r\n            console.error('Export error:', error)\r\n            toast.error('Failed to export employees')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-4 mb-6\">\r\n            <div className=\"flex flex-col md:flex-row gap-4\">\r\n                {/* Search */}\r\n                <div className=\"relative flex-1\">\r\n                    <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                    <Input\r\n                        placeholder=\"Search by name, email, or ID...\"\r\n                        className=\"pl-8\"\r\n                        value={search}\r\n                        onChange={(e) => handleSearch(e.target.value)}\r\n                    />\r\n                </div>\r\n\r\n                {/* Filters Group 1 */}\r\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2 flex-1\">\r\n                    <Select value={department} onValueChange={(val) => { setDepartment(val); applyFilter('department', val) }}>\r\n                        <SelectTrigger>\r\n                            <SelectValue placeholder=\"Department\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            <SelectItem value=\"all\">All Departments</SelectItem>\r\n                            {departments.map((dept) => (\r\n                                <SelectItem key={dept.id} value={dept.id}>\r\n                                    {dept.name}\r\n                                </SelectItem>\r\n                            ))}\r\n                        </SelectContent>\r\n                    </Select>\r\n\r\n                    <Select value={designation} onValueChange={(val) => { setDesignation(val); applyFilter('designation', val) }}>\r\n                        <SelectTrigger>\r\n                            <SelectValue placeholder=\"Designation\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            <SelectItem value=\"all\">All Designations</SelectItem>\r\n                            {designations.map((desig) => (\r\n                                <SelectItem key={desig.id} value={desig.id}>\r\n                                    {desig.name}\r\n                                </SelectItem>\r\n                            ))}\r\n                        </SelectContent>\r\n                    </Select>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col md:flex-row gap-4 justify-between\">\r\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 flex-1 md:flex-none md:w-auto\">\r\n                    <Select value={status} onValueChange={(val) => { setStatus(val); applyFilter('status', val) }}>\r\n                        <SelectTrigger>\r\n                            <SelectValue placeholder=\"Status\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            <SelectItem value=\"all\">All Status</SelectItem>\r\n                            <SelectItem value=\"ACTIVE\">Active</SelectItem>\r\n                            <SelectItem value=\"INACTIVE\">Inactive</SelectItem>\r\n                            <SelectItem value=\"ON_LEAVE\">On Leave</SelectItem>\r\n                            <SelectItem value=\"RESIGNED\">Resigned</SelectItem>\r\n                            <SelectItem value=\"TERMINATED\">Terminated</SelectItem>\r\n                        </SelectContent>\r\n                    </Select>\r\n\r\n                    <Select value={employmentType} onValueChange={(val) => { setEmploymentType(val); applyFilter('type', val) }}>\r\n                        <SelectTrigger>\r\n                            <SelectValue placeholder=\"Type\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            <SelectItem value=\"all\">All Types</SelectItem>\r\n                            <SelectItem value=\"FULL_TIME\">Full Time</SelectItem>\r\n                            <SelectItem value=\"PART_TIME\">Part Time</SelectItem>\r\n                            <SelectItem value=\"CONTRACT\">Contract</SelectItem>\r\n                            <SelectItem value=\"INTERN\">Intern</SelectItem>\r\n                        </SelectContent>\r\n                    </Select>\r\n\r\n                    <Button variant=\"outline\" onClick={clearFilters} className=\"w-full\">\r\n                        <X className=\"h-4 w-4 mr-2\" />\r\n                        Reset\r\n                    </Button>\r\n                </div>\r\n\r\n                <Button variant=\"outline\" onClick={handleExport}>\r\n                    <Download className=\"h-4 w-4 mr-2\" />\r\n                    Export CSV\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\employees\\employee-form.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Department' is defined but never used.","line":12,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":25,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Department"},"fix":{"range":[449,460],"text":""},"desc":"Remove unused variable \"Department\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Designation' is defined but never used.","line":12,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":38,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Designation"},"fix":{"range":[459,472],"text":""},"desc":"Remove unused variable \"Designation\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Employee' is defined but never used.","line":12,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":48,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Employee"},"fix":{"range":[435,514],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Label' is defined but never used.","line":18,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":15,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Label"},"fix":{"range":[746,791],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FormDescription' is defined but never used.","line":24,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":20,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"FormDescription"},"fix":{"range":[935,957],"text":""},"desc":"Remove unused variable \"FormDescription\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1504,1507],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1504,1507],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport { useForm, useFieldArray } from 'react-hook-form'\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { toast } from 'sonner'\r\nimport { CalendarIcon, Loader2, Plus, Trash2 } from 'lucide-react'\r\nimport { format } from 'date-fns'\r\n\r\nimport { employeeFormSchema, type EmployeeFormValues } from '@/lib/validations/employee'\r\nimport type { Department, Designation, Employee } from '@/types/database.types'\r\nimport { cn } from '@/lib/utils'\r\nimport { createEmployeeAction, updateEmployeeAction } from '@/app/(dashboard)/employees/actions'\r\n\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { Calendar } from '@/components/ui/calendar'\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormDescription,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from '@/components/ui/form'\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select'\r\nimport {\r\n    Popover,\r\n    PopoverContent,\r\n    PopoverTrigger,\r\n} from '@/components/ui/popover'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport { ImageUpload } from '@/components/ui/image-upload'\r\ninterface EmployeeFormProps {\r\n    mode?: 'create' | 'edit'\r\n    employeeId?: string\r\n    initialData?: any\r\n    departments: { id: string; name: string }[]\r\n    designations: { id: string; name: string }[]\r\n    managers: { id: string; first_name: string; last_name: string; employee_id: string }[]\r\n}\r\n\r\nexport default function EmployeeForm({\r\n    mode = 'create',\r\n    employeeId,\r\n    initialData,\r\n    departments,\r\n    designations,\r\n    managers\r\n}: EmployeeFormProps) {\r\n    const router = useRouter()\r\n    const [isSubmitting, setIsSubmitting] = useState(false)\r\n\r\n    const form = useForm<EmployeeFormValues>({\r\n        resolver: zodResolver(employeeFormSchema),\r\n        defaultValues: {\r\n            profileImageUrl: initialData?.profile_image_url || null,\r\n            firstName: initialData?.first_name || '',\r\n            lastName: initialData?.last_name || '',\r\n            email: initialData?.email || '',\r\n            phone: initialData?.phone || '',\r\n            dateOfBirth: initialData?.date_of_birth ? new Date(initialData.date_of_birth) : undefined as unknown as Date,\r\n            gender: (initialData?.gender as 'MALE' | 'FEMALE' | 'OTHER') || 'MALE',\r\n            bloodGroup: initialData?.blood_group || '',\r\n            maritalStatus: (initialData?.marital_status as 'SINGLE' | 'MARRIED' | 'DIVORCED' | 'WIDOWED') || 'SINGLE',\r\n            departmentId: initialData?.department_id || '',\r\n            designationId: initialData?.designation_id || '',\r\n            managerId: initialData?.manager_id || 'none',\r\n            employmentType: (initialData?.employment_type as 'FULL_TIME' | 'PART_TIME' | 'CONTRACT' | 'INTERN') || 'FULL_TIME',\r\n            joiningDate: initialData?.joining_date ? new Date(initialData.joining_date) : new Date(),\r\n            confirmationDate: initialData?.confirmation_date ? new Date(initialData.confirmation_date) : null,\r\n            currentAddress: initialData?.current_address?.full || '',\r\n            permanentAddress: initialData?.permanent_address?.full || '',\r\n            sameAsCurrent: false,\r\n            emergencyContacts: initialData?.emergency_contacts\r\n                ? (typeof initialData.emergency_contacts === 'string'\r\n                    ? JSON.parse(initialData.emergency_contacts)\r\n                    : initialData.emergency_contacts)\r\n                : [{ name: '', relationship: '', phone: '' }],\r\n        },\r\n    })\r\n\r\n    const { fields, append, remove } = useFieldArray({\r\n        control: form.control,\r\n        name: 'emergencyContacts',\r\n    })\r\n\r\n    const sameAsCurrent = form.watch('sameAsCurrent')\r\n    const currentAddress = form.watch('currentAddress')\r\n\r\n    // Auto-fill permanent address when \"same as current\" is checked\r\n    if (sameAsCurrent && currentAddress !== form.getValues('permanentAddress')) {\r\n        form.setValue('permanentAddress', currentAddress)\r\n    }\r\n\r\n    const handleSubmit = async (data: EmployeeFormValues) => {\r\n        setIsSubmitting(true)\r\n        try {\r\n            let result\r\n            if (mode === 'edit' && employeeId) {\r\n                result = await updateEmployeeAction(employeeId, data)\r\n            } else {\r\n                result = await createEmployeeAction(data)\r\n            }\r\n\r\n            if (result.success) {\r\n                toast.success(mode === 'edit' ? 'Employee updated successfully!' : 'Employee created successfully!')\r\n                router.refresh() // Refresh to get latest data\r\n                router.push('/employees')\r\n            } else {\r\n                toast.error(result.error || `Failed to ${mode === 'edit' ? 'update' : 'create'} employee`)\r\n            }\r\n        } catch (error) {\r\n            toast.error('An unexpected error occurred')\r\n            console.error('Form submission error:', error)\r\n        } finally {\r\n            setIsSubmitting(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Form {...form}>\r\n            <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-8\">\r\n                {/* Personal Information */}\r\n                <div className=\"space-y-4\">\r\n                    <h2 className=\"text-2xl font-bold\">Personal Information</h2>\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"profileImageUrl\"\r\n                            render={({ field }) => (\r\n                                <FormItem className=\"col-span-full\">\r\n                                    <FormLabel>Profile Image</FormLabel>\r\n                                    <FormControl>\r\n                                        <ImageUpload\r\n                                            value={field.value}\r\n                                            onChange={field.onChange}\r\n                                            disabled={isSubmitting}\r\n                                        />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"firstName\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>First Name *</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input placeholder=\"John\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"lastName\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Last Name *</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input placeholder=\"Doe\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"email\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Email *</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input type=\"email\" placeholder=\"john.doe@company.com\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"phone\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Phone *</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input placeholder=\"1234567890\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"dateOfBirth\"\r\n                            render={({ field }) => (\r\n                                <FormItem className=\"flex flex-col\">\r\n                                    <FormLabel>Date of Birth *</FormLabel>\r\n                                    <Popover>\r\n                                        <PopoverTrigger asChild>\r\n                                            <FormControl>\r\n                                                <Button\r\n                                                    variant=\"outline\"\r\n                                                    className={cn(\r\n                                                        'w-full pl-3 text-left font-normal',\r\n                                                        !field.value && 'text-muted-foreground'\r\n                                                    )}\r\n                                                >\r\n                                                    {field.value ? format(field.value, 'PPP') : 'Pick a date'}\r\n                                                    <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\r\n                                                </Button>\r\n                                            </FormControl>\r\n                                        </PopoverTrigger>\r\n                                        <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                                            <Calendar\r\n                                                mode=\"single\"\r\n                                                selected={field.value}\r\n                                                onSelect={field.onChange}\r\n                                                disabled={(date) => date > new Date() || date < new Date('1900-01-01')}\r\n                                                initialFocus\r\n                                            />\r\n                                        </PopoverContent>\r\n                                    </Popover>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"gender\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Gender *</FormLabel>\r\n                                    <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                        <FormControl>\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Select gender\" />\r\n                                            </SelectTrigger>\r\n                                        </FormControl>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"MALE\">Male</SelectItem>\r\n                                            <SelectItem value=\"FEMALE\">Female</SelectItem>\r\n                                            <SelectItem value=\"OTHER\">Other</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"bloodGroup\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Blood Group</FormLabel>\r\n                                    <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                        <FormControl>\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Select blood group\" />\r\n                                            </SelectTrigger>\r\n                                        </FormControl>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"A+\">A+</SelectItem>\r\n                                            <SelectItem value=\"A-\">A-</SelectItem>\r\n                                            <SelectItem value=\"B+\">B+</SelectItem>\r\n                                            <SelectItem value=\"B-\">B-</SelectItem>\r\n                                            <SelectItem value=\"AB+\">AB+</SelectItem>\r\n                                            <SelectItem value=\"AB-\">AB-</SelectItem>\r\n                                            <SelectItem value=\"O+\">O+</SelectItem>\r\n                                            <SelectItem value=\"O-\">O-</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"maritalStatus\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Marital Status *</FormLabel>\r\n                                    <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                        <FormControl>\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Select marital status\" />\r\n                                            </SelectTrigger>\r\n                                        </FormControl>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"SINGLE\">Single</SelectItem>\r\n                                            <SelectItem value=\"MARRIED\">Married</SelectItem>\r\n                                            <SelectItem value=\"DIVORCED\">Divorced</SelectItem>\r\n                                            <SelectItem value=\"WIDOWED\">Widowed</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Employment Information */}\r\n                <div className=\"space-y-4\">\r\n                    <h2 className=\"text-2xl font-bold\">Employment Information</h2>\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"departmentId\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Department *</FormLabel>\r\n                                    <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                        <FormControl>\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Select department\" />\r\n                                            </SelectTrigger>\r\n                                        </FormControl>\r\n                                        <SelectContent>\r\n                                            {departments.map((dept) => (\r\n                                                <SelectItem key={dept.id} value={dept.id}>\r\n                                                    {dept.name}\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"designationId\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Designation *</FormLabel>\r\n                                    <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                        <FormControl>\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Select designation\" />\r\n                                            </SelectTrigger>\r\n                                        </FormControl>\r\n                                        <SelectContent>\r\n                                            {designations.map((desig) => (\r\n                                                <SelectItem key={desig.id} value={desig.id}>\r\n                                                    {desig.name}\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"managerId\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Reporting Manager</FormLabel>\r\n                                    <Select\r\n                                        onValueChange={field.onChange}\r\n                                        defaultValue={field.value || undefined}\r\n                                    >\r\n                                        <FormControl>\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Select manager (optional)\" />\r\n                                            </SelectTrigger>\r\n                                        </FormControl>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"none\">None</SelectItem>\r\n                                            {managers.map((manager) => (\r\n                                                <SelectItem key={manager.id} value={manager.id}>\r\n                                                    {manager.first_name} {manager.last_name} ({manager.employee_id})\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"employmentType\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Employment Type *</FormLabel>\r\n                                    <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                        <FormControl>\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Select employment type\" />\r\n                                            </SelectTrigger>\r\n                                        </FormControl>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"FULL_TIME\">Full Time</SelectItem>\r\n                                            <SelectItem value=\"PART_TIME\">Part Time</SelectItem>\r\n                                            <SelectItem value=\"CONTRACT\">Contract</SelectItem>\r\n                                            <SelectItem value=\"INTERN\">Intern</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"joiningDate\"\r\n                            render={({ field }) => (\r\n                                <FormItem className=\"flex flex-col\">\r\n                                    <FormLabel>Joining Date *</FormLabel>\r\n                                    <Popover>\r\n                                        <PopoverTrigger asChild>\r\n                                            <FormControl>\r\n                                                <Button\r\n                                                    variant=\"outline\"\r\n                                                    className={cn(\r\n                                                        'w-full pl-3 text-left font-normal',\r\n                                                        !field.value && 'text-muted-foreground'\r\n                                                    )}\r\n                                                >\r\n                                                    {field.value ? format(field.value, 'PPP') : 'Pick a date'}\r\n                                                    <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\r\n                                                </Button>\r\n                                            </FormControl>\r\n                                        </PopoverTrigger>\r\n                                        <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                                            <Calendar\r\n                                                mode=\"single\"\r\n                                                selected={field.value}\r\n                                                onSelect={field.onChange}\r\n                                                initialFocus\r\n                                            />\r\n                                        </PopoverContent>\r\n                                    </Popover>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"confirmationDate\"\r\n                            render={({ field }) => (\r\n                                <FormItem className=\"flex flex-col\">\r\n                                    <FormLabel>Confirmation Date (Optional)</FormLabel>\r\n                                    <Popover>\r\n                                        <PopoverTrigger asChild>\r\n                                            <FormControl>\r\n                                                <Button\r\n                                                    variant=\"outline\"\r\n                                                    className={cn(\r\n                                                        'w-full pl-3 text-left font-normal',\r\n                                                        !field.value && 'text-muted-foreground'\r\n                                                    )}\r\n                                                >\r\n                                                    {field.value ? format(field.value, 'PPP') : 'Pick a date'}\r\n                                                    <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\r\n                                                </Button>\r\n                                            </FormControl>\r\n                                        </PopoverTrigger>\r\n                                        <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                                            <Calendar\r\n                                                mode=\"single\"\r\n                                                selected={field.value || undefined}\r\n                                                onSelect={field.onChange}\r\n                                                initialFocus\r\n                                            />\r\n                                        </PopoverContent>\r\n                                    </Popover>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Address Information */}\r\n                <div className=\"space-y-4\">\r\n                    <h2 className=\"text-2xl font-bold\">Address Information</h2>\r\n\r\n                    <div className=\"grid grid-cols-1 gap-4\">\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"currentAddress\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Current Address *</FormLabel>\r\n                                    <FormControl>\r\n                                        <Textarea\r\n                                            placeholder=\"Enter complete address\"\r\n                                            className=\"resize-none\"\r\n                                            {...field}\r\n                                        />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"sameAsCurrent\"\r\n                            render={({ field }) => (\r\n                                <FormItem className=\"flex flex-row items-start space-x-3 space-y-0\">\r\n                                    <FormControl>\r\n                                        <Checkbox\r\n                                            checked={field.value}\r\n                                            onCheckedChange={field.onChange}\r\n                                        />\r\n                                    </FormControl>\r\n                                    <div className=\"space-y-1 leading-none\">\r\n                                        <FormLabel>\r\n                                            Permanent address is same as current address\r\n                                        </FormLabel>\r\n                                    </div>\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"permanentAddress\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Permanent Address *</FormLabel>\r\n                                    <FormControl>\r\n                                        <Textarea\r\n                                            placeholder=\"Enter complete address\"\r\n                                            className=\"resize-none\"\r\n                                            disabled={sameAsCurrent}\r\n                                            {...field}\r\n                                        />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Emergency Contacts */}\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <h2 className=\"text-2xl font-bold\">Emergency Contacts</h2>\r\n                        <Button\r\n                            type=\"button\"\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            onClick={() => append({ name: '', relationship: '', phone: '' })}\r\n                        >\r\n                            <Plus className=\"h-4 w-4 mr-2\" />\r\n                            Add Contact\r\n                        </Button>\r\n                    </div>\r\n\r\n                    {fields.map((field, index) => (\r\n                        <div key={field.id} className=\"p-4 border rounded-lg space-y-4\">\r\n                            <div className=\"flex items-center justify-between mb-2\">\r\n                                <h3 className=\"font-semibold\">Contact {index + 1}</h3>\r\n                                {fields.length > 1 && (\r\n                                    <Button\r\n                                        type=\"button\"\r\n                                        variant=\"ghost\"\r\n                                        size=\"sm\"\r\n                                        onClick={() => remove(index)}\r\n                                    >\r\n                                        <Trash2 className=\"h-4 w-4 text-destructive\" />\r\n                                    </Button>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                                <FormField\r\n                                    control={form.control}\r\n                                    name={`emergencyContacts.${index}.name`}\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel>Name *</FormLabel>\r\n                                            <FormControl>\r\n                                                <Input placeholder=\"Contact name\" {...field} />\r\n                                            </FormControl>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n\r\n                                <FormField\r\n                                    control={form.control}\r\n                                    name={`emergencyContacts.${index}.relationship`}\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel>Relationship *</FormLabel>\r\n                                            <FormControl>\r\n                                                <Input placeholder=\"e.g., Spouse, Parent\" {...field} />\r\n                                            </FormControl>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n\r\n                                <FormField\r\n                                    control={form.control}\r\n                                    name={`emergencyContacts.${index}.phone`}\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel>Phone *</FormLabel>\r\n                                            <FormControl>\r\n                                                <Input placeholder=\"1234567890\" {...field} />\r\n                                            </FormControl>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Form Actions */}\r\n                <div className=\"flex gap-4\">\r\n                    <Button\r\n                        type=\"submit\"\r\n                        disabled={isSubmitting}\r\n                        className=\"flex-1\"\r\n                    >\r\n                        {isSubmitting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                        {isSubmitting\r\n                            ? (mode === 'edit' ? 'Updating...' : 'Creating...')\r\n                            : (mode === 'edit' ? 'Update Employee' : 'Create Employee')}\r\n                    </Button>\r\n                    <Button\r\n                        type=\"button\"\r\n                        variant=\"outline\"\r\n                        onClick={() => router.back()}\r\n                        disabled={isSubmitting}\r\n                    >\r\n                        Cancel\r\n                    </Button>\r\n                </div>\r\n            </form>\r\n        </Form>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\employees\\employee-list-actions.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":4,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Link"},"fix":{"range":[83,111],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":55,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { MoreHorizontal, Pencil, Trash, Eye } from 'lucide-react'\r\nimport Link from 'next/link'\r\nimport { useRouter } from 'next/navigation'\r\nimport { toast } from 'sonner'\r\nimport { useState } from 'react'\r\n\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n    DropdownMenu,\r\n    DropdownMenuContent,\r\n    DropdownMenuItem,\r\n    DropdownMenuLabel,\r\n    DropdownMenuSeparator,\r\n    DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu'\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\"\r\n\r\nimport { deleteEmployeeAction } from '@/app/(dashboard)/employees/actions'\r\nimport { UserRole } from '@/types/database.types'\r\n\r\ninterface EmployeeListActionsProps {\r\n    employeeId: string\r\n    userRole: UserRole\r\n}\r\n\r\nexport function EmployeeListActions({ employeeId, userRole }: EmployeeListActionsProps) {\r\n    const router = useRouter()\r\n    const [open, setOpen] = useState(false)\r\n    const [showDeleteDialog, setShowDeleteDialog] = useState(false)\r\n    const [isDeleting, setIsDeleting] = useState(false)\r\n\r\n    const canEdit = ['SUPER_ADMIN', 'HR_ADMIN'].includes(userRole)\r\n    const canDelete = ['SUPER_ADMIN'].includes(userRole)\r\n\r\n    const handleDelete = async () => {\r\n        setIsDeleting(true)\r\n        try {\r\n            const result = await deleteEmployeeAction(employeeId)\r\n            if (result.success) {\r\n                toast.success('Employee deleted successfully')\r\n            } else {\r\n                toast.error(result.error || 'Failed to delete employee')\r\n            }\r\n        } catch (error) {\r\n            toast.error('An unexpected error occurred')\r\n        } finally {\r\n            setIsDeleting(false)\r\n            setShowDeleteDialog(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <DropdownMenu open={open} onOpenChange={setOpen}>\r\n                <DropdownMenuTrigger asChild>\r\n                    <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\r\n                        <span className=\"sr-only\">Open menu</span>\r\n                        <MoreHorizontal className=\"h-4 w-4\" />\r\n                    </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent align=\"end\">\r\n                    <DropdownMenuLabel>Actions</DropdownMenuLabel>\r\n\r\n                    <DropdownMenuItem onClick={() => router.push(`/employees/${employeeId}`)} className=\"cursor-pointer\">\r\n                        <Eye className=\"mr-2 h-4 w-4\" />\r\n                        View Details\r\n                    </DropdownMenuItem>\r\n\r\n                    {canEdit && (\r\n                        <DropdownMenuItem onClick={() => router.push(`/employees/${employeeId}/edit`)} className=\"cursor-pointer\">\r\n                            <Pencil className=\"mr-2 h-4 w-4\" />\r\n                            Edit Employee\r\n                        </DropdownMenuItem>\r\n                    )}\r\n\r\n                    {canDelete && (\r\n                        <>\r\n                            <DropdownMenuSeparator />\r\n                            <DropdownMenuItem\r\n                                className=\"text-destructive focus:text-destructive cursor-pointer\"\r\n                                onClick={() => setShowDeleteDialog(true)}\r\n                            >\r\n                                <Trash className=\"mr-2 h-4 w-4\" />\r\n                                Delete Employee\r\n                            </DropdownMenuItem>\r\n                        </>\r\n                    )}\r\n                </DropdownMenuContent>\r\n            </DropdownMenu>\r\n\r\n            <AlertDialog open={showDeleteDialog} onOpenChange={setShowDeleteDialog}>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            This action cannot be undone. This will permanently delete the employee record\r\n                            and remove their data from the servers.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel disabled={isDeleting}>Cancel</AlertDialogCancel>\r\n                        <AlertDialogAction\r\n                            onClick={(e) => {\r\n                                e.preventDefault()\r\n                                handleDelete()\r\n                            }}\r\n                            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n                            disabled={isDeleting}\r\n                        >\r\n                            {isDeleting ? 'Deleting...' : 'Delete'}\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n        </>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\layout\\header.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used.","line":14,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"User"},"fix":{"range":[344,349],"text":""},"desc":"Remove unused variable \"User\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'toast' is defined but never used.","line":16,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":15,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"toast"},"fix":{"range":[455,485],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[602,605],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[602,605],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[622,625],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[622,625],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":25,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":17}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport Link from 'next/link'\r\nimport { useRouter } from 'next/navigation'\r\nimport {\r\n    DropdownMenu,\r\n    DropdownMenuContent,\r\n    DropdownMenuItem,\r\n    DropdownMenuLabel,\r\n    DropdownMenuSeparator,\r\n    DropdownMenuTrigger\r\n} from '@/components/ui/dropdown-menu'\r\nimport { Button } from '@/components/ui/button'\r\nimport { User, LogOut, Settings, UserCircle } from 'lucide-react'\r\nimport { logoutAction } from '@/app/(auth)/actions'\r\nimport { toast } from 'sonner'\r\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar'\r\n\r\ninterface HeaderProps {\r\n    user: any\r\n    employee?: any\r\n}\r\n\r\nexport function Header({ user, employee }: HeaderProps) {\r\n    const router = useRouter()\r\n    const userEmail = user?.email || 'User'\r\n    const userInitial = employee?.first_name?.[0]?.toUpperCase() || userEmail[0].toUpperCase()\r\n    const userName = employee ? `${employee.first_name} ${employee.last_name}` : 'User'\r\n    const profileImage = employee?.profile_image_url\r\n\r\n    const handleLogout = async () => {\r\n        await logoutAction()\r\n    }\r\n\r\n    return (\r\n        <header className=\"sticky top-0 z-30 flex h-14 items-center gap-4 border-b bg-background px-6\">\r\n            <div className=\"flex flex-1 items-center gap-4\">\r\n                {/* Breadcrumbs or Page Title can go here */}\r\n                {/* For now, just a placeholder or leave empty for clean look */}\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-4\">\r\n                <DropdownMenu>\r\n                    <DropdownMenuTrigger asChild>\r\n                        <Button variant=\"ghost\" className=\"relative h-10 w-10 rounded-full\">\r\n                            <Avatar className=\"h-10 w-10\">\r\n                                <AvatarImage src={profileImage} alt={userName} />\r\n                                <AvatarFallback className=\"bg-primary/10 text-primary\">{userInitial}</AvatarFallback>\r\n                            </Avatar>\r\n                        </Button>\r\n                    </DropdownMenuTrigger>\r\n                    <DropdownMenuContent className=\"w-56\" align=\"end\" forceMount>\r\n                        <DropdownMenuLabel className=\"font-normal\">\r\n                            <div className=\"flex flex-col space-y-1\">\r\n                                <p className=\"text-sm font-medium leading-none\">{userName}</p>\r\n                                <p className=\"text-xs leading-none text-muted-foreground\">\r\n                                    {userEmail}\r\n                                </p>\r\n                            </div>\r\n                        </DropdownMenuLabel>\r\n                        <DropdownMenuSeparator />\r\n                        <DropdownMenuItem asChild>\r\n                            <Link href=\"/profile\" className=\"cursor-pointer flex w-full items-center\">\r\n                                <UserCircle className=\"mr-2 h-4 w-4\" />\r\n                                <span>Profile</span>\r\n                            </Link>\r\n                        </DropdownMenuItem>\r\n                        <DropdownMenuItem asChild>\r\n                            <Link href=\"/organization\" className=\"cursor-pointer flex w-full items-center\">\r\n                                <Settings className=\"mr-2 h-4 w-4\" />\r\n                                <span>Settings</span>\r\n                            </Link>\r\n                        </DropdownMenuItem>\r\n                        <DropdownMenuSeparator />\r\n                        <DropdownMenuItem\r\n                            className=\"cursor-pointer text-red-600 focus:text-red-600\"\r\n                            onClick={handleLogout}\r\n                        >\r\n                            <LogOut className=\"mr-2 h-4 w-4\" />\r\n                            <span>Log out</span>\r\n                        </DropdownMenuItem>\r\n                    </DropdownMenuContent>\r\n                </DropdownMenu>\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\layout\\sidebar-nav.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[325,328],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[325,328],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\NextJSProjects\\hrm-saas\\src\\components\\layout\\sidebar-nav.tsx:41:13\n  39 |\n  40 |         if (activeParents.length > 0) {\n> 41 |             setExpandedItems(activeParents)\n     |             ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  42 |         } else {\n  43 |             setExpandedItems([])\n  44 |         }","line":41,"column":13,"nodeType":null,"endLine":41,"endColumn":29}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport Link from 'next/link'\r\nimport { usePathname } from 'next/navigation'\r\nimport { cn } from '@/lib/utils'\r\nimport { ChevronDown, ChevronRight, LayoutDashboard, Settings, Users, Clock, Calendar, DollarSign } from 'lucide-react'\r\nimport { useState, useEffect } from 'react'\r\n\r\nconst iconMap: Record<string, any> = {\r\n    LayoutDashboard,\r\n    Settings,\r\n    Users,\r\n    Clock,\r\n    Calendar,\r\n    DollarSign,\r\n}\r\n\r\ninterface NavItem {\r\n    href: string\r\n    label: string\r\n    icon: string\r\n    subItems?: { href: string; label: string }[]\r\n}\r\n\r\nexport function SidebarNav({ items }: { items: NavItem[] }) {\r\n    const pathname = usePathname()\r\n    const [expandedItems, setExpandedItems] = useState<string[]>([])\r\n\r\n    // Automatically expand parent if a sub-item is active\r\n    useEffect(() => {\r\n        const activeParents = items\r\n            .filter(item =>\r\n                item.href !== '#' && (\r\n                    pathname === item.href ||\r\n                    item.subItems?.some(sub => pathname === sub.href)\r\n                )\r\n            )\r\n            .map(item => item.href)\r\n\r\n        if (activeParents.length > 0) {\r\n            setExpandedItems(activeParents)\r\n        } else {\r\n            setExpandedItems([])\r\n        }\r\n    }, [pathname, items])\r\n\r\n    const toggleExpand = (e: React.MouseEvent, href: string) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        setExpandedItems(prev =>\r\n            prev.includes(href)\r\n                ? prev.filter(i => i !== href)\r\n                : [...prev, href]\r\n        )\r\n    }\r\n\r\n    return (\r\n        <nav className=\"flex-1 space-y-1 p-4\">\r\n            {items.map((item) => {\r\n                const Icon = iconMap[item.icon] || LayoutDashboard\r\n                const isActive = pathname === item.href || item.subItems?.some(sub => pathname === sub.href)\r\n                const isExpanded = expandedItems.includes(item.href)\r\n\r\n                return (\r\n                    <div key={item.href} className=\"space-y-1\">\r\n                        <Link\r\n                            href={item.href}\r\n                            className={cn(\r\n                                \"flex items-center justify-between rounded-lg px-3 py-2 text-sm font-medium transition-all hover:bg-muted hover:text-primary\",\r\n                                isActive ? \"bg-primary/10 text-primary\" : \"text-muted-foreground\"\r\n                            )}\r\n                        >\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <Icon className=\"h-4 w-4\" />\r\n                                {item.label}\r\n                            </div>\r\n                            {item.subItems && (\r\n                                <div onClick={(e) => toggleExpand(e, item.href)}>\r\n                                    {isExpanded ? (\r\n                                        <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n                                    ) : (\r\n                                        <ChevronRight className=\"h-4 w-4 opacity-50\" />\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </Link>\r\n\r\n                        {item.subItems && isExpanded && (\r\n                            <div className=\"ml-9 space-y-1 border-l pl-2\">\r\n                                {item.subItems.map((sub) => (\r\n                                    <Link\r\n                                        key={sub.href}\r\n                                        href={sub.href}\r\n                                        className={cn(\r\n                                            \"block rounded-md px-3 py-1 text-xs font-medium transition-all hover:bg-muted hover:text-primary\",\r\n                                            pathname === sub.href ? \"text-primary font-bold bg-primary/5\" : \"text-muted-foreground\"\r\n                                        )}\r\n                                    >\r\n                                        {sub.label}\r\n                                    </Link>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )\r\n            })}\r\n        </nav>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\leaves\\delete-holiday-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[419,422],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[419,422],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":34,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogDescription,\r\n    DialogFooter,\r\n} from '@/components/ui/dialog'\r\nimport { deleteHolidayAction } from '@/app/(dashboard)/leaves/actions'\r\nimport { toast } from 'sonner'\r\nimport { Loader2 } from 'lucide-react'\r\n\r\ninterface DeleteHolidayDialogProps {\r\n    holiday: any\r\n    onSuccess: () => void\r\n    onCancel: () => void\r\n}\r\n\r\nexport function DeleteHolidayDialog({ holiday, onSuccess, onCancel }: DeleteHolidayDialogProps) {\r\n    const [isDeleting, setIsDeleting] = useState(false)\r\n\r\n    const handleDelete = async () => {\r\n        setIsDeleting(true)\r\n        try {\r\n            const result = await deleteHolidayAction(holiday.id)\r\n            if (result.success) {\r\n                toast.success(result.message)\r\n                onSuccess()\r\n            } else {\r\n                toast.error(result.error)\r\n            }\r\n        } catch (error) {\r\n            toast.error('Failed to delete holiday')\r\n        } finally {\r\n            setIsDeleting(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            <DialogHeader>\r\n                <DialogTitle>Delete Holiday</DialogTitle>\r\n                <DialogDescription>\r\n                    Are you sure you want to delete <strong>{holiday.name}</strong>? This action cannot be undone.\r\n                </DialogDescription>\r\n            </DialogHeader>\r\n            <DialogFooter>\r\n                <Button variant=\"outline\" onClick={onCancel} disabled={isDeleting}>\r\n                    Cancel\r\n                </Button>\r\n                <Button variant=\"destructive\" onClick={handleDelete} disabled={isDeleting}>\r\n                    {isDeleting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                    Delete\r\n                </Button>\r\n            </DialogFooter>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\leaves\\holiday-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[709,712],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[709,712],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useActionState, useEffect } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogFooter,\r\n} from '@/components/ui/dialog'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select'\r\nimport { createHolidayAction, updateHolidayAction } from '@/app/(dashboard)/leaves/actions'\r\nimport { toast } from 'sonner'\r\nimport { useFormStatus } from 'react-dom'\r\n\r\ninterface HolidayDialogProps {\r\n    holiday?: any\r\n    onSuccess: () => void\r\n}\r\n\r\nconst initialState = {\r\n    success: false,\r\n    error: '',\r\n    message: ''\r\n}\r\n\r\nfunction SubmitButton({ isEditing }: { isEditing: boolean }) {\r\n    const { pending } = useFormStatus()\r\n    return (\r\n        <Button type=\"submit\" disabled={pending}>\r\n            {pending ? 'Saving...' : (isEditing ? 'Update Holiday' : 'Add Holiday')}\r\n        </Button>\r\n    )\r\n}\r\n\r\nexport function HolidayDialog({ holiday, onSuccess }: HolidayDialogProps) {\r\n    const isEditing = !!holiday\r\n\r\n    // Bind the holiday ID if editing\r\n    const action = isEditing\r\n        ? updateHolidayAction.bind(null, holiday.id)\r\n        : createHolidayAction\r\n\r\n    const [state, formAction] = useActionState(action, initialState)\r\n\r\n    useEffect(() => {\r\n        if (state.success) {\r\n            toast.success(state.message)\r\n            onSuccess()\r\n        } else if (state.error) {\r\n            toast.error(state.error)\r\n        }\r\n    }, [state, onSuccess])\r\n\r\n    return (\r\n        <form action={formAction} className=\"space-y-4\">\r\n            <DialogHeader>\r\n                <DialogTitle>{isEditing ? 'Edit Holiday' : 'Add New Holiday'}</DialogTitle>\r\n            </DialogHeader>\r\n\r\n            <div className=\"space-y-4 py-2\">\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"name\">Holiday Name</Label>\r\n                    <Input\r\n                        id=\"name\"\r\n                        name=\"name\"\r\n                        defaultValue={holiday?.name}\r\n                        placeholder=\"e.g. New Year's Day\"\r\n                        required\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"date\">Date</Label>\r\n                        <Input\r\n                            id=\"date\"\r\n                            name=\"date\"\r\n                            type=\"date\"\r\n                            defaultValue={holiday?.date ? new Date(holiday.date).toISOString().split('T')[0] : ''}\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"type\">Type</Label>\r\n                        <Select name=\"type\" defaultValue={holiday?.type || \"PUBLIC\"}>\r\n                            <SelectTrigger>\r\n                                <SelectValue placeholder=\"Select type\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"PUBLIC\">Public Holiday</SelectItem>\r\n                                <SelectItem value=\"COMPANY\">Company Holiday</SelectItem>\r\n                                <SelectItem value=\"RESTRICTED\">Restricted Holiday</SelectItem>\r\n                            </SelectContent>\r\n                        </Select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"description\">Description (Optional)</Label>\r\n                    <Textarea\r\n                        id=\"description\"\r\n                        name=\"description\"\r\n                        defaultValue={holiday?.description}\r\n                        placeholder=\"Additional details...\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            <DialogFooter>\r\n                <SubmitButton isEditing={isEditing} />\r\n            </DialogFooter>\r\n        </form>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\leaves\\leave-application-form.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[682,685],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[682,685],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useActionState } from 'react'\r\nimport { useFormStatus } from 'react-dom'\r\nimport { applyLeaveAction } from '@/app/(dashboard)/leaves/actions'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { Checkbox } from '@/components/ui/checkbox'\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select'\r\nimport { useEffect, useState } from 'react'\r\nimport { toast } from 'sonner'\r\n\r\ninterface LeaveApplicationFormProps {\r\n    leaveTypes: any[]\r\n    onSuccess: () => void\r\n}\r\n\r\nconst initialState = {\r\n    success: false,\r\n    error: '',\r\n    message: ''\r\n}\r\n\r\nfunction SubmitButton() {\r\n    const { pending } = useFormStatus()\r\n    return (\r\n        <Button type=\"submit\" disabled={pending}>\r\n            {pending ? 'Submitting...' : 'Apply Leave'}\r\n        </Button>\r\n    )\r\n}\r\n\r\nexport function LeaveApplicationForm({ leaveTypes, onSuccess }: LeaveApplicationFormProps) {\r\n    const [state, formAction] = useActionState(applyLeaveAction, initialState)\r\n    const [isHalfDay, setIsHalfDay] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (state?.success) {\r\n            toast.success(state.message)\r\n            onSuccess()\r\n        } else if (state?.error) {\r\n            toast.error(state.error)\r\n        }\r\n    }, [state, onSuccess])\r\n\r\n    return (\r\n        <form action={formAction} className=\"space-y-4\">\r\n            <div className=\"space-y-2\">\r\n                <Label htmlFor=\"leaveTypeId\">Leave Type</Label>\r\n                <Select name=\"leaveTypeId\" required>\r\n                    <SelectTrigger>\r\n                        <SelectValue placeholder=\"Select leave type\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                        {leaveTypes.map((type) => (\r\n                            <SelectItem key={type.id} value={type.id}>\r\n                                {type.name} ({type.code})\r\n                            </SelectItem>\r\n                        ))}\r\n                    </SelectContent>\r\n                </Select>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"startDate\">Start Date</Label>\r\n                    <Input type=\"date\" name=\"startDate\" required />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"endDate\" className={isHalfDay ? 'text-muted-foreground' : ''}>End Date</Label>\r\n                    <Input type=\"date\" name=\"endDate\" required disabled={isHalfDay} />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-2\">\r\n                <Checkbox\r\n                    id=\"isHalfDay\"\r\n                    name=\"isHalfDay\"\r\n                    checked={isHalfDay}\r\n                    onCheckedChange={(checked) => setIsHalfDay(checked as boolean)}\r\n                />\r\n                <Label htmlFor=\"isHalfDay\">Half Day</Label>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n                <Label htmlFor=\"reason\">Reason</Label>\r\n                <Textarea name=\"reason\" placeholder=\"Reason for leave...\" required />\r\n            </div>\r\n\r\n            <div className=\"flex justify-end\">\r\n                <SubmitButton />\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\leaves\\leaves-dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1216,1219],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1216,1219],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1237,1240],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1237,1240],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1260,1263],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1260,1263],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1281,1284],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1281,1284],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1308,1311],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1308,1311],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'employeeId' is defined but never used.","line":54,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1806,1809],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1806,1809],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2004,2007],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2004,2007],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2141,2144],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2141,2144],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":89,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":89,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":105,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":105,"endColumn":23}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Plus, MoreHorizontal, Pencil, Trash2, Check, X } from 'lucide-react'\r\nimport { approveLeaveAction, rejectLeaveAction } from '@/app/(dashboard)/leaves/actions'\r\nimport { toast } from 'sonner'\r\nimport { format } from 'date-fns'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from \"@/components/ui/table\"\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from \"@/components/ui/dialog\"\r\nimport {\r\n    DropdownMenu,\r\n    DropdownMenuContent,\r\n    DropdownMenuItem,\r\n    DropdownMenuLabel,\r\n    DropdownMenuSeparator,\r\n    DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\"\r\nimport { LeaveApplicationForm } from './leave-application-form'\r\nimport { HolidayDialog } from './holiday-dialog'\r\nimport { DeleteHolidayDialog } from './delete-holiday-dialog'\r\n\r\ninterface LeavesDashboardProps {\r\n    balances: any[]\r\n    requests: any[]\r\n    leaveTypes: any[]\r\n    holidays: any[]\r\n    adminRequests?: any[]\r\n    employeeId: string\r\n    role?: string\r\n}\r\n\r\nexport function LeavesDashboard({\r\n    balances,\r\n    requests,\r\n    leaveTypes,\r\n    holidays,\r\n    adminRequests = [],\r\n    employeeId,\r\n    role\r\n}: LeavesDashboardProps) {\r\n    const [isApplyOpen, setIsApplyOpen] = useState(false)\r\n    const [isHolidayDialogOpen, setIsHolidayDialogOpen] = useState(false)\r\n    const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false)\r\n    const [selectedHoliday, setSelectedHoliday] = useState<any>(null)\r\n    const [processingId, setProcessingId] = useState<string | null>(null)\r\n\r\n    const isAdmin = role === 'HR_ADMIN' || role === 'SUPER_ADMIN'\r\n\r\n    const handleEditHoliday = (holiday: any) => {\r\n        setSelectedHoliday(holiday)\r\n        setIsHolidayDialogOpen(true)\r\n    }\r\n\r\n    const handleDeleteHoliday = (holiday: any) => {\r\n        setSelectedHoliday(holiday)\r\n        setIsDeleteDialogOpen(true)\r\n    }\r\n\r\n    const handleCloseHolidayDialog = () => {\r\n        setIsHolidayDialogOpen(false)\r\n        setSelectedHoliday(null)\r\n    }\r\n\r\n    const handleApprove = async (requestId: string) => {\r\n        setProcessingId(requestId)\r\n        try {\r\n            const result = await approveLeaveAction(requestId)\r\n            if (result.success) {\r\n                toast.success(result.message)\r\n            } else {\r\n                toast.error(result.error)\r\n            }\r\n        } catch (error) {\r\n            toast.error('Failed to approve leave')\r\n        } finally {\r\n            setProcessingId(null)\r\n        }\r\n    }\r\n\r\n    const handleReject = async (requestId: string) => {\r\n        setProcessingId(requestId)\r\n        try {\r\n            const result = await rejectLeaveAction(requestId)\r\n            if (result.success) {\r\n                toast.success(result.message)\r\n            } else {\r\n                toast.error(result.error)\r\n            }\r\n        } catch (error) {\r\n            toast.error('Failed to reject leave')\r\n        } finally {\r\n            setProcessingId(null)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Balances Grid */}\r\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n                {balances.map((balance) => (\r\n                    <Card key={balance.id}>\r\n                        <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                            <CardTitle className=\"text-sm font-medium\">\r\n                                {balance.leave_type.name}\r\n                            </CardTitle>\r\n                            <span className=\"text-muted-foreground text-xs\">{balance.leave_type.code}</span>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"text-2xl font-bold\">{balance.available}</div>\r\n                            <p className=\"text-xs text-muted-foreground\">\r\n                                Available out of {balance.allocated}\r\n                            </p>\r\n                        </CardContent>\r\n                    </Card>\r\n                ))}\r\n                {balances.length === 0 && (\r\n                    <Card className=\"col-span-full border-dashed\">\r\n                        <CardHeader>\r\n                            <CardTitle className=\"text-sm font-medium\">No Leave Balances</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <p className=\"text-sm text-muted-foreground\">\r\n                                Leave balances have not been assigned yet.\r\n                            </p>\r\n                        </CardContent>\r\n                    </Card>\r\n                )}\r\n            </div>\r\n\r\n            <Tabs defaultValue={isAdmin && adminRequests.length > 0 ? \"requests\" : \"history\"} className=\"space-y-4\">\r\n                <div className=\"flex justify-between items-center\">\r\n                    <TabsList>\r\n                        {isAdmin && (\r\n                            <TabsTrigger value=\"requests\" className=\"relative\">\r\n                                Requests\r\n                                {adminRequests.length > 0 && (\r\n                                    <span className=\"ml-2 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] text-white\">\r\n                                        {adminRequests.length}\r\n                                    </span>\r\n                                )}\r\n                            </TabsTrigger>\r\n                        )}\r\n                        <TabsTrigger value=\"history\">Leave History</TabsTrigger>\r\n                        <TabsTrigger value=\"holidays\">Holidays</TabsTrigger>\r\n                    </TabsList>\r\n\r\n                    <div className=\"flex gap-2\">\r\n                        {isAdmin && (\r\n                            <Button variant=\"outline\" onClick={() => setIsHolidayDialogOpen(true)}>\r\n                                <Plus className=\"mr-2 h-4 w-4\" />\r\n                                Add Holiday\r\n                            </Button>\r\n                        )}\r\n                        <Button onClick={() => setIsApplyOpen(true)}>\r\n                            <Plus className=\"mr-2 h-4 w-4\" />\r\n                            Apply Leave\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n\r\n                {isAdmin && (\r\n                    <TabsContent value=\"requests\" className=\"space-y-4\">\r\n                        <div className=\"rounded-md border\">\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow>\r\n                                        <TableHead>Employee</TableHead>\r\n                                        <TableHead>Type</TableHead>\r\n                                        <TableHead>Dates</TableHead>\r\n                                        <TableHead>Days</TableHead>\r\n                                        <TableHead>Reason</TableHead>\r\n                                        <TableHead className=\"text-right\">Actions</TableHead>\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {adminRequests.length === 0 ? (\r\n                                        <TableRow>\r\n                                            <TableCell colSpan={6} className=\"h-24 text-center\">\r\n                                                No pending requests.\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ) : (\r\n                                        adminRequests.map((req) => (\r\n                                            <TableRow key={req.id}>\r\n                                                <TableCell>\r\n                                                    <div className=\"font-medium\">\r\n                                                        {req.employee.first_name} {req.employee.last_name}\r\n                                                    </div>\r\n                                                    <div className=\"text-xs text-muted-foreground\">\r\n                                                        {req.employee.designation?.title || 'No Designation'}\r\n                                                    </div>\r\n                                                </TableCell>\r\n                                                <TableCell>{req.leave_type.name}</TableCell>\r\n                                                <TableCell>\r\n                                                    {format(new Date(req.start_date), 'MMM d')} - {format(new Date(req.end_date), 'MMM d, yyyy')}\r\n                                                </TableCell>\r\n                                                <TableCell>{req.days}</TableCell>\r\n                                                <TableCell className=\"max-w-[200px] truncate\" title={req.reason}>\r\n                                                    {req.reason}\r\n                                                </TableCell>\r\n                                                <TableCell className=\"text-right space-x-2\">\r\n                                                    <Button\r\n                                                        size=\"sm\"\r\n                                                        onClick={() => handleApprove(req.id)}\r\n                                                        disabled={!!processingId}\r\n                                                    >\r\n                                                        <Check className=\"mr-1 h-3 w-3\" />\r\n                                                        Approve\r\n                                                    </Button>\r\n                                                    <Button\r\n                                                        size=\"sm\"\r\n                                                        variant=\"destructive\"\r\n                                                        onClick={() => handleReject(req.id)}\r\n                                                        disabled={!!processingId}\r\n                                                    >\r\n                                                        <X className=\"mr-1 h-3 w-3\" />\r\n                                                        Reject\r\n                                                    </Button>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        ))\r\n                                    )}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </div>\r\n                    </TabsContent>\r\n                )}\r\n\r\n                <TabsContent value=\"history\" className=\"space-y-4\">\r\n                    <div className=\"rounded-md border\">\r\n                        <Table>\r\n                            <TableHeader>\r\n                                <TableRow>\r\n                                    <TableHead>Type</TableHead>\r\n                                    <TableHead>Dates</TableHead>\r\n                                    <TableHead>Days</TableHead>\r\n                                    <TableHead>Status</TableHead>\r\n                                    <TableHead>Applied On</TableHead>\r\n                                </TableRow>\r\n                            </TableHeader>\r\n                            <TableBody>\r\n                                {requests.length === 0 ? (\r\n                                    <TableRow>\r\n                                        <TableCell colSpan={5} className=\"h-24 text-center\">\r\n                                            No leave history found.\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ) : (\r\n                                    requests.map((request) => (\r\n                                        <TableRow key={request.id}>\r\n                                            <TableCell className=\"font-medium\">\r\n                                                {request.leave_type.name}\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                {format(new Date(request.start_date), 'MMM d, yyyy')} - {format(new Date(request.end_date), 'MMM d, yyyy')}\r\n                                            </TableCell>\r\n                                            <TableCell>{request.days}</TableCell>\r\n                                            <TableCell>\r\n                                                <Badge\r\n                                                    variant={\r\n                                                        request.status === 'APPROVED' ? 'default' :\r\n                                                            request.status === 'REJECTED' ? 'destructive' :\r\n                                                                'secondary'\r\n                                                    }\r\n                                                >\r\n                                                    {request.status}\r\n                                                </Badge>\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-muted-foreground\">\r\n                                                {format(new Date(request.created_at), 'MMM d, yyyy')}\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ))\r\n                                )}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"holidays\">\r\n                    <div className=\"rounded-md border\">\r\n                        <Table>\r\n                            <TableHeader>\r\n                                <TableRow>\r\n                                    <TableHead>Date</TableHead>\r\n                                    <TableHead>Holiday</TableHead>\r\n                                    <TableHead>Day</TableHead>\r\n                                    <TableHead>Type</TableHead>\r\n                                    {isAdmin && <TableHead className=\"w-[70px]\"></TableHead>}\r\n                                </TableRow>\r\n                            </TableHeader>\r\n                            <TableBody>\r\n                                {holidays.length === 0 ? (\r\n                                    <TableRow>\r\n                                        <TableCell colSpan={isAdmin ? 5 : 4} className=\"h-24 text-center\">\r\n                                            No upcoming holidays.\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ) : (\r\n                                    holidays.map((holiday) => (\r\n                                        <TableRow key={holiday.id}>\r\n                                            <TableCell className=\"font-medium\">\r\n                                                {format(new Date(holiday.date), 'MMM d, yyyy')}\r\n                                            </TableCell>\r\n                                            <TableCell>{holiday.name}</TableCell>\r\n                                            <TableCell>{format(new Date(holiday.date), 'EEEE')}</TableCell>\r\n                                            <TableCell>\r\n                                                <Badge variant=\"outline\">{holiday.type}</Badge>\r\n                                            </TableCell>\r\n                                            {isAdmin && (\r\n                                                <TableCell>\r\n                                                    <DropdownMenu>\r\n                                                        <DropdownMenuTrigger asChild>\r\n                                                            <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\r\n                                                                <span className=\"sr-only\">Open menu</span>\r\n                                                                <MoreHorizontal className=\"h-4 w-4\" />\r\n                                                            </Button>\r\n                                                        </DropdownMenuTrigger>\r\n                                                        <DropdownMenuContent align=\"end\">\r\n                                                            <DropdownMenuLabel>Actions</DropdownMenuLabel>\r\n                                                            <DropdownMenuItem onClick={() => handleEditHoliday(holiday)}>\r\n                                                                <Pencil className=\"mr-2 h-4 w-4\" />\r\n                                                                Edit\r\n                                                            </DropdownMenuItem>\r\n                                                            <DropdownMenuSeparator />\r\n                                                            <DropdownMenuItem\r\n                                                                className=\"text-destructive focus:text-destructive\"\r\n                                                                onClick={() => handleDeleteHoliday(holiday)}\r\n                                                            >\r\n                                                                <Trash2 className=\"mr-2 h-4 w-4\" />\r\n                                                                Delete\r\n                                                            </DropdownMenuItem>\r\n                                                        </DropdownMenuContent>\r\n                                                    </DropdownMenu>\r\n                                                </TableCell>\r\n                                            )}\r\n                                        </TableRow>\r\n                                    ))\r\n                                )}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </div>\r\n                </TabsContent>\r\n            </Tabs>\r\n\r\n            {/* Apply Leave Dialog */}\r\n            <Dialog open={isApplyOpen} onOpenChange={setIsApplyOpen}>\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>Apply for Leave</DialogTitle>\r\n                    </DialogHeader>\r\n                    <LeaveApplicationForm\r\n                        leaveTypes={leaveTypes}\r\n                        onSuccess={() => setIsApplyOpen(false)}\r\n                    />\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            {/* Add/Edit Holiday Dialog */}\r\n            <Dialog open={isHolidayDialogOpen} onOpenChange={(open) => !open && handleCloseHolidayDialog()}>\r\n                <DialogContent>\r\n                    <HolidayDialog\r\n                        holiday={selectedHoliday}\r\n                        onSuccess={handleCloseHolidayDialog}\r\n                    />\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            {/* Delete Holiday Dialog */}\r\n            <Dialog open={isDeleteDialogOpen} onOpenChange={setIsDeleteDialogOpen}>\r\n                <DialogContent>\r\n                    {selectedHoliday && (\r\n                        <DeleteHolidayDialog\r\n                            holiday={selectedHoliday}\r\n                            onSuccess={() => setIsDeleteDialogOpen(false)}\r\n                            onCancel={() => setIsDeleteDialogOpen(false)}\r\n                        />\r\n                    )}\r\n                </DialogContent>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\payroll\\employee-salary-list.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Wallet' is defined but never used.","line":31,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":16,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Wallet"},"fix":{"range":[668,675],"text":""},"desc":"Remove unused variable \"Wallet\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[998,1001],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[998,1001],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":100,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":103,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1109,1112],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1109,1112],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":88,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":88,"endColumn":23},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":111,"column":115,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3652,3814],"text":"\r\n                                No active employees found. Please ensure you have added employees and set them to &quot;ACTIVE\" status.\r\n                            "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3652,3814],"text":"\r\n                                No active employees found. Please ensure you have added employees and set them to &ldquo;ACTIVE\" status.\r\n                            "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3652,3814],"text":"\r\n                                No active employees found. Please ensure you have added employees and set them to &#34;ACTIVE\" status.\r\n                            "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3652,3814],"text":"\r\n                                No active employees found. Please ensure you have added employees and set them to &rdquo;ACTIVE\" status.\r\n                            "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":111,"column":122,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3652,3814],"text":"\r\n                                No active employees found. Please ensure you have added employees and set them to \"ACTIVE&quot; status.\r\n                            "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3652,3814],"text":"\r\n                                No active employees found. Please ensure you have added employees and set them to \"ACTIVE&ldquo; status.\r\n                            "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3652,3814],"text":"\r\n                                No active employees found. Please ensure you have added employees and set them to \"ACTIVE&#34; status.\r\n                            "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3652,3814],"text":"\r\n                                No active employees found. Please ensure you have added employees and set them to \"ACTIVE&rdquo; status.\r\n                            "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow\r\n} from \"@/components/ui/table\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle\r\n} from \"@/components/ui/dialog\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue\r\n} from \"@/components/ui/select\"\r\nimport { Wallet, Pencil } from \"lucide-react\"\r\nimport { assignSalaryAction } from \"@/app/(dashboard)/payroll/employees/actions\"\r\nimport { toast } from \"sonner\"\r\nimport { useRouter } from \"next/navigation\"\r\n\r\ninterface Employee {\r\n    id: string\r\n    first_name: string\r\n    last_name: string\r\n    employee_id: string\r\n    salary_settings: any[]\r\n}\r\n\r\nexport function EmployeeSalaryList({ employees, structures }: { employees: Employee[], structures: any[] }) {\r\n    const router = useRouter()\r\n    const [selectedEmployee, setSelectedEmployee] = useState<Employee | null>(null)\r\n    const [isDialogOpen, setIsDialogOpen] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const [formData, setFormData] = useState({\r\n        base_salary: '',\r\n        structure_id: '',\r\n        payment_method: 'BANK_TRANSFER'\r\n    })\r\n\r\n    const handleOpenDialog = (employee: Employee) => {\r\n        const settings = employee.salary_settings?.[0]\r\n        setSelectedEmployee(employee)\r\n        setFormData({\r\n            base_salary: settings?.base_salary?.toString() || '',\r\n            structure_id: settings?.salary_structure_id || '',\r\n            payment_method: settings?.payment_method || 'BANK_TRANSFER'\r\n        })\r\n        setIsDialogOpen(true)\r\n    }\r\n\r\n    const handleSubmit = async () => {\r\n        if (!selectedEmployee) return\r\n        setLoading(true)\r\n\r\n        try {\r\n            const structure_id = formData.structure_id === \"\" ? null : formData.structure_id;\r\n\r\n            const res = await assignSalaryAction({\r\n                employee_id: selectedEmployee.id,\r\n                ...formData,\r\n                structure_id: structure_id as string, // Cast for type safety but it's handled on server\r\n                base_salary: parseFloat(formData.base_salary)\r\n            })\r\n\r\n            if (res.success) {\r\n                toast.success('Salary assigned successfully')\r\n                setIsDialogOpen(false)\r\n                router.refresh()\r\n            } else {\r\n                toast.error(res.error || 'Failed to assign salary')\r\n            }\r\n        } catch (error) {\r\n            toast.error('Something went wrong')\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"rounded-md border bg-white\">\r\n            <Table>\r\n                <TableHeader>\r\n                    <TableRow>\r\n                        <TableHead>Employee</TableHead>\r\n                        <TableHead>Salary Structure</TableHead>\r\n                        <TableHead>Base Salary</TableHead>\r\n                        <TableHead>Payment Method</TableHead>\r\n                        <TableHead className=\"text-right\">Action</TableHead>\r\n                    </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                    {employees.length === 0 ? (\r\n                        <TableRow>\r\n                            <TableCell colSpan={5} className=\"text-center py-8 text-muted-foreground\">\r\n                                No active employees found. Please ensure you have added employees and set them to \"ACTIVE\" status.\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    ) : (\r\n                        employees.map((emp) => {\r\n                            const settings = emp.salary_settings?.[0]\r\n                            const structureName = structures?.find(s => s.id === settings?.salary_structure_id)?.name\r\n\r\n                            return (\r\n                                <TableRow key={emp.id}>\r\n                                    <TableCell>\r\n                                        <div className=\"font-medium\">{emp.first_name} {emp.last_name}</div>\r\n                                        <div className=\"text-xs text-muted-foreground\">{emp.employee_id}</div>\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        {structureName ? (\r\n                                            <Badge variant=\"secondary\">{structureName}</Badge>\r\n                                        ) : (\r\n                                            <span className=\"text-muted-foreground text-xs italic\">Not Assigned</span>\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        {settings?.base_salary ? (\r\n                                            <span className=\"font-mono\">${parseFloat(settings.base_salary).toLocaleString()}</span>\r\n                                        ) : (\r\n                                            '—'\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        {settings?.payment_method?.replace('_', ' ') || '—'}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right\">\r\n                                        <Button variant=\"outline\" size=\"sm\" onClick={() => handleOpenDialog(emp)}>\r\n                                            <Pencil className=\"mr-2 h-4 w-4\" />\r\n                                            {settings ? 'Update' : 'Assign'}\r\n                                        </Button>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            )\r\n                        })\r\n                    )}\r\n                </TableBody>\r\n            </Table>\r\n\r\n            <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>Assign Salary: {selectedEmployee?.first_name} {selectedEmployee?.last_name}</DialogTitle>\r\n                        <DialogDescription>\r\n                            Set the base salary and structure for this employee.\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4 py-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Salary Structure</Label>\r\n                            <Select\r\n                                value={formData.structure_id}\r\n                                onValueChange={(v) => setFormData({ ...formData, structure_id: v })}\r\n                            >\r\n                                <SelectTrigger>\r\n                                    <SelectValue placeholder=\"Select a structure\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {structures.map((s) => (\r\n                                        <SelectItem key={s.id} value={s.id}>{s.name}</SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Base Salary (CTC/Monthly)</Label>\r\n                            <Input\r\n                                type=\"number\"\r\n                                placeholder=\"0.00\"\r\n                                value={formData.base_salary}\r\n                                onChange={(e) => setFormData({ ...formData, base_salary: e.target.value })}\r\n                            />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Payment Method</Label>\r\n                            <Select\r\n                                value={formData.payment_method}\r\n                                onValueChange={(v) => setFormData({ ...formData, payment_method: v })}\r\n                            >\r\n                                <SelectTrigger>\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"BANK_TRANSFER\">Bank Transfer</SelectItem>\r\n                                    <SelectItem value=\"CASH\">Cash</SelectItem>\r\n                                    <SelectItem value=\"CHEQUE\">Cheque</SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    </div>\r\n                    <DialogFooter>\r\n                        <Button variant=\"outline\" onClick={() => setIsDialogOpen(false)}>Cancel</Button>\r\n                        <Button onClick={handleSubmit} disabled={loading}>\r\n                            {loading ? 'Saving...' : 'Save Settings'}\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\payroll\\payroll-run-flow.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":15,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Badge"},"fix":{"range":[451,496],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":10,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":47,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AlertCircle"},"fix":{"range":[531,544],"text":""},"desc":"Remove unused variable \"AlertCircle\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1297,1300],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1297,1300],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":38,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":54,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":144,"column":91,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":94,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7191,7194],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7191,7194],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":144,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7199,7202],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7199,7202],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Calculator, CheckCircle2, AlertCircle, Loader2 } from \"lucide-react\"\r\nimport { processPayrollAction, finalizePayrollAction } from \"@/app/(dashboard)/payroll/run/actions\"\r\nimport { toast } from \"sonner\"\r\n\r\nconst MONTHS = [\r\n    \"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n    \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n]\r\n\r\nconst YEARS = [\"2025\", \"2026\", \"2027\"]\r\n\r\nexport function PayrollRunFlow() {\r\n    const [step, setStep] = useState(1) // 1: Select Date, 2: Review, 3: Success\r\n    const [loading, setLoading] = useState(false)\r\n    const [selectedMonth, setSelectedMonth] = useState(new Date().getMonth() + 1)\r\n    const [selectedYear, setSelectedYear] = useState(new Date().getFullYear())\r\n    const [payrollRecords, setPayrollRecords] = useState<any[]>([])\r\n\r\n    const handleGenerate = async () => {\r\n        setLoading(true)\r\n        try {\r\n            const res = await processPayrollAction(selectedMonth, selectedYear)\r\n            if (res.success) {\r\n                setPayrollRecords(res.data || [])\r\n                setStep(2)\r\n            } else {\r\n                toast.error(res.error || \"Failed to process payroll\")\r\n            }\r\n        } catch (error) {\r\n            toast.error(\"An unexpected error occurred\")\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleFinalize = async () => {\r\n        setLoading(true)\r\n        try {\r\n            const res = await finalizePayrollAction(selectedMonth, selectedYear)\r\n            if (res.success) {\r\n                setStep(3)\r\n            } else {\r\n                toast.error(res.error || \"Failed to finalize\")\r\n            }\r\n        } catch (error) {\r\n            toast.error(\"An unexpected error occurred\")\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    if (step === 1) {\r\n        return (\r\n            <Card className=\"max-w-md mx-auto\">\r\n                <CardHeader>\r\n                    <CardTitle>Select Period</CardTitle>\r\n                    <CardDescription>Choose the month and year to process payroll for.</CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Month</Label>\r\n                            <Select value={selectedMonth.toString()} onValueChange={(v) => setSelectedMonth(parseInt(v))}>\r\n                                <SelectTrigger>\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {MONTHS.map((m, i) => (\r\n                                        <SelectItem key={i} value={(i + 1).toString()}>{m}</SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Year</Label>\r\n                            <Select value={selectedYear.toString()} onValueChange={(v) => setSelectedYear(parseInt(v))}>\r\n                                <SelectTrigger>\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {YEARS.map((y) => (\r\n                                        <SelectItem key={y} value={y}>{y}</SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    </div>\r\n                    <Button className=\"w-full\" onClick={handleGenerate} disabled={loading}>\r\n                        {loading ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <Calculator className=\"mr-2 h-4 w-4\" />}\r\n                        Generate Payroll Draft\r\n                    </Button>\r\n                </CardContent>\r\n            </Card>\r\n        )\r\n    }\r\n\r\n    if (step === 2) {\r\n        return (\r\n            <div className=\"space-y-6\">\r\n                <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between\">\r\n                        <div>\r\n                            <CardTitle>Review Payroll: {MONTHS[selectedMonth - 1]} {selectedYear}</CardTitle>\r\n                            <CardDescription>Review the calculated salaries before finalizing.</CardDescription>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                            <div className=\"text-2xl font-bold\">\r\n                                ${payrollRecords.reduce((acc, r) => acc + (r.net_salary || 0), 0).toLocaleString()}\r\n                            </div>\r\n                            <div className=\"text-xs text-muted-foreground\">Total Net Payout</div>\r\n                        </div>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <Table>\r\n                            <TableHeader>\r\n                                <TableRow>\r\n                                    <TableHead>Employee</TableHead>\r\n                                    <TableHead>Gross Salary</TableHead>\r\n                                    <TableHead>Deductions</TableHead>\r\n                                    <TableHead>Net Salary</TableHead>\r\n                                </TableRow>\r\n                            </TableHeader>\r\n                            <TableBody>\r\n                                {payrollRecords.map((record) => (\r\n                                    <TableRow key={record.id}>\r\n                                        <TableCell>\r\n                                            <div className=\"font-medium\">{record.employee.first_name} {record.employee.last_name}</div>\r\n                                            <div className=\"text-xs text-muted-foreground\">{record.employee.employee_id}</div>\r\n                                        </TableCell>\r\n                                        <TableCell>${parseFloat(record.gross_salary).toLocaleString()}</TableCell>\r\n                                        <TableCell>\r\n                                            <span className=\"text-destructive\">\r\n                                                -${payrollRecords.filter(r => r.id === record.id).reduce((acc, r) => {\r\n                                                    const deds = r.deductions || {}\r\n                                                    return Object.values(deds).reduce((a: any, d: any) => a + d.amount, 0)\r\n                                                }, 0).toLocaleString()}\r\n                                            </span>\r\n                                        </TableCell>\r\n                                        <TableCell className=\"font-bold\">${parseFloat(record.net_salary).toLocaleString()}</TableCell>\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </CardContent>\r\n                </Card>\r\n                <div className=\"flex justify-end gap-2\">\r\n                    <Button variant=\"outline\" onClick={() => setStep(1)}>Back</Button>\r\n                    <Button onClick={handleFinalize} disabled={loading}>\r\n                        {loading ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <CheckCircle2 className=\"mr-2 h-4 w-4\" />}\r\n                        Finalize & Approve\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Card className=\"max-w-md mx-auto text-center py-12\">\r\n            <CardContent className=\"space-y-4\">\r\n                <div className=\"mx-auto bg-green-100 text-green-600 rounded-full h-16 w-16 flex items-center justify-center\">\r\n                    <CheckCircle2 className=\"h-10 w-10\" />\r\n                </div>\r\n                <h3 className=\"text-2xl font-bold text-green-600\">Payroll Finalized!</h3>\r\n                <p className=\"text-muted-foreground\">\r\n                    Salaries for {MONTHS[selectedMonth - 1]} {selectedYear} have been processed and approved.\r\n                </p>\r\n                <Button className=\"w-full\" onClick={() => setStep(1)}>Run Another</Button>\r\n            </CardContent>\r\n        </Card>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\payroll\\salary-structures-list.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":7,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Link"},"fix":{"range":[273,301],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1021,1024],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1021,1024],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":113,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5127,5130],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5127,5130],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5975,5978],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5975,5978],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Pencil, Trash2, MoreHorizontal } from \"lucide-react\"\r\nimport Link from \"next/link\"\r\nimport { useState } from \"react\"\r\nimport {\r\n    DropdownMenu,\r\n    DropdownMenuContent,\r\n    DropdownMenuItem,\r\n    DropdownMenuLabel,\r\n    DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\"\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\"\r\nimport { deleteSalaryStructureAction } from \"@/app/(dashboard)/payroll/structures/actions\"\r\nimport { toast } from \"sonner\"\r\nimport { useRouter } from \"next/navigation\"\r\n\r\ninterface Structure {\r\n    id: string\r\n    name: string\r\n    description: string | null\r\n    components: any\r\n    is_active: boolean\r\n}\r\n\r\nexport function SalaryStructuresList({ structures }: { structures: Structure[] }) {\r\n    const [deletingId, setDeletingId] = useState<string | null>(null)\r\n    const router = useRouter()\r\n\r\n    const handleDelete = async () => {\r\n        if (!deletingId) return\r\n\r\n        const result = await deleteSalaryStructureAction(deletingId)\r\n        if (result.success) {\r\n            toast.success('Structure deleted successfully')\r\n            setDeletingId(null)\r\n            router.refresh()\r\n        } else {\r\n            toast.error(result.error || 'Failed to delete structure')\r\n        }\r\n    }\r\n\r\n    if (structures.length === 0) {\r\n        return (\r\n            <div className=\"flex h-[400px] flex-col items-center justify-center rounded-lg border border-dashed text-center\">\r\n                <div className=\"mx-auto flex max-w-[420px] flex-col items-center justify-center text-center\">\r\n                    <h3 className=\"mt-4 text-lg font-semibold\">No structures added</h3>\r\n                    <p className=\"mb-4 mt-2 text-sm text-muted-foreground\">\r\n                        Create your first salary structure to start assigning salaries.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n            {structures.map((structure) => {\r\n                const earnings = structure.components.earnings || []\r\n                const deductions = structure.components.deductions || []\r\n\r\n                return (\r\n                    <Card key={structure.id}>\r\n                        <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                            <div className=\"space-y-1\">\r\n                                <CardTitle className=\"text-base font-medium\">\r\n                                    {structure.name}\r\n                                </CardTitle>\r\n                                <CardDescription className=\"line-clamp-1\">\r\n                                    {structure.description || 'No description'}\r\n                                </CardDescription>\r\n                            </div>\r\n                            <DropdownMenu>\r\n                                <DropdownMenuTrigger asChild>\r\n                                    <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\r\n                                        <span className=\"sr-only\">Open menu</span>\r\n                                        <MoreHorizontal className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                </DropdownMenuTrigger>\r\n                                <DropdownMenuContent align=\"end\">\r\n                                    <DropdownMenuLabel>Actions</DropdownMenuLabel>\r\n                                    <DropdownMenuItem onClick={() => router.push(`/payroll/structures/${structure.id}/edit`)}>\r\n                                        <Pencil className=\"mr-2 h-4 w-4\" />\r\n                                        Edit\r\n                                    </DropdownMenuItem>\r\n                                    <DropdownMenuItem\r\n                                        className=\"text-destructive focus:text-destructive\"\r\n                                        onClick={() => setDeletingId(structure.id)}\r\n                                    >\r\n                                        <Trash2 className=\"mr-2 h-4 w-4\" />\r\n                                        Delete\r\n                                    </DropdownMenuItem>\r\n                                </DropdownMenuContent>\r\n                            </DropdownMenu>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"space-y-4\">\r\n                                <div>\r\n                                    <div className=\"mb-1 text-xs font-semibold text-muted-foreground\">Earnings</div>\r\n                                    <div className=\"flex flex-wrap gap-1\">\r\n                                        {earnings.map((e: any, i: number) => (\r\n                                            <Badge key={i} variant=\"secondary\" className=\"text-xs\">\r\n                                                {e.name} ({e.amount_type === 'percentage' ? `${e.value}%` : 'Fixed'})\r\n                                            </Badge>\r\n                                        ))}\r\n                                        {earnings.length === 0 && <span className=\"text-xs text-muted-foreground\">None</span>}\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <div className=\"mb-1 text-xs font-semibold text-muted-foreground\">Deductions</div>\r\n                                    <div className=\"flex flex-wrap gap-1\">\r\n                                        {deductions.map((d: any, i: number) => (\r\n                                            <Badge key={i} variant=\"outline\" className=\"text-xs\">\r\n                                                {d.name} ({d.amount_type === 'percentage' ? `${d.value}%` : 'Fixed'})\r\n                                            </Badge>\r\n                                        ))}\r\n                                        {deductions.length === 0 && <span className=\"text-xs text-muted-foreground\">None</span>}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                )\r\n            })}\r\n\r\n            <AlertDialog open={!!deletingId} onOpenChange={(open) => !open && setDeletingId(null)}>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Are you sure?</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            This action cannot be undone. This will permanently delete the salary structure.\r\n                            You cannot delete a structure if it is assigned to employees.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                        <AlertDialogAction onClick={handleDelete} className=\"bg-destructive hover:bg-destructive/90\">\r\n                            Delete\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\profile\\profile-form.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1264,1267],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1264,1267],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport * as z from 'zod'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormDescription,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from '@/components/ui/form'\r\nimport { toast } from 'sonner'\r\nimport { Loader2 } from 'lucide-react'\r\nimport { updateProfileAction } from '@/app/(dashboard)/profile/actions'\r\nimport { ImageUpload } from '@/components/ui/image-upload'\r\n\r\n// Simplified schema for self-edit\r\nconst profileFormSchema = z.object({\r\n    profileImageUrl: z.string().nullable().optional(),\r\n    firstName: z.string().min(2, 'First name must be at least 2 characters'),\r\n    lastName: z.string().min(2, 'Last name must be at least 2 characters'),\r\n    phone: z.string().min(10, 'Phone number must be at least 10 characters'),\r\n    currentAddress: z.string().optional(),\r\n    permanentAddress: z.string().optional(),\r\n})\r\n\r\nexport type ProfileFormValues = z.infer<typeof profileFormSchema>\r\n\r\ninterface ProfileFormProps {\r\n    initialData: any\r\n}\r\n\r\nexport function ProfileForm({ initialData }: ProfileFormProps) {\r\n    const [isSubmitting, setIsSubmitting] = useState(false)\r\n\r\n    const defaultValues: ProfileFormValues = {\r\n        profileImageUrl: initialData?.profile_image_url || null,\r\n        firstName: initialData?.first_name || '',\r\n        lastName: initialData?.last_name || '',\r\n        phone: initialData?.phone || '',\r\n        currentAddress: initialData?.current_address?.full || '',\r\n        permanentAddress: initialData?.permanent_address?.full || '',\r\n    }\r\n\r\n    const form = useForm<ProfileFormValues>({\r\n        resolver: zodResolver(profileFormSchema),\r\n        defaultValues,\r\n    })\r\n\r\n    const handleSubmit = async (data: ProfileFormValues) => {\r\n        setIsSubmitting(true)\r\n        try {\r\n            const result = await updateProfileAction(data)\r\n            if (result.success) {\r\n                toast.success('Profile updated successfully')\r\n            } else {\r\n                toast.error(result.error || 'Failed to update profile')\r\n            }\r\n        } catch (error) {\r\n            console.error('Error updating profile:', error)\r\n            toast.error('An unexpected error occurred')\r\n        } finally {\r\n            setIsSubmitting(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Form {...form}>\r\n            <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-8\">\r\n                {/* Profile Image */}\r\n                <div className=\"space-y-4\">\r\n                    <h3 className=\"text-lg font-medium\">Profile Picture</h3>\r\n                    <FormField\r\n                        control={form.control}\r\n                        name=\"profileImageUrl\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormControl>\r\n                                    <ImageUpload\r\n                                        value={field.value}\r\n                                        onChange={field.onChange}\r\n                                        disabled={isSubmitting}\r\n                                    />\r\n                                </FormControl>\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n                </div>\r\n\r\n                {/* Personal Info */}\r\n                <div className=\"space-y-4\">\r\n                    <h3 className=\"text-lg font-medium\">Personal Information</h3>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"firstName\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>First Name</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input placeholder=\"John\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"lastName\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Last Name</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input placeholder=\"Doe\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"phone\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Phone Number</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input placeholder=\"+1234567890\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                        <FormItem>\r\n                            <FormLabel>Email</FormLabel>\r\n                            <FormControl>\r\n                                <Input value={initialData?.email || ''} disabled className=\"bg-muted\" />\r\n                            </FormControl>\r\n                            <FormDescription>Email cannot be changed.</FormDescription>\r\n                        </FormItem>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Work Info (Read Only) */}\r\n                <div className=\"space-y-4\">\r\n                    <h3 className=\"text-lg font-medium\">Work Information</h3>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <FormLabel>Department</FormLabel>\r\n                            <Input value={initialData?.departments?.name || 'N/A'} disabled className=\"bg-muted\" />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <FormLabel>Designation</FormLabel>\r\n                            <Input value={initialData?.designations?.name || 'N/A'} disabled className=\"bg-muted\" />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <FormLabel>Employment Type</FormLabel>\r\n                            <Input value={initialData?.employment_type?.replace('_', ' ') || 'N/A'} disabled className=\"bg-muted\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Address */}\r\n                <div className=\"space-y-4\">\r\n                    <h3 className=\"text-lg font-medium\">Address</h3>\r\n                    <div className=\"grid grid-cols-1 gap-4\">\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"currentAddress\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Current Address</FormLabel>\r\n                                    <FormControl>\r\n                                        <Textarea placeholder=\"Full address\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"permanentAddress\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Permanent Address</FormLabel>\r\n                                    <FormControl>\r\n                                        <Textarea placeholder=\"Full address\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex justify-end\">\r\n                    <Button type=\"submit\" disabled={isSubmitting}>\r\n                        {isSubmitting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                        Save Changes\r\n                    </Button>\r\n                </div>\r\n            </form>\r\n        </Form>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\settings\\department-form.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":70,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport * as z from 'zod'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { Switch } from '@/components/ui/switch'\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormDescription,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from '@/components/ui/form'\r\nimport { toast } from 'sonner'\r\nimport { Loader2 } from 'lucide-react'\r\nimport { createDepartmentAction, updateDepartmentAction } from '@/app/(dashboard)/departments/actions'\r\n\r\nconst formSchema = z.object({\r\n    name: z.string().min(2, 'Name must be at least 2 characters'),\r\n    description: z.string().optional(),\r\n    isActive: z.boolean().default(true),\r\n})\r\n\r\ntype FormValues = z.infer<typeof formSchema>\r\n\r\ninterface DepartmentFormProps {\r\n    initialData?: {\r\n        name: string\r\n        description?: string\r\n        isActive: boolean\r\n    }\r\n    departmentId?: string\r\n    onSuccess: () => void\r\n}\r\n\r\nexport function DepartmentForm({ initialData, departmentId, onSuccess }: DepartmentFormProps) {\r\n    const [isSubmitting, setIsSubmitting] = useState(false)\r\n\r\n    const form = useForm<FormValues>({\r\n        resolver: zodResolver(formSchema),\r\n        defaultValues: {\r\n            name: initialData?.name || '',\r\n            description: initialData?.description || '',\r\n            isActive: initialData?.isActive ?? true,\r\n        },\r\n    })\r\n\r\n    async function onSubmit(data: FormValues) {\r\n        setIsSubmitting(true)\r\n        try {\r\n            let result\r\n            if (departmentId) {\r\n                result = await updateDepartmentAction(departmentId, data)\r\n            } else {\r\n                result = await createDepartmentAction(data)\r\n            }\r\n\r\n            if (result.success) {\r\n                toast.success(departmentId ? 'Department updated' : 'Department created')\r\n                onSuccess()\r\n            } else {\r\n                toast.error(result.error || 'Operation failed')\r\n            }\r\n        } catch (error) {\r\n            toast.error('Something went wrong')\r\n        } finally {\r\n            setIsSubmitting(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Form {...form}>\r\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                <FormField\r\n                    control={form.control}\r\n                    name=\"name\"\r\n                    render={({ field }) => (\r\n                        <FormItem>\r\n                            <FormLabel>Department Name</FormLabel>\r\n                            <FormControl>\r\n                                <Input placeholder=\"e.g. Engineering\" {...field} />\r\n                            </FormControl>\r\n                            <FormMessage />\r\n                        </FormItem>\r\n                    )}\r\n                />\r\n\r\n                <FormField\r\n                    control={form.control}\r\n                    name=\"description\"\r\n                    render={({ field }) => (\r\n                        <FormItem>\r\n                            <FormLabel>Description</FormLabel>\r\n                            <FormControl>\r\n                                <Textarea placeholder=\"Optional description...\" className=\"resize-none\" {...field} />\r\n                            </FormControl>\r\n                            <FormMessage />\r\n                        </FormItem>\r\n                    )}\r\n                />\r\n\r\n                <FormField\r\n                    control={form.control}\r\n                    name=\"isActive\"\r\n                    render={({ field }) => (\r\n                        <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm\">\r\n                            <div className=\"space-y-0.5\">\r\n                                <FormLabel>Active Status</FormLabel>\r\n                                <FormDescription>\r\n                                    Inactive departments cannot be assigned to employees.\r\n                                </FormDescription>\r\n                            </div>\r\n                            <FormControl>\r\n                                <Switch\r\n                                    checked={field.value}\r\n                                    onCheckedChange={field.onChange}\r\n                                />\r\n                            </FormControl>\r\n                        </FormItem>\r\n                    )}\r\n                />\r\n\r\n                <div className=\"flex justify-end pt-2\">\r\n                    <Button type=\"submit\" disabled={isSubmitting}>\r\n                        {isSubmitting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                        {departmentId ? 'Save Changes' : 'Create Department'}\r\n                    </Button>\r\n                </div>\r\n            </form>\r\n        </Form>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\settings\\department-list.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DropdownMenuSeparator' is defined but never used.","line":36,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":26,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"DropdownMenuSeparator"},"fix":{"range":[797,825],"text":""},"desc":"Remove unused variable \"DropdownMenuSeparator\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'departments' is assigned a value but never used.","line":65,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setDepartments' is assigned a value but never used.","line":65,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Plus, Pencil, Trash2, Search, MoreHorizontal } from 'lucide-react'\r\nimport { DepartmentForm } from './department-form'\r\nimport { Input } from \"@/components/ui/input\"\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\"\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from \"@/components/ui/table\"\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from \"@/components/ui/dialog\"\r\nimport {\r\n    DropdownMenu,\r\n    DropdownMenuContent,\r\n    DropdownMenuItem,\r\n    DropdownMenuLabel,\r\n    DropdownMenuSeparator,\r\n    DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu'\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { deleteDepartmentAction } from '@/app/(dashboard)/departments/actions'\r\nimport { toast } from 'sonner'\r\n\r\ninterface Department {\r\n    id: string\r\n    name: string\r\n    description: string | null\r\n    is_active: boolean | null\r\n}\r\n\r\ninterface DepartmentListProps {\r\n    initialDepartments: Department[]\r\n}\r\n\r\nexport function DepartmentList({ initialDepartments }: DepartmentListProps) {\r\n    const [departments, setDepartments] = useState<Department[]>(initialDepartments)\r\n    const [isAddOpen, setIsAddOpen] = useState(false)\r\n    const [editingDept, setEditingDept] = useState<Department | null>(null)\r\n    const [deletingId, setDeletingId] = useState<string | null>(null)\r\n\r\n    // Note: In a real app with server components, we rely on revalidatePath\r\n    // passed down or router.refresh(), but updating local state provides immediate feedback\r\n    // if using router.refresh() is too slow or if we want optimistic updates.\r\n    // For simplicity, we'll rely on server revalidation to update the list \r\n    // but the parent page needs to re-fetch. Since this is a client component receiving props,\r\n    // we should ideally use `useRouter().refresh()` after actions.\r\n\r\n    // To keep it simple: We will just accept the props. When server action revalidates,\r\n    // the page re-renders and passes new props.\r\n\r\n    const [searchQuery, setSearchQuery] = useState('')\r\n    const [statusFilter, setStatusFilter] = useState<string>('all')\r\n\r\n    const handleDelete = async () => {\r\n        if (!deletingId) return\r\n\r\n        const result = await deleteDepartmentAction(deletingId)\r\n        if (result.success) {\r\n            toast.success('Department deleted')\r\n            setDeletingId(null)\r\n            // Router refresh is handled automatically by revalidatePath in server action\r\n        } else {\r\n            toast.error(result.error || 'Failed to delete department')\r\n        }\r\n    }\r\n\r\n    const filteredDepartments = initialDepartments.filter(dept => {\r\n        const matchesSearch = dept.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            (dept.description?.toLowerCase() || '').includes(searchQuery.toLowerCase())\r\n\r\n        const matchesStatus = statusFilter === 'all'\r\n            ? true\r\n            : statusFilter === 'active'\r\n                ? dept.is_active\r\n                : !dept.is_active\r\n\r\n        return matchesSearch && matchesStatus\r\n    })\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            <div className=\"flex flex-col sm:flex-row justify-between gap-4 items-center\">\r\n                <div className=\"flex gap-2 w-full sm:w-auto\">\r\n                    <div className=\"relative w-full sm:w-[300px]\">\r\n                        <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                        <Input\r\n                            placeholder=\"Search departments...\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                            className=\"pl-8\"\r\n                        />\r\n                    </div>\r\n                    <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                        <SelectTrigger className=\"w-[180px]\">\r\n                            <SelectValue placeholder=\"Filter by status\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            <SelectItem value=\"all\">All Status</SelectItem>\r\n                            <SelectItem value=\"active\">Active</SelectItem>\r\n                            <SelectItem value=\"inactive\">Inactive</SelectItem>\r\n                        </SelectContent>\r\n                    </Select>\r\n                </div>\r\n                <Dialog open={isAddOpen} onOpenChange={setIsAddOpen}>\r\n                    <DialogTrigger asChild>\r\n                        <Button>\r\n                            <Plus className=\"mr-2 h-4 w-4\" />\r\n                            Add Department\r\n                        </Button>\r\n                    </DialogTrigger>\r\n                    <DialogContent>\r\n                        <DialogHeader>\r\n                            <DialogTitle>Add New Department</DialogTitle>\r\n                            <DialogDescription>\r\n                                Create a new department for your organization.\r\n                            </DialogDescription>\r\n                        </DialogHeader>\r\n                        <DepartmentForm onSuccess={() => setIsAddOpen(false)} />\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </div>\r\n\r\n            <div className=\"rounded-md border\">\r\n                <Table>\r\n                    <TableHeader>\r\n                        <TableRow>\r\n                            <TableHead>Name</TableHead>\r\n                            <TableHead>Description</TableHead>\r\n                            <TableHead>Status</TableHead>\r\n                            <TableHead className=\"text-right\">Actions</TableHead>\r\n                        </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                        {filteredDepartments.length === 0 ? (\r\n                            <TableRow>\r\n                                <TableCell colSpan={4} className=\"h-24 text-center\">\r\n                                    No departments found.\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        ) : (\r\n                            filteredDepartments.map((dept) => (\r\n                                <TableRow key={dept.id}>\r\n                                    <TableCell className=\"font-medium\">{dept.name}</TableCell>\r\n                                    <TableCell>{dept.description}</TableCell>\r\n                                    <TableCell>\r\n                                        <Badge variant={dept.is_active ? \"default\" : \"secondary\"}>\r\n                                            {dept.is_active ? 'Active' : 'Inactive'}\r\n                                        </Badge>\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right\">\r\n                                        <DropdownMenu>\r\n                                            <DropdownMenuTrigger asChild>\r\n                                                <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\r\n                                                    <span className=\"sr-only\">Open menu</span>\r\n                                                    <MoreHorizontal className=\"h-4 w-4\" />\r\n                                                </Button>\r\n                                            </DropdownMenuTrigger>\r\n                                            <DropdownMenuContent align=\"end\">\r\n                                                <DropdownMenuLabel>Actions</DropdownMenuLabel>\r\n                                                <DropdownMenuItem onClick={() => setEditingDept(dept)}>\r\n                                                    <Pencil className=\"mr-2 h-4 w-4\" />\r\n                                                    Edit\r\n                                                </DropdownMenuItem>\r\n                                                <DropdownMenuItem\r\n                                                    className=\"text-destructive focus:text-destructive\"\r\n                                                    onClick={() => setDeletingId(dept.id)}\r\n                                                >\r\n                                                    <Trash2 className=\"mr-2 h-4 w-4\" />\r\n                                                    Delete\r\n                                                </DropdownMenuItem>\r\n                                            </DropdownMenuContent>\r\n                                        </DropdownMenu>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))\r\n                        )}\r\n                    </TableBody>\r\n                </Table>\r\n            </div>\r\n\r\n            {/* Edit Dialog */}\r\n            <Dialog open={!!editingDept} onOpenChange={(open) => !open && setEditingDept(null)}>\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>Edit Department</DialogTitle>\r\n                        <DialogDescription>\r\n                            Make changes to the department details.\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    {editingDept && (\r\n                        <DepartmentForm\r\n                            initialData={{\r\n                                name: editingDept.name,\r\n                                description: editingDept.description || undefined,\r\n                                isActive: editingDept.is_active || false\r\n                            }}\r\n                            departmentId={editingDept.id}\r\n                            onSuccess={() => setEditingDept(null)}\r\n                        />\r\n                    )}\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            {/* Delete Confirmation */}\r\n            <AlertDialog open={!!deletingId} onOpenChange={(open) => !open && setDeletingId(null)}>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Are you sure?</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            This action cannot be undone. This will permanently delete the department.\r\n                            You cannot delete a department if employees are assigned to it.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                        <AlertDialogAction onClick={handleDelete} className=\"bg-destructive hover:bg-destructive/90\">\r\n                            Delete\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\settings\\designation-form.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":87,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":87,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport * as z from 'zod'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Switch } from '@/components/ui/switch'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormDescription,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from '@/components/ui/form'\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\"\r\nimport { toast } from 'sonner'\r\nimport { Loader2 } from 'lucide-react'\r\nimport { createDesignationAction, updateDesignationAction } from '@/app/(dashboard)/designations/actions'\r\n\r\nconst formSchema = z.object({\r\n    name: z.string().min(2, 'Name must be at least 2 characters'),\r\n    description: z.string().optional(),\r\n    level: z.coerce.number().min(1, 'Level must be at least 1'),\r\n    departmentId: z.string().optional(),\r\n    isActive: z.boolean().default(true),\r\n})\r\n\r\ntype FormValues = z.infer<typeof formSchema>\r\n\r\ninterface Department {\r\n    id: string\r\n    name: string\r\n}\r\n\r\ninterface DesignationFormProps {\r\n    initialData?: {\r\n        name: string\r\n        description?: string\r\n        level: number\r\n        departmentId?: string\r\n        isActive: boolean\r\n    }\r\n    departments: Department[]\r\n    designationId?: string\r\n    onSuccess: () => void\r\n}\r\n\r\nexport function DesignationForm({ initialData, departments, designationId, onSuccess }: DesignationFormProps) {\r\n    const [isSubmitting, setIsSubmitting] = useState(false)\r\n\r\n    const form = useForm<FormValues>({\r\n        resolver: zodResolver(formSchema),\r\n        defaultValues: {\r\n            name: initialData?.name || '',\r\n            description: initialData?.description || '',\r\n            level: initialData?.level || 1,\r\n            departmentId: initialData?.departmentId || undefined,\r\n            isActive: initialData?.isActive ?? true,\r\n        },\r\n    })\r\n\r\n    async function onSubmit(data: FormValues) {\r\n        setIsSubmitting(true)\r\n        try {\r\n            let result\r\n            if (designationId) {\r\n                result = await updateDesignationAction(designationId, data)\r\n            } else {\r\n                result = await createDesignationAction(data)\r\n            }\r\n\r\n            if (result.success) {\r\n                toast.success(designationId ? 'Designation updated' : 'Designation created')\r\n                onSuccess()\r\n            } else {\r\n                toast.error(result.error || 'Operation failed')\r\n            }\r\n        } catch (error) {\r\n            toast.error('Something went wrong')\r\n        } finally {\r\n            setIsSubmitting(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Form {...form}>\r\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-3 gap-4\">\r\n                    <div className=\"col-span-2\">\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"name\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Job Title</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input placeholder=\"e.g. Senior Developer\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"level\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Level</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input type=\"number\" min={1} {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <FormField\r\n                    control={form.control}\r\n                    name=\"departmentId\"\r\n                    render={({ field }) => (\r\n                        <FormItem>\r\n                            <FormLabel>Department</FormLabel>\r\n                            <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                <FormControl>\r\n                                    <SelectTrigger>\r\n                                        <SelectValue placeholder=\"All Departments (Global)\" />\r\n                                    </SelectTrigger>\r\n                                </FormControl>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"null\">All Departments</SelectItem>\r\n                                    {departments.map((dept) => (\r\n                                        <SelectItem key={dept.id} value={dept.id}>\r\n                                            {dept.name}\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                            <FormDescription>\r\n                                Limit this designation to a specific department.\r\n                            </FormDescription>\r\n                            <FormMessage />\r\n                        </FormItem>\r\n                    )}\r\n                />\r\n\r\n                <div className=\"col-span-3\">\r\n                    <FormField\r\n                        control={form.control}\r\n                        name=\"description\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormLabel>Description</FormLabel>\r\n                                <FormControl>\r\n                                    <Textarea placeholder=\"e.g. Responsible for...\" {...field} />\r\n                                </FormControl>\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground\">Level 1 is the highest (e.g., CEO), higher numbers are lower hierarchy.</p>\r\n\r\n                <FormField\r\n                    control={form.control}\r\n                    name=\"isActive\"\r\n                    render={({ field }) => (\r\n                        <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm\">\r\n                            <div className=\"space-y-0.5\">\r\n                                <FormLabel>Active Status</FormLabel>\r\n                                <FormDescription>\r\n                                    Inactive designations cannot be assigned to employees.\r\n                                </FormDescription>\r\n                            </div>\r\n                            <FormControl>\r\n                                <Switch\r\n                                    checked={field.value}\r\n                                    onCheckedChange={field.onChange}\r\n                                />\r\n                            </FormControl>\r\n                        </FormItem>\r\n                    )}\r\n                />\r\n\r\n                <div className=\"flex justify-end pt-2\">\r\n                    <Button type=\"submit\" disabled={isSubmitting}>\r\n                        {isSubmitting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                        {designationId ? 'Save Changes' : 'Create Designation'}\r\n                    </Button>\r\n                </div>\r\n            </form>\r\n        </Form>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\settings\\designation-list.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\settings\\organization-form.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FormDescription' is defined but never used.","line":13,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":20,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"FormDescription"},"fix":{"range":[359,381],"text":""},"desc":"Remove unused variable \"FormDescription\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":65,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { zodResolver } from '@hookform/resolvers/zod'\r\nimport * as z from 'zod'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormDescription,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from '@/components/ui/form'\r\nimport { toast } from 'sonner'\r\nimport { Loader2 } from 'lucide-react'\r\nimport { updateOrganizationAction } from '@/app/(dashboard)/organization/actions'\r\n\r\nconst formSchema = z.object({\r\n    name: z.string().min(2, 'Name must be at least 2 characters'),\r\n    email: z.string().email('Invalid email address'),\r\n    phone: z.string().optional(),\r\n    address: z.string().optional(),\r\n})\r\n\r\ntype FormValues = z.infer<typeof formSchema>\r\n\r\ninterface OrganizationFormProps {\r\n    initialData: {\r\n        name: string\r\n        email: string\r\n        phone: string\r\n        address: string\r\n        slug: string\r\n    }\r\n    isReadOnly?: boolean\r\n}\r\n\r\nexport function OrganizationForm({ initialData, isReadOnly = false }: OrganizationFormProps) {\r\n    const [isSubmitting, setIsSubmitting] = useState(false)\r\n\r\n    const form = useForm<FormValues>({\r\n        resolver: zodResolver(formSchema),\r\n        defaultValues: {\r\n            name: initialData.name,\r\n            email: initialData.email,\r\n            phone: initialData.phone,\r\n            address: initialData.address,\r\n        },\r\n    })\r\n\r\n    async function onSubmit(data: FormValues) {\r\n        setIsSubmitting(true)\r\n        try {\r\n            const result = await updateOrganizationAction(data)\r\n            if (result.success) {\r\n                toast.success('Organization settings updated')\r\n            } else {\r\n                toast.error(result.error || 'Failed to update settings')\r\n            }\r\n        } catch (error) {\r\n            toast.error('Something went wrong')\r\n        } finally {\r\n            setIsSubmitting(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Form {...form}>\r\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-8 max-w-2xl\">\r\n                <FormField\r\n                    control={form.control}\r\n                    name=\"name\"\r\n                    render={({ field }) => (\r\n                        <FormItem>\r\n                            <FormLabel>Company Name</FormLabel>\r\n                            <FormControl>\r\n                                <Input disabled={isReadOnly} {...field} />\r\n                            </FormControl>\r\n                            <FormMessage />\r\n                        </FormItem>\r\n                    )}\r\n                />\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <FormField\r\n                        control={form.control}\r\n                        name=\"email\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormLabel>Contact Email</FormLabel>\r\n                                <FormControl>\r\n                                    <Input disabled={isReadOnly} type=\"email\" {...field} />\r\n                                </FormControl>\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n\r\n                    <FormField\r\n                        control={form.control}\r\n                        name=\"phone\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormLabel>Phone Number</FormLabel>\r\n                                <FormControl>\r\n                                    <Input disabled={isReadOnly} {...field} />\r\n                                </FormControl>\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n                </div>\r\n\r\n                <FormField\r\n                    control={form.control}\r\n                    name=\"address\"\r\n                    render={({ field }) => (\r\n                        <FormItem>\r\n                            <FormLabel>Address</FormLabel>\r\n                            <FormControl>\r\n                                <Textarea disabled={isReadOnly} className=\"resize-none\" {...field} />\r\n                            </FormControl>\r\n                            <FormMessage />\r\n                        </FormItem>\r\n                    )}\r\n                />\r\n\r\n                <div>\r\n                    <label className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\">\r\n                        Organization Slug (Read-only)\r\n                    </label>\r\n                    <Input\r\n                        value={initialData.slug}\r\n                        disabled\r\n                        className=\"mt-2 bg-muted/50\"\r\n                    />\r\n                    <p className=\"text-[0.8rem] text-muted-foreground mt-1\">\r\n                        Used for your unique URL identifier. Cannot be changed.\r\n                    </p>\r\n                </div>\r\n\r\n                {!isReadOnly && (\r\n                    <Button type=\"submit\" disabled={isSubmitting}>\r\n                        {isSubmitting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                        Save Changes\r\n                    </Button>\r\n                )}\r\n            </form>\r\n        </Form>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\settings\\settings-sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\image-upload.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Label' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":15,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Label"},"fix":{"range":[211,256],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ImagePlus' is defined but never used.","line":9,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":28,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ImagePlus"},"fix":{"range":[357,368],"text":""},"desc":"Remove unused variable \"ImagePlus\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used.","line":9,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":35,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Check"},"fix":{"range":[368,375],"text":""},"desc":"Remove unused variable \"Check\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":9,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":38,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"X"},"fix":{"range":[375,378],"text":""},"desc":"Remove unused variable \"X\"."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchGallery'. Either include it or remove the dependency array.","line":30,"column":8,"nodeType":"ArrayExpression","endLine":30,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [isOpen, activeTab, fetchGallery]","fix":{"range":[1183,1202],"text":"[isOpen, activeTab, fetchGallery]"}}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":108,"column":29,"nodeType":"JSXOpeningElement","endLine":112,"endColumn":31},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":218,"column":57,"nodeType":"JSXOpeningElement","endLine":222,"endColumn":59}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover'\r\nimport { Loader2, ImagePlus, Check, X, Upload, ImageIcon, Trash2 } from 'lucide-react'\r\nimport { cn } from '@/lib/utils'\r\n\r\ninterface ImageUploadProps {\r\n    value?: string | null\r\n    onChange: (url: string | null) => void\r\n    disabled?: boolean\r\n}\r\n\r\nexport function ImageUpload({ value, onChange, disabled }: ImageUploadProps) {\r\n    const [isOpen, setIsOpen] = useState(false)\r\n    const [activeTab, setActiveTab] = useState<'upload' | 'gallery'>('upload')\r\n    const [isUploading, setIsUploading] = useState(false)\r\n    const [galleryImages, setGalleryImages] = useState<{ name: string; url: string }[]>([])\r\n    const [isLoadingGallery, setIsLoadingGallery] = useState(false)\r\n    const supabase = createClient()\r\n\r\n    useEffect(() => {\r\n        if (isOpen && activeTab === 'gallery') {\r\n            fetchGallery()\r\n        }\r\n    }, [isOpen, activeTab])\r\n\r\n    const fetchGallery = async () => {\r\n        setIsLoadingGallery(true)\r\n        try {\r\n            const { data, error } = await supabase.storage.from('employees').list('', {\r\n                limit: 100,\r\n                offset: 0,\r\n                sortBy: { column: 'created_at', order: 'desc' },\r\n            })\r\n\r\n            if (error) {\r\n                console.error('Error fetching gallery:', error)\r\n                return\r\n            }\r\n\r\n            if (data) {\r\n                const images = data.map((file) => {\r\n                    const { data: { publicUrl } } = supabase.storage\r\n                        .from('employees')\r\n                        .getPublicUrl(file.name)\r\n                    return { name: file.name, url: publicUrl }\r\n                })\r\n                setGalleryImages(images)\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching gallery:', error)\r\n        } finally {\r\n            setIsLoadingGallery(false)\r\n        }\r\n    }\r\n\r\n    const handleUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0]\r\n        if (!file) return\r\n\r\n        setIsUploading(true)\r\n        try {\r\n            const fileExt = file.name.split('.').pop()\r\n            const fileName = `${Math.random().toString(36).substring(2)}.${fileExt}`\r\n            const filePath = `${fileName}`\r\n\r\n            const { error: uploadError } = await supabase.storage\r\n                .from('employees')\r\n                .upload(filePath, file)\r\n\r\n            if (uploadError) {\r\n                throw uploadError\r\n            }\r\n\r\n            const { data: { publicUrl } } = supabase.storage\r\n                .from('employees')\r\n                .getPublicUrl(filePath)\r\n\r\n            onChange(publicUrl)\r\n            setIsOpen(false)\r\n        } catch (error) {\r\n            console.error('Error uploading image:', error)\r\n            alert('Error uploading image')\r\n        } finally {\r\n            setIsUploading(false)\r\n        }\r\n    }\r\n\r\n    const handleRemove = (e: React.MouseEvent) => {\r\n        e.stopPropagation()\r\n        onChange(null)\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col gap-4\">\r\n            <div className=\"flex items-center gap-4\">\r\n                <div className={cn(\r\n                    \"relative h-24 w-24 rounded-full overflow-hidden border-2 border-muted flex items-center justify-center bg-muted\",\r\n                    value ? \"border-primary\" : \"border-dashed\"\r\n                )}>\r\n                    {value ? (\r\n                        <>\r\n                            <img\r\n                                src={value}\r\n                                alt=\"Profile\"\r\n                                className=\"h-full w-full object-cover\"\r\n                            />\r\n                            {!disabled && (\r\n                                <button\r\n                                    onClick={handleRemove}\r\n                                    className=\"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity text-white\"\r\n                                    type=\"button\"\r\n                                >\r\n                                    <Trash2 className=\"h-6 w-6\" />\r\n                                </button>\r\n                            )}\r\n                        </>\r\n                    ) : (\r\n                        <ImageIcon className=\"h-8 w-8 text-muted-foreground\" />\r\n                    )}\r\n                </div>\r\n\r\n                {!disabled && (\r\n                    <Popover open={isOpen} onOpenChange={setIsOpen}>\r\n                        <PopoverTrigger asChild>\r\n                            <Button variant=\"outline\" type=\"button\">\r\n                                {value ? 'Change Image' : 'Upload Image'}\r\n                            </Button>\r\n                        </PopoverTrigger>\r\n                        <PopoverContent className=\"w-80 p-0\" align=\"start\">\r\n                            <div className=\"flex border-b\">\r\n                                <button\r\n                                    className={cn(\r\n                                        \"flex-1 p-3 text-sm font-medium transition-colors\",\r\n                                        activeTab === 'upload' ? \"border-b-2 border-primary text-primary\" : \"text-muted-foreground hover:text-foreground\"\r\n                                    )}\r\n                                    onClick={() => setActiveTab('upload')}\r\n                                    type=\"button\"\r\n                                >\r\n                                    <div className=\"flex items-center justify-center gap-2\">\r\n                                        <Upload className=\"h-4 w-4\" />\r\n                                        Upload\r\n                                    </div>\r\n                                </button>\r\n                                <button\r\n                                    className={cn(\r\n                                        \"flex-1 p-3 text-sm font-medium transition-colors\",\r\n                                        activeTab === 'gallery' ? \"border-b-2 border-primary text-primary\" : \"text-muted-foreground hover:text-foreground\"\r\n                                    )}\r\n                                    onClick={() => setActiveTab('gallery')}\r\n                                    type=\"button\"\r\n                                >\r\n                                    <div className=\"flex items-center justify-center gap-2\">\r\n                                        <ImageIcon className=\"h-4 w-4\" />\r\n                                        Gallery\r\n                                    </div>\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"p-4\">\r\n                                {activeTab === 'upload' ? (\r\n                                    <div className=\"space-y-4\">\r\n                                        <div className=\"border-2 border-dashed rounded-lg p-6 flex flex-col items-center justify-center text-center gap-2 hover:bg-muted/50 transition-colors\">\r\n                                            <Upload className=\"h-8 w-8 text-muted-foreground\" />\r\n                                            <div className=\"text-sm text-muted-foreground\">\r\n                                                <span className=\"font-semibold text-primary\">Click to upload</span> or drag and drop\r\n                                            </div>\r\n                                            <Input\r\n                                                type=\"file\"\r\n                                                accept=\"image/*\"\r\n                                                className=\"hidden\"\r\n                                                id=\"image-upload\"\r\n                                                onChange={handleUpload}\r\n                                                disabled={isUploading}\r\n                                            />\r\n                                            <Button\r\n                                                variant=\"secondary\"\r\n                                                size=\"sm\"\r\n                                                onClick={() => document.getElementById('image-upload')?.click()}\r\n                                                disabled={isUploading}\r\n                                                type=\"button\"\r\n                                            >\r\n                                                {isUploading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                                                {isUploading ? 'Uploading...' : 'Select File'}\r\n                                            </Button>\r\n                                        </div>\r\n                                    </div>\r\n                                ) : (\r\n                                    <div className=\"space-y-4\">\r\n                                        {isLoadingGallery ? (\r\n                                            <div className=\"flex justify-center p-4\">\r\n                                                <Loader2 className=\"h-6 w-6 animate-spin text-muted-foreground\" />\r\n                                            </div>\r\n                                        ) : galleryImages.length === 0 ? (\r\n                                            <div className=\"text-center text-sm text-muted-foreground p-4\">\r\n                                                No images found\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div className=\"grid grid-cols-3 gap-2 max-h-[200px] overflow-y-auto\">\r\n                                                {galleryImages.map((img) => (\r\n                                                    <button\r\n                                                        key={img.name}\r\n                                                        className={cn(\r\n                                                            \"relative aspect-square rounded-md overflow-hidden border hover:border-primary focus:outline-none focus:ring-2 focus:ring-primary\",\r\n                                                            value === img.url && \"border-primary ring-2 ring-primary\"\r\n                                                        )}\r\n                                                        onClick={() => {\r\n                                                            onChange(img.url)\r\n                                                            setIsOpen(false)\r\n                                                        }}\r\n                                                        type=\"button\"\r\n                                                    >\r\n                                                        <img\r\n                                                            src={img.url}\r\n                                                            alt={img.name}\r\n                                                            className=\"h-full w-full object-cover\"\r\n                                                        />\r\n                                                    </button>\r\n                                                ))}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </PopoverContent>\r\n                    </Popover>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\lib\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\lib\\supabase\\server.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":21,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createServerClient } from '@supabase/ssr'\r\nimport { cookies } from 'next/headers'\r\nimport type { Database } from '@/types/database.types'\r\n\r\nexport async function createClient() {\r\n    const cookieStore = await cookies()\r\n\r\n    return createServerClient<Database>(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n        {\r\n            cookies: {\r\n                getAll() {\r\n                    return cookieStore.getAll()\r\n                },\r\n                setAll(cookiesToSet) {\r\n                    try {\r\n                        cookiesToSet.forEach(({ name, value, options }) => {\r\n                            cookieStore.set(name, value, options)\r\n                        })\r\n                    } catch (error) {\r\n                        // The `set` method was called from a Server Component.\r\n                        // This can be ignored if you have middleware refreshing\r\n                        // user sessions.\r\n                    }\r\n                },\r\n            },\r\n        }\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\lib\\utils\\export.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[34,37],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[34,37],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[259,262],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[259,262],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[278,281],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[278,281],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[333,336],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[333,336],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export function exportToCSV(data: any[], filename: string) {\r\n    if (!data || data.length === 0) {\r\n        return\r\n    }\r\n\r\n    // Get headers from first object keys\r\n    // We'll flatten the object for better CSV structure\r\n    const flattenObject = (obj: any, prefix = ''): any => {\r\n        return Object.keys(obj).reduce((acc: any, k: string) => {\r\n            const pre = prefix.length ? prefix + '.' : ''\r\n            if (\r\n                typeof obj[k] === 'object' &&\r\n                obj[k] !== null &&\r\n                !Array.isArray(obj[k]) &&\r\n                !(obj[k] instanceof Date)\r\n            ) {\r\n                Object.assign(acc, flattenObject(obj[k], pre + k))\r\n            } else {\r\n                acc[pre + k] = obj[k]\r\n            }\r\n            return acc\r\n        }, {})\r\n    }\r\n\r\n    const flatData = data.map(item => flattenObject(item))\r\n    const headers = Object.keys(flatData[0])\r\n\r\n    const csvContent = [\r\n        headers.join(','), // Header row\r\n        ...flatData.map(row =>\r\n            headers.map(fieldName => {\r\n                const value = row[fieldName]\r\n                // Handle strings that might contain commas or newlines\r\n                if (typeof value === 'string') {\r\n                    return `\"${value.replace(/\"/g, '\"\"')}\"`\r\n                }\r\n                return value\r\n            }).join(',')\r\n        )\r\n    ].join('\\n')\r\n\r\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' })\r\n    const link = document.createElement('a')\r\n\r\n    if (link.download !== undefined) {\r\n        const url = URL.createObjectURL(blob)\r\n        link.setAttribute('href', url)\r\n        link.setAttribute('download', `${filename}.csv`)\r\n        link.style.visibility = 'hidden'\r\n        document.body.appendChild(link)\r\n        link.click()\r\n        document.body.removeChild(link)\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\lib\\validations\\employee.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'addressSchema' is assigned a value but never used.","line":11,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { z } from 'zod'\r\n\r\n// Emergency contact schema\r\nconst emergencyContactSchema = z.object({\r\n    name: z.string().min(2, 'Name must be at least 2 characters'),\r\n    relationship: z.string().min(2, 'Relationship is required'),\r\n    phone: z.string().regex(/^[0-9]{10}$/, 'Phone must be 10 digits'),\r\n})\r\n\r\n// Address schema\r\nconst addressSchema = z.object({\r\n    street: z.string().optional(),\r\n    city: z.string().optional(),\r\n    state: z.string().optional(),\r\n    postal_code: z.string().optional(),\r\n    country: z.string().optional(),\r\n})\r\n\r\n// Main employee form schema\r\nexport const employeeFormSchema = z.object({\r\n    // Personal Information\r\n    profileImageUrl: z.string().optional().nullable(),\r\n    firstName: z.string().min(2, 'First name must be at least 2 characters'),\r\n    lastName: z.string().min(2, 'Last name must be at least 2 characters'),\r\n    email: z.string().email('Invalid email address'),\r\n    phone: z.string().regex(/^[0-9]{10}$/, 'Phone must be 10 digits'),\r\n    dateOfBirth: z.date().max(new Date(), 'Date of birth cannot be in the future'),\r\n    gender: z.enum(['MALE', 'FEMALE', 'OTHER']),\r\n    bloodGroup: z.string().optional(),\r\n    maritalStatus: z.enum(['SINGLE', 'MARRIED', 'DIVORCED', 'WIDOWED']),\r\n\r\n    // Employment Information\r\n    departmentId: z.string().uuid('Invalid department'),\r\n    designationId: z.string().uuid('Invalid designation'),\r\n    managerId: z.union([z.string().uuid(), z.literal('none'), z.literal('')]).optional().nullable(),\r\n    employmentType: z.enum(['FULL_TIME', 'PART_TIME', 'CONTRACT', 'INTERN']),\r\n    joiningDate: z.date(),\r\n    confirmationDate: z.date().optional().nullable(),\r\n\r\n    // Address Information\r\n    currentAddress: z.string().min(10, 'Address must be at least 10 characters'),\r\n    permanentAddress: z.string().min(10, 'Address must be at least 10 characters'),\r\n    sameAsCurrent: z.boolean().optional(),\r\n\r\n    // Emergency Contacts (at least 1 required)\r\n    emergencyContacts: z.array(emergencyContactSchema).min(1, 'At least one emergency contact is required'),\r\n})\r\n\r\nexport type EmployeeFormValues = z.infer<typeof employeeFormSchema>\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\NextJSProjects\\hrm-saas\\src\\types\\database.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]